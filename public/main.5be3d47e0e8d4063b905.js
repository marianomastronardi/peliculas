(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.e)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("/6Yf"),o=n("qOnz"),s=n("mrSG"),a=n("q/0M"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new a.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},m=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=a.a.VERBOSE,m=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===m&&!0===d.get("logging_enabled")&&b(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.f)([t],Object(s.e)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));throw f.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));f.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},x=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P=function(t){var e,n,r,i,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw E("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),U=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,H="websocket",B="long_polling",z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function W(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===H)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==B)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return R(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var G=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),K={},Q={};function $(t){var e=t.toString();return K[e]||(K[e]=new G),K[e]}var Y=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),X="start",Z="close",J=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=$(e),this.urlFn=function(t){return W(e,B,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Y(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new tt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===X)n.id=o,n.password=a;else{if(i!==Z)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=k(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),tt=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),et="";function nt(t){et=t}var rt=null;"undefined"!=typeof MozWebSocket?rt=MozWebSocket:"undefined"!=typeof WebSocket&&(rt=WebSocket);var it=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=$(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&q.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),W(t,H,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+et+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new rt(this.connURL,[],r)}else this.mySock=new rt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==rt&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ot=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[J,it]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=it&&it.isAvailable(),o=i&&!it.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[it];else{var a=this.transports_=[];try{for(var u=Object(s.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),st=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new ot(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),at=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ut=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.f)([],Object(s.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ct=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ut),lt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ht(){return new lt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ft(t){return t.pieces_.length-t.pieceNum_}function pt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function gt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function yt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function mt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function vt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof lt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function bt(t){return t.pieceNum_>=t.pieces_.length}function _t(t,e){var n=dt(t),r=dt(e);if(null===n)return e;if(n===r)return _t(pt(t),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wt(t,e){for(var n=yt(t,0),r=yt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ct(t,e){if(ft(t)!==ft(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ot(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ft(t)>ft(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Et=function(){return function(t,e){this.errorPrefix_=e,this.parts_=yt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);St(this)}}();function St(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tt(t))}function Tt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var It,At,xt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ut),Nt=1e3,jt=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Nt,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),xt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ct.getInstance().on("online",l.onOnline_,l),l}return Object(s.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())};this.realtime_={close:l,sendRequest:function(t){Object(o.d)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(e){u?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,c=new st(s,t.repoInfo_,t.applicationId_,n,r,i,function(e){E(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}).then(null,function(e){t.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&E(e),l())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new lt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(s.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+et.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ct.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(at),kt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new kt(T,t),r=new kt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return kt.MIN},t}(),Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return It},set:function(t){It=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return new kt(I,It)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new kt(t,It)},e.prototype.toString=function(){return".key"},e}(Rt),Dt=new Pt,Mt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ft=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Lt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Mt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Mt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ft,t}();function Ut(t,e){return A(t.name,e.name)}function qt(t,e){return A(t,e)}var Ht,Bt,zt,Wt,Gt,Kt=function(t){return"number"==typeof t?"number:"+P(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===At||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===At||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$t=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return bt(e)?this:".priority"===dt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=dt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===ft(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?P(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return new kt(I,new $t("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=Bt(t);return new kt(e,new $t("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Xt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Xt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Jt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Lt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Lt.BLACK):(a(h,Lt.BLACK),a(h,Lt.RED))}return o}(new Zt(t.length));return new Vt(r||e,o)},te={},ee=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(te&&Yt,"ChildrenNode.ts has not been loaded"),Wt=Wt||new t({".priority":te},{".priority":Yt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Dt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(kt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?Jt(i,e.getCompare()):te;var l=e.toString(),h=Object(s.a)({},this.indexSet_);h[l]=e;var d=Object(s.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===te){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(kt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Jt(a,s.getCompare())}return te}var l=n.get(e.name),h=t;return l&&(h=h.remove(new kt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===te)return t;var r=n.get(e.name);return r?t.remove(new kt(e.name,r)):t}),this.indexSet_)},t}(),ne=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(qt),null,ee.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(pt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new kt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Gt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=dt(t);if(null===n)return e;Object(o.d)(".priority"!==dt(t)||1===ft(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Yt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Kt(this.getPriority().val())+":"),this.forEachChild(Yt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new kt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new kt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new kt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,kt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,kt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===re?-1:0},t.prototype.withIndex=function(e){if(e===Dt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Dt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Yt),r=e.getIterator(Yt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Dt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),re=new(function(t){function e(){return t.call(this,new Vt(qt),ne.EMPTY_NODE,ee.Default)||this}return Object(s.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ne.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ne));function ie(t,e){if(void 0===e&&(e=null),null===t)return ne.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new $t(t,ie(e));if(t instanceof Array){var n=ne.EMPTY_NODE;return R(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=ie(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ie(e))}var r=[],i=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=ie(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new kt(t,n)))}}),0===r.length)return ne.EMPTY_NODE;var s=Jt(r,Ut,function(t){return t.name},qt);if(i){var a=Jt(r,Yt.getCompare());return new ne(s,ie(e),new ee({".priority":a},{".priority":Yt}))}return new ne(s,ie(e),ee.Default)}Object.defineProperties(kt,{MIN:{value:new kt(T,ne.EMPTY_NODE)},MAX:{value:new kt(I,re)}}),Pt.__EMPTY_NODE=ne.EMPTY_NODE,$t.__childrenNodeConstructor=ne,At=re,zt=re,Bt=ie;var oe,se,ae=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!bt(e)&&".priority"!==dt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ie(t),r=ne.EMPTY_NODE.updateChild(this.indexPath_,n);return new kt(e,r)},e.prototype.maxPost=function(){var t=ne.EMPTY_NODE.updateChild(this.indexPath_,re);return new kt(I,t)},e.prototype.toString=function(){return yt(this.indexPath_,0).join("/")},e}(Rt),ue=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return kt.MAX},e.prototype.makePost=function(t,e){var n=ie(t);return new kt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),ce="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",le=(oe=0,se=[],function(t){var e,n=t===oe;oe=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ce.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===se[e];e--)se[e]=0;se[e]++}else for(e=0;e<12;e++)se[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ce.charAt(se[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),he=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=ce.charAt(ce.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},de=function(t){if("-2147483648"===t)return T;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ce.charAt(ce.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function fe(t){return{type:"value",snapshotNode:t}}function pe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ge(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ye(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var me=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ge(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(pe(e,n)):s.trackChildChange(ye(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Yt,function(t,r){e.hasChild(t)||n.trackChildChange(ge(t,r))}),e.isLeafNode()||e.forEachChild(Yt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ye(e,r,i))}else n.trackChildChange(pe(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ne.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ve=function(){function t(e){this.indexedFilter_=new me(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new kt(e,n))||(n=ne.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ne.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ne.EMPTY_NODE);var i=this;return e.forEachChild(Yt,function(t,e){i.matches(new kt(t,e))||(r=r.updateImmediateChild(t,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),be=function(){function t(t){this.rangedFilter_=new ve(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new kt(e,n))||(n=ne.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ne.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ne.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ne.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ne.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new kt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ye(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ge(e,d));var g=u.updateImmediateChild(e,ne.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(pe(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ge(l.name,l.node)),i.trackChildChange(pe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ne.EMPTY_NODE)):t},t}(),_e=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Yt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function we(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ce(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Oe(t,e){var n=t.copy();return n.index_=e,n}function Ee(t){var e,n={};return t.isDefault()||(t.index_===Yt?e="$priority":t.index_===ue?e="$value":t.index_===Dt?e="$key":(Object(o.d)(t.index_ instanceof ae,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Se(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}var Te=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(s.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ee(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ee(t._queryParams),r=t._path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){E("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(at),Ie=function(){function t(){this.rootNode_=ne.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ae(){return{value:null,children:new Map}}function xe(t,e,n){if(bt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=dt(e);t.children.has(r)||t.children.set(r,Ae()),xe(t.children.get(r),e=pt(e),n)}}function Ne(t,e){if(bt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Yt,function(e,n){xe(t,new lt(e),n)}),Ne(t,e)}if(t.children.size>0){var r=dt(e);return e=pt(e),t.children.has(r)&&Ne(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function je(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){je(r,new lt(e.toString()+"/"+t),n)})}var ke=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ke(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Pe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function De(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Me,Le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(bt(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(e));return new t(ht(),n,this.revert)}return Object(o.d)(dt(this.path)===e,"operationForChild called for unrelated child."),new t(pt(this.path),this.affectedTree,this.revert)},t}(),Fe=function(){function t(t,e){this.source=t,this.path=e,this.type=Pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ht()):new t(this.source,pt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pe.OVERWRITE}return t.prototype.operationForChild=function(e){return bt(this.path)?new t(this.source,ht(),this.snap.getImmediateChild(e)):new t(this.source,pt(this.path),this.snap)},t}(),Ue=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pe.MERGE}return t.prototype.operationForChild=function(e){if(bt(this.path)){var n=this.children.subtree(new lt(e));return n.isEmpty()?null:n.value?new Ve(this.source,ht(),n.value):new t(this.source,ht(),n)}return Object(o.d)(dt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,pt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),qe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(bt(t))return this.isFullyInitialized()&&!this.filtered_;var e=dt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),He=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Be(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new kt(e.childName,e.snapshotNode),i=new kt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function ze(t,e){return{eventCache:t,serverCache:e}}function We(t,e,n,r){return ze(new qe(e,n,r),t.serverCache)}function Ge(t,e,n,r){return ze(t.eventCache,new qe(e,n,r))}function Ke(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var $e=function(){function t(t,e){void 0===e&&(Me||(Me=new Vt(x)),e=Me),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,function(t,e){n=n.set(new lt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(bt(t))return null;var n=dt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(t),e);return null!=i?{path:vt(new lt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(bt(e))return this;var n=dt(e),r=this.children.get(n);return null!==r?r.subtree(pt(e)):new t(null)},t.prototype.set=function(e,n){if(bt(e))return new t(n,this.children);var r=dt(e),i=(this.children.get(r)||new t(null)).set(pt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(bt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=dt(e),r=this.children.get(n);if(r){var i=r.remove(pt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(bt(t))return this.value;var e=dt(t),n=this.children.get(e);return n?n.get(pt(t)):null},t.prototype.setTree=function(e,n){if(bt(e))return n;var r,i=dt(e),o=(this.children.get(i)||new t(null)).setTree(pt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ht(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(vt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ht(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(bt(t))return null;var i=dt(t),o=this.children.get(i);return o?o.findOnPath_(pt(t),vt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ht(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(bt(e))return this;this.value&&r(n,this.value);var i=dt(e),o=this.children.get(i);return o?o.foreachOnPath_(pt(e),vt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ht(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(vt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Ye=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new $e(null))},t}();function Xe(t,e,n){if(bt(e))return new Ye(new $e(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=_t(i,e);return o=o.updateChild(s,n),new Ye(t.writeTree_.set(i,o))}var a=new $e(n),u=t.writeTree_.setTree(e,a);return new Ye(u)}function Ze(t,e,n){var r=t;return R(n,function(t,n){r=Xe(r,vt(e,t),n)}),r}function Je(t,e){if(bt(e))return Ye.empty();var n=t.writeTree_.setTree(e,new $e(null));return new Ye(n)}function tn(t,e){return null!=en(t,e)}function en(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(_t(n.path,e)):null}function nn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Yt,function(t,n){e.push(new kt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new kt(t,n.value))}),e}function rn(t,e){if(bt(e))return t;var n=en(t,e);return new Ye(null!=n?new $e(n):t.writeTree_.subtree(e))}function on(t){return t.writeTree_.isEmpty()}function sn(t,e){return an(ht(),t.writeTree_,e)}function an(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=an(vt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(vt(t,".priority"),r)),n}function un(t,e){return bn(e,t)}function cn(t,e){if(t.snap)return Ot(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ot(vt(t.path,n),e))return!0;return!1}function ln(t){return t.visible}function hn(t,e,n){for(var r=Ye.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ot(n,a)?r=Xe(r,u=_t(n,a),s.snap):Ot(a,n)&&(u=_t(a,n),r=Xe(r,ht(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Ot(n,a))r=Ze(r,u=_t(n,a),s.children);else if(Ot(a,n))if(bt(u=_t(a,n)))r=Ze(r,ht(),s.children);else{var c=Object(o.D)(s.children,dt(u));if(c){var l=c.getChild(pt(u));r=Xe(r,ht(),l)}}}}}return r}function dn(t,e,n,r,i){if(r||i){var o=rn(t.visibleWrites,e);return!i&&on(o)?n:i||null!=n||tn(o,ht())?sn(hn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ot(t.path,e)||Ot(e,t.path))},e),n||ne.EMPTY_NODE):null}var s=en(t.visibleWrites,e);if(null!=s)return s;var a=rn(t.visibleWrites,e);return on(a)?n:null!=n||tn(a,ht())?sn(a,n||ne.EMPTY_NODE):null}function fn(t,e,n,r){return dn(t.writeTree,t.treePath,e,n,r)}function pn(t,e){return function(t,e,n){var r=ne.EMPTY_NODE,i=en(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=rn(t.visibleWrites,e);return n.forEachChild(Yt,function(t,e){var n=sn(rn(o,new lt(t)),e);r=r.updateImmediateChild(t,n)}),nn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return nn(rn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function gn(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=vt(e,n);if(tn(t.visibleWrites,s))return null;var a=rn(t.visibleWrites,s);return on(a)?i.getChild(n):sn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function yn(t,e){return function(t,e){return en(t.visibleWrites,e)}(t.writeTree,vt(t.treePath,e))}function mn(t,e,n){return function(t,e,n,r){var i=vt(e,n),o=en(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?sn(rn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function vn(t,e){return bn(vt(t.treePath,e),t.writeTree)}function bn(t,e){return{treePath:t,writeTree:e}}var _n=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ye(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ge(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,pe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ye(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),wn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Cn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new qe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=rn(t.visibleWrites,e),c=en(u,ht());if(null!=c)a=c;else{if(null==n)return[];a=sn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function On(t,e,n,r,i,s){var a=e.eventCache;if(null!=yn(r,n))return e;var u=void 0,c=void 0;if(bt(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=pn(r,l instanceof ne?l:ne.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=fn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=dt(n);if(".priority"===f){Object(o.d)(1===ft(n),"Can't have a priority with additional path components");var p=a.getNode(),g=gn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var y=pt(n),m=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=gn(r,n,a.getNode(),c);m=null!=v?a.getNode().getImmediateChild(f).updateChild(y,v):a.getNode().getImmediateChild(f)}else m=mn(r,f,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),f,m,y,i,s):a.getNode()}}return We(e,u,a.isFullyInitialized()||bt(n),t.filter.filtersNodes())}function En(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(bt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=dt(n);if(!c.isCompleteForPath(n)&&ft(n)>1)return e;var f=pt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,wn,null)}var g=Ge(e,u,c.isFullyInitialized()||bt(n),l.filtersNodes());return On(t,g,n,i,new Cn(i,g,o),a)}function Sn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Cn(i,e,o);if(bt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=We(e,u,!0,t.filter.filtersNodes());else{var h=dt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=We(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=pt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(bt(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===gt(d)&&g.getChild(mt(d)).isEmpty()?g:g.updateChild(d,r):ne.EMPTY_NODE}a=f.equals(p)?e:We(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Tn(t,e){return t.eventCache.isCompleteForChild(e)}function In(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function An(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=bt(n)?r:new $e(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=In(0,e.serverCache.getNode().getImmediateChild(n),r);c=En(t,c,new lt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=In(0,e.serverCache.getNode().getImmediateChild(n),r);c=En(t,c,new lt(n),h,i,o,s,a)}}),c}var xn,Nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new me(r.getIndex()),o=(n=r).loadsAllData()?new me(n.getIndex()):n.hasLimit()?new be(n):new ve(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ne.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ne.EMPTY_NODE,a.getNode(),null),l=new qe(u,s.isFullyInitialized(),i.filtersNodes()),h=new qe(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ze(h,l),this.eventGenerator_=new He(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function jn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!bt(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function kn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Pn(t,e,n,r){e.type===Pe.MERGE&&null!==e.source.queryId&&(Object(o.d)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(Ke(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new _n;if(n.type===Pe.OVERWRITE){var c=n;c.source.fromUser?s=Sn(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!bt(c.path),s=En(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Pe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=vt(n,r);Tn(e,dt(c))&&(a=Sn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=vt(n,r);Tn(e,dt(c))||(a=Sn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=An(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Pe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=yn(r,n))return e;var u=new Cn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(bt(n)||".priority"===dt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=fn(r,Qe(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof ne,"serverChildren would be complete if leaf node"),h=pn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=dt(n),p=mn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,pt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ne.EMPTY_NODE,pt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=fn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=yn(r,ht()),We(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=yn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(bt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return En(t,e,n,u.getNode().getChild(n),i,o,a,s);if(bt(n)){var c=new $e(null);return u.getNode().forEachChild(Dt,function(t,e){c=c.set(new lt(t),e)}),An(t,e,n,c,i,o,a,s)}return e}var l=new $e(null);return r.foreach(function(t,e){var r=vt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),An(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Pe.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return On(t,Ge(e,o.getNode(),o.isFullyInitialized()||bt(n),o.isFiltered()),n,r,wn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ke(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(fe(Ke(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Dn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Dn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Be(t,i,"child_removed",e,r,n),Be(t,i,"child_added",e,r,n),Be(t,i,"child_moved",o,r,n),Be(t,i,"child_changed",e,r,n),Be(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Mn,Ln=function(){return function(){this.views=new Map}}();function Fn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),Pn(c,e,n,r)}var l=[];try{for(var h=Object(s.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Pn(c=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=fn(n,i?r:null),a=!1;s?a=!0:r instanceof ne?(s=pn(n,r),a=!1):(s=ne.EMPTY_NODE,a=!1);var u=ze(new qe(s,a,!1),new qe(r,i,!1));return new Nn(e,u)}return o}function Un(t){var e,n,r=[];try{for(var i=Object(s.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function qn(t,e){var n,r,i=null;try{for(var o=Object(s.g)(t.views.values()),a=o.next();!a.done;a=o.next())i=i||jn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Hn(t,e){return e._queryParams.loadsAllData()?Wn(t):t.views.get(e._queryIdentifier)}function Bn(t,e){return null!=Hn(t,e)}function zn(t){return null!=Wn(t)}function Wn(t){var e,n;try{for(var r=Object(s.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,Kn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new $e(null),this.pendingWriteTree_={visibleWrites:Ye.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Xe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?tr(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function $n(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&cn(u,r.path)?i=!1:Ot(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=hn(t.allWrites,ln,ht()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Je(t.visibleWrites,r.path):R(r.children,function(e){t.visibleWrites=Je(t.visibleWrites,vt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new $e(null);return null!=r.snap?i=i.set(ht(),!0):R(r.children,function(t){i=i.set(new lt(t),!0)}),tr(t,new Le(r.path,i,n))}return[]}function Yn(t,e,n){return tr(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Xn(t,e,n,r){var i=e._path,a=t.syncPointTree_.get(i),u=[];if(a&&("default"===e._queryIdentifier||Bn(a,e))){var c=function(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],l=[],h=zn(t);if("default"===u)try{for(var d=Object(s.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(s.e)(f.value,2),y=g[0];l=l.concat(Rn(p=g[1],n,r)),kn(p)&&(t.views.delete(y),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(m){i={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Rn(p,n,r)),kn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!zn(t)&&c.push(new(Object(o.d)(xn,"Reference.ts has not been loaded"),xn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(i,function(t,e){return zn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(i);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&zn(e))return[Wn(e)];var r=[];return e&&(r=Un(e)),R(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var y=p[g],m=y.query,v=rr(t,y);t.listenProvider_.startListening(cr(m),ir(t,m),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(cr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(or(e));t.listenProvider_.stopListening(cr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=or(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Zn(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=_t(t,r);i=i||qn(e,n),s=s||zn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||zn(u),i=i||qn(u,ht())):(u=new Ln,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ne.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=qn(e,ht());n&&(i=i.updateImmediateChild(t,n))}));var c=Bn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=or(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,function(t,e){r.push(pe(t,e))}),n.isFullyInitialized()&&r.push(fe(n.getNode())),Dn(t,r,n.getNode(),e)}(s,n)}(u,e,n,un(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Hn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=ir(t,e),s=rr(t,n),a=t.listenProvider_.startListening(cr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!bt(t)&&e&&zn(e))return[Wn(e).query];var r=[];return e&&(r=r.concat(Un(e).map(function(t){return t.query}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(cr(h),ir(t,h))}return a}(t,e,f))}return d}function Jn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=qn(n,_t(t,e));if(r)return r});return dn(r,e,i,n,!0)}function tr(t,e){return er(e,t.syncPointTree_,null,un(t.pendingWriteTree_,ht()))}function er(t,e,n,r){if(bt(t.path))return nr(t,e,n,r);var i=e.get(ht());null==n&&null!=i&&(n=qn(i,ht()));var o=[],s=dt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=vn(r,s);o=o.concat(er(a,u,c,l))}return i&&(o=o.concat(Fn(i,t,r,n))),o}function nr(t,e,n,r){var i=e.get(ht());null==n&&null!=i&&(n=qn(i,ht()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=vn(r,e),u=t.operationForChild(e);u&&(o=o.concat(nr(u,i,s,a)))}),i&&(o=o.concat(Fn(i,t,r,n))),o}function rr(t,e){var n=e.query,r=ir(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ne.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=sr(t,n);if(r){var i=ar(r),o=i.path,s=i.queryId,a=_t(o,e);return ur(t,o,new Fe(De(s),a))}return[]}(t,n._path,r):function(t,e){return tr(t,new Fe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Xn(t,n,null,i)}}}function ir(t,e){var n=or(e);return t.queryToTagMap.get(n)}function or(t){return t._path.toString()+"$"+t._queryIdentifier}function sr(t,e){return t.tagToQueryMap.get(e)}function ar(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function ur(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),Fn(r,n,un(t.pendingWriteTree_,e),null)}function cr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(o.d)(Mn,"Reference.ts has not been loaded"),Mn)(t._repo,t._path):t}var lr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),hr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=vt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Jn(this.syncTree_,this.path_)},t}(),dr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?fr(t[".sv"],e,n):"object"==typeof t[".sv"]?pr(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},fr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},pr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},gr=function(t,e,n,r){return mr(e,new hr(n,t),r)},yr=function(t,e,n){return mr(t,new lr(e),n)};function mr(t,e,n){var r,i=t.getPriority().val(),o=dr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=dr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new $t(a,ie(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new $t(o))),u.forEachChild(Yt,function(t,i){var o=mr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var vr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function br(t,e){for(var n=e instanceof lt?e:new lt(e),r=t,i=dt(n);null!==i;){var s=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new vr(i,r,s),i=dt(n=pt(n))}return r}function _r(t){return t.node.value}function wr(t,e){t.node.value=e,Tr(t)}function Cr(t){return t.node.childCount>0}function Or(t,e){R(t.node.children,function(n,r){e(new vr(n,t,r))})}function Er(t,e,n,r){n&&!r&&e(t),Or(t,function(t){Er(t,e,!0,r)}),n&&r&&e(t)}function Sr(t){return new lt(null===t.parent?t.name:Sr(t.parent)+"/"+t.name)}function Tr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===_r(t)&&!Cr(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Tr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Tr(t))}(t.parent,t.name,t)}var Ir=/[\[\].#$\/\u0000-\u001F\u007F]/,Ar=/[\[\].#$\u0000-\u001F\u007F]/,xr=10485760,Nr=function(t){return"string"==typeof t&&0!==t.length&&!Ir.test(t)},jr=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},kr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Rr=function(t,e,n,r){r&&void 0===e||Pr(Object(o.l)(t,"value"),e,n)},Pr=function(t,e,n){var r=n instanceof lt?new Et(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Tt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Tt(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+Tt(r));if("string"==typeof e&&e.length>xr/3&&Object(o.E)(e)>xr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Tt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Nr(e)))throw new Error(t+" contains an invalid key ("+e+") "+Tt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o.E)(e),St(t)}(r,e),Pr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(o.E)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+Tt(r)+" in addition to actual children.")}},Dr=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o.l)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];R(e,function(t,e){var r=new lt(t);if(Pr(i,e,vt(n,r)),".priority"===gt(r)&&!kr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=yt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Nr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(wt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ot(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Mr=function(t,e,n){if(!n||void 0!==e){if(S(e))throw new Error(Object(o.l)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!kr(e))throw new Error(Object(o.l)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Fr=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error(Object(o.l)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||jr(n)))throw new Error(Object(o.l)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ur=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},qr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Nr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jr(t)}(n))throw new Error(Object(o.l)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Hr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e)+"must be a boolean.")},Br=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function zr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ct(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Wr(t,e,n){zr(t,n),Kr(t,function(t){return Ct(t,e)})}function Gr(t,e,n){zr(t,n),Kr(t,function(t){return Ot(t,e)||Ot(e,t)})}function Kr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();m&&_("event: "+n.toString()),L(r)}}}var $r="repo_interrupt",Yr=function(){function t(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Br,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ae(),this.transactionQueueTree_=new vr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Xr(t){var e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Zr(t){return(e=(e={timestamp:Xr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Jr(t,e,n,r,i){t.dataUpdateCount++;var s=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.B)(n,function(t){return ie(t)});a=function(t,e,n,r){var i=sr(t,r);if(i){var o=ar(i),s=o.path,a=o.queryId,u=_t(s,e),c=$e.fromObject(n);return ur(t,s,new Ue(De(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ie(n);a=function(t,e,n,r){var i=sr(t,r);if(null!=i){var o=ar(i),s=o.path,a=o.queryId,u=_t(s,e);return ur(t,s,new Ve(De(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.B)(n,function(t){return ie(t)});a=function(t,e,n){var r=$e.fromObject(n);return tr(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ie(n);a=Yn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=di(t,s)),Gr(t.eventQueue_,d,a)}function ti(t,e){ei(t,"connected",e),!1===e&&function(t){ui(t,"onDisconnectEvents");var e=Zr(t),n=Ae();je(t.onDisconnect_,ht(),function(r,i){var o=gr(r,i,t.serverSyncTree_,e);xe(n,r,o)});var r=[];je(n,ht(),function(e,n){r=r.concat(Yn(t.serverSyncTree_,e,n));var i=mi(t,e);di(t,i)}),t.onDisconnect_=Ae(),Gr(t.eventQueue_,ht(),r)}(t)}function ei(t,e,n){var r=new lt("/.info/"+e),i=ie(n);t.infoData_.updateSnapshot(r,i);var o=Yn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ni(t){return t.nextWriteId_++}function ri(t,e,n,r,i){ui(t,"set",{path:e.toString(),value:n,priority:r});var o=Zr(t),s=ie(n,r),a=Jn(t.serverSyncTree_,e),u=yr(s,a,o),c=ni(t),l=Qn(t.serverSyncTree_,e,u,c,!0);zr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,c,!o);Gr(t.eventQueue_,e,s),ci(0,i,n,r)});var h=mi(t,e);di(t,h),Gr(t.eventQueue_,h,[])}function ii(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ne(t.onDisconnect_,e),ci(0,n,r,i)})}function oi(t,e,n,r){var i=ie(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&xe(t.onDisconnect_,e,i),ci(0,r,n,o)})}function si(t,e,n){var r;r=".info"===dt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}function ai(t){t.persistentConnection_&&t.persistentConnection_.interrupt($r)}function ui(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.f)([r],Object(s.e)(e)))}function ci(t,e,n,r){e&&L(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function li(t,e,n){return Jn(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function hi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||yi(t,e),_r(e)){var n=pi(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=li(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=_t(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ui(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat($n(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(yi(t,br(t.transactionQueueTree_,e)),hi(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)L(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(E("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;di(t,e)}},a)}(t,Sr(e),n)}else Cr(e)&&Or(e,function(e){hi(t,e)})}function di(t,e){var n=fi(t,e),r=Sr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=_t(n,c.path),h=!1;if(Object(o.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0));else{var d=li(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Pr("transaction failed: Data returned ",f,c.path);var p=ie(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,y=Zr(t),m=yr(p,d,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ni(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Qn(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat($n(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat($n(t.serverSyncTree_,c.currentWriteId,!0))}Gr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(yi(t,t.transactionQueueTree_),u=0;u<r.length;u++)L(r[u]);hi(t,t.transactionQueueTree_)}}(t,pi(t,n),r),r}function fi(t,e){var n,r=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===_r(r);)r=br(r,n),n=dt(e=pt(e));return r}function pi(t,e){var n=[];return gi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function gi(t,e,n){var r=_r(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Or(e,function(e){gi(t,e,n)})}function yi(t,e){var n=_r(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,wr(e,n.length>0?n:void 0)}Or(e,function(e){yi(t,e)})}function mi(t,e){var n=Sr(fi(t,e)),r=br(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){vi(t,e)}),vi(t,r),Er(r,function(e){vi(t,e)}),n}function vi(t,e){var n=_r(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat($n(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?wr(e,void 0):n.length=s+1,Gr(t.eventQueue_,Sr(e),i),a=0;a<r.length;a++)L(r[a])}}var bi=function(t,e){var n=_i(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new lt(n.pathString)}},_i=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},wi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Ci=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Oi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o.d)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ei=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.a;return ii(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Ur("OnDisconnect.remove",this._path);var t=new o.a;return oi(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Ur("OnDisconnect.set",this._path),Rr("OnDisconnect.set",t,this._path,!1);var e=new o.a;return oi(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Ur("OnDisconnect.setWithPriority",this._path),Rr("OnDisconnect.setWithPriority",t,this._path,!1),Mr("OnDisconnect.setWithPriority",e,!1);var n=new o.a;return function(t,e,n,r,i){var o=ie(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&xe(t.onDisconnect_,e,o),ci(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Ur("OnDisconnect.update",this._path),Dr("OnDisconnect.update",t,this._path,!1);var e=new o.a;return function(t,e,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void ci(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&R(n,function(n,r){var i=ie(r);xe(t.onDisconnect_,vt(e,n),i)}),ci(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Si=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return bt(this._path)?null:gt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new xi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Se(this._queryParams),e=j(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Se(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(o.m)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ct(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ti(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ii(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Dt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Yt){if(null!=e&&!kr(e)||null!=n&&!kr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof ae||t.getIndex()===ue,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ai(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var xi=function(t){function e(e,n){return t.call(this,e,n,new _e,!1)||this}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=mt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Si),Ni=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new lt(e),r=Ri(this.ref,e);return new t(this._node.getChild(n),r,Yt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ri(n.ref,r),Yt))})},t.prototype.hasChild=function(t){var e=new lt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function ji(t,e){return(t=Object(o.m)(t))._checkNotDeleted("ref"),void 0!==e?Ri(t._root,e):t._root}function ki(t,e){(t=Object(o.m)(t))._checkNotDeleted("refFromURL");var n=bi(e,t._repo.repoInfo_.nodeAdmin);qr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||O("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),ji(t,n.path.toString())}function Ri(t,e){var n;return null===dt((t=Object(o.m)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new xi(t._repo,vt(t._path,e))}function Pi(t,e){t=Object(o.m)(t),Ur("push",t._path),Rr("push",e,t._path,!0);var n,r=Xr(t._repo),i=le(r),s=Ri(t,i),a=Ri(t,i);return n=null!=e?Mi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Di(t){return Ur("remove",t._path),Mi(t,null)}function Mi(t,e){t=Object(o.m)(t),Ur("set",t._path),Rr("set",e,t._path,!1);var n=new o.a;return ri(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Li(t,e){t=Object(o.m)(t),Ur("setPriority",t._path),Mr("setPriority",e,!1);var n=new o.a;return ri(t._repo,vt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e,n){if(Ur("setWithPriority",t._path),Rr("setWithPriority",e,t._path,!1),Mr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.a;return ri(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Dr("update",e,t._path,!1);var n=new o.a;return function(t,e,n,r){ui(t,"update",{path:e.toString(),value:n});var i=!0,s=Zr(t),a={};if(R(n,function(n,r){i=!1,a[n]=gr(vt(e,n),ie(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),ci(0,r,"ok",void 0);else{var u=ni(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=$e.fromObject(n);return tr(t,new Ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);zr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var s=$n(t.serverSyncTree_,u,!o),a=s.length>0?di(t,e):e;Gr(t.eventQueue_,a,s),ci(0,r,n,i)}),R(n,function(n){var r=mi(t,vt(e,n));di(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Ui=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new wi("value",this,new Ni(t.snapshotNode,new xi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),qi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ci(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=Ri(new xi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new wi(t.type,this,new Ni(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Hi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){s(e,n),si(t._repo,t,c)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Oi(n,o||void 0),c="value"===e?new Ui(u):new qi(e,u);return function(t,e,n){var r;r=".info"===dt(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Wr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return si(t._repo,t,c)}}function Bi(t,e,n,r){return Hi(t,"value",e,n,r)}function zi(t,e,n,r){return Hi(t,"child_added",e,n,r)}function Wi(t,e,n,r){return Hi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return Hi(t,"child_moved",e,n,r)}function Ki(t,e,n,r){return Hi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Oi(n):null;"value"===e?r=new Ui(i):e&&(r=new qi(e,i)),si(t._repo,t,r)}var $i=function(){return function(){}}(),Yi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Rr("endAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(Ai(e),Ii(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(t._repo,t._path,e,t._orderByCalled)},e}($i);function Xi(t,e){return Fr("endAt","key",e,!0),new Yi(t,e)}var Zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Rr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Dt?("string"==typeof n&&(n=de(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?T:de(r)),i.endBeforeSet_=!0,i);if(Ai(o),Ii(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(t._repo,t._path,o,t._orderByCalled)},e}($i);function Ji(t,e){return Fr("endBefore","key",e,!0),new Zi(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Rr("startAt",this._value,t._path,!0);var e=we(t._queryParams,this._value,this._key);if(Ai(e),Ii(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Si(t._repo,t._path,e,t._orderByCalled)},e}($i);function eo(t,e){return void 0===t&&(t=null),Fr("startAt","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Rr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Dt?("string"==typeof n&&(n=he(n)),i=we(e,n,r)):i=we(e,n,null==r?I:he(r)),i.startAfterSet_=!0,i);if(Ai(o),Ii(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Si(t._repo,t._path,o,t._orderByCalled)},e}($i);function ro(t,e){return Fr("startAfter","key",e,!0),new no(t,e)}var io=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}($i);function oo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new io(t)}var so=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}($i);function ao(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new so(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){Ti(t,"orderByChild");var e=new lt(this._path);if(bt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ae(e),r=Oe(t._queryParams,n);return Ii(r),new Si(t._repo,t._path,r,!0)},e}($i);function co(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new uo(t)}var lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){Ti(t,"orderByKey");var e=Oe(t._queryParams,Dt);return Ii(e),new Si(t._repo,t._path,e,!0)},e}($i);function ho(){return new lo}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){Ti(t,"orderByPriority");var e=Oe(t._queryParams,Yt);return Ii(e),new Si(t._repo,t._path,e,!0)},e}($i);function po(){return new fo}var go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){Ti(t,"orderByValue");var e=Oe(t._queryParams,ue);return Ii(e),new Si(t._repo,t._path,e,!0)},e}($i);function yo(){return new go}var mo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){if(Rr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yi(this._value,this._key)._apply(new to(this._value,this._key)._apply(t))},e}($i);function vo(t,e){return Fr("equalTo","key",e,!0),new mo(t,e)}function bo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=Object(o.m)(t);try{for(var u=Object(s.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(o.d)(!xn,"__referenceConstructor has already been defined"),xn=t}(xi),function(t){Object(o.d)(!Mn,"__referenceConstructor has already been defined"),Mn=t}(xi);var _o={},wo=!1;function Co(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=bi(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=bi(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new U:new V(t.name,t.options,e);qr("Invalid Firebase Database URL",s),bt(s.path)||O("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(t,e,n){var r=_o[e.name];r||(_o[e.name]=r={});var i=r[t.toURLString()];return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Yr(t,wo,n),r[t.toURLString()]=i,i}(a,t,c);return new Oo(l,t)}var Oo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=$(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Te(t.repoInfo_,function(e,n,r,i){Jr(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return ti(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new jt(t.repoInfo_,e,function(e,n,r,i){Jr(t,e,n,r,i)},function(e){ti(t,e)},function(e){!function(t,e){R(e,function(e,n){ei(t,e,n)})}(t,e)},t.authTokenProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},i=t.repoInfo_.toString(),Q[i]||(Q[i]=r()),Q[i]),t.infoData_=new Ie,t.infoSyncTree_=new Kn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Yn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ei(t,"connected",!1),t.serverSyncTree_=new Kn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new xi(this._repo,ht())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=_o[e=this.app.name])&&n[t.key]===t||O("Database "+e+"("+t.repoInfo_+") has already been deleted."),ai(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&O("Cannot call "+t+" on a deleted database.")},t}();function Eo(t){(t=Object(o.m)(t))._checkNotDeleted("goOffline"),ai(t._repo)}function So(t){var e;(t=Object(o.m)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume($r)}function To(t,e){b(t,e)}var Io={".sv":"timestamp"},Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function xo(t,e,n){var r;if(t=Object(o.m)(t),Ur("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.a,a=Bi(t,function(){});return function(e,n,r,i,a,u){ui(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ni(r,new xi(t._repo,t._path),Yt),s.resolve(new Ao(n,i)))},status:null,order:p(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=li(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Pr("transaction failed: Data returned ",h,c.path),c.status=0;var d=br(e.transactionQueueTree_,n),f=_r(d)||[];f.push(c),wr(d,f);var g=void 0;"object"==typeof h&&null!==h&&Object(o.h)(h,".priority")?(g=Object(o.D)(h,".priority"),Object(o.d)(kr(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(Jn(e.serverSyncTree_,n)||ne.EMPTY_NODE).getPriority().val();var y=Zr(e),m=ie(h,g),v=yr(m,l,y);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=v,c.currentWriteId=ni(e);var b=Qn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Gr(e.eventQueue_,n,b),hi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var No=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),Object(o.I)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),Object(o.I)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o.I)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o.I)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),jo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ko=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),new Po(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ro=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;Object(o.H)("Query.on",2,4,arguments.length),Object(o.I)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new ko(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Bi(this._delegate,c,l),n;case"child_added":return zi(this._delegate,c,l),n;case"child_removed":return Ki(this._delegate,c,l),n;case"child_changed":return Wi(this._delegate,c,l),n;case"child_moved":return Gi(this._delegate,c,l),n;default:throw new Error(Object(o.l)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o.H)("Query.off",0,3,arguments.length),Lr("Query.off",t,!0),Object(o.I)("Query.off","callback",e,!0),Object(o.J)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=_t(t,n);r=r||qn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||qn(i,ht()):(i=new Ln,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new qe(r,!0,!1):null;return Ke(Vn(i,e,un(t.pendingWriteTree_,e._path),o?s.getNode():ne.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=ie(n),i=Yn(t.serverSyncTree_,e._path,r);return Wr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ui(t,"get for query "+Object(o.G)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(o.m)(t))._repo,t).then(function(e){return new Ni(e,new xi(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new ko(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Object(o.I)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.on",r,i),u=new o.a,c=function(t,e){var r=new ko(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Bi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o.l)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o.H)("Query.limitToFirst",1,1,arguments.length),new t(this.database,bo(this._delegate,oo(e)))},t.prototype.limitToLast=function(e){return Object(o.H)("Query.limitToLast",1,1,arguments.length),new t(this.database,bo(this._delegate,ao(e)))},t.prototype.orderByChild=function(e){return Object(o.H)("Query.orderByChild",1,1,arguments.length),new t(this.database,bo(this._delegate,co(e)))},t.prototype.orderByKey=function(){return Object(o.H)("Query.orderByKey",0,0,arguments.length),new t(this.database,bo(this._delegate,ho()))},t.prototype.orderByPriority=function(){return Object(o.H)("Query.orderByPriority",0,0,arguments.length),new t(this.database,bo(this._delegate,po()))},t.prototype.orderByValue=function(){return Object(o.H)("Query.orderByValue",0,0,arguments.length),new t(this.database,bo(this._delegate,yo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),new t(this.database,bo(this._delegate,eo(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),new t(this.database,bo(this._delegate,ro(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),new t(this.database,bo(this._delegate,Xi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),new t(this.database,bo(this._delegate,Ji(e,n)))},t.prototype.equalTo=function(e,n){return Object(o.H)("Query.equalTo",1,2,arguments.length),new t(this.database,bo(this._delegate,vo(e,n)))},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o.I)(t,"cancel",r.cancel,!0),r.context=n,Object(o.J)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Po(this.database,new xi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Po=function(t){function e(e,n){var r=t.call(this,e,new Si(n._repo,n._path,new _e,!1))||this;return r.database=e,r._delegate=n,r}return Object(s.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ri(this._delegate,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o.H)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),Object(o.I)("Reference.set","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ur("Reference.update",this._delegate._path),Object(o.I)("Reference.update","onComplete",e,!0);var i=Vi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){Object(o.H)("Reference.setWithPriority",2,3,arguments.length),Object(o.I)("Reference.setWithPriority","onComplete",n,!0);var r=Fi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(o.H)("Reference.remove",0,1,arguments.length),Object(o.I)("Reference.remove","onComplete",t,!0);var e=Di(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o.H)("Reference.transaction",1,3,arguments.length),Object(o.I)("Reference.transaction","transactionUpdate",t,!1),Object(o.I)("Reference.transaction","onComplete",e,!0),Hr("Reference.transaction","applyLocally",n,!0);var i=xo(this._delegate,t,{applyLocally:n}).then(function(t){return new jo(t.committed,new ko(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),Object(o.I)("Reference.setPriority","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(o.H)("Reference.push",0,2,arguments.length),Object(o.I)("Reference.push","onComplete",n,!0);var i=Pi(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Ur("Reference.onDisconnect",this._delegate._path),new No(new Ei(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ro),Do=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e){!function(t,e,n){(t=Object(o.m)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&O("Cannot call useEmulator() after instance has already been initialized."),function(t,e,n){t.repoInfo_=new z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new U)}(t._repoInternal,e,n)}(this._delegate,t,e)},t.prototype.ref=function(t){if(Object(o.H)("database.ref",0,1,arguments.length),t instanceof Po){var e=ki(this._delegate,t.toString());return new Po(this,e)}return e=ji(this._delegate,t),new Po(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o.H)(e,1,1,arguments.length);var n=ki(this._delegate,t);return new Po(this,n)},t.prototype.goOffline=function(){return Object(o.H)("database.goOffline",0,0,arguments.length),Eo(this._delegate)},t.prototype.goOnline=function(){return Object(o.H)("database.goOnline",0,0,arguments.length),So(this._delegate)},t.ServerValue={TIMESTAMP:Io,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Mo=Object.freeze({__proto__:null,forceLongPolling:function(){it.forceDisallow(),J.forceAllow()},forceWebSockets:function(){J.forceDisallow()},isWebSocketsAvailable:function(){return it.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new ke(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);R(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;nt(t.version);var u=new i.c("auth-internal",new i.b("database-standalone"));return u.setComponent(new i.a("auth-internal",function(){return r},"PRIVATE")),{instance:new Do(Co(e,u,n,a),e),namespace:o}}}),Lo=jt;jt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},jt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Fo=Object.freeze({__proto__:null,DataConnection:Lo,RealTimeConnection:st,hijackHash:function(t){var e=jt.prototype.put;return jt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){jt.prototype.put=e}},ConnectionTarget:z,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){wo=t}(t)}}),Vo=Do.ServerValue;!function(e){nt(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Do(Co(r,i,n),r)},"PUBLIC").setServiceProps({Reference:Po,Query:Ro,Database:Do,DataSnapshot:ko,enableLogging:To,INTERNAL:Mo,ServerValue:Vo,TEST_ACCESS:Fo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.12"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.4.3","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return tn}),n.d(e,"b",function(){return $a}),n.d(e,"c",function(){return za}),n.d(e,"d",function(){return Ha}),n.d(e,"e",function(){return Ba}),n.d(e,"f",function(){return Hu}),n.d(e,"g",function(){return ku}),n.d(e,"h",function(){return Ys}),n.d(e,"i",function(){return su}),n.d(e,"j",function(){return _s}),n.d(e,"k",function(){return Za}),n.d(e,"l",function(){return Es}),n.d(e,"m",function(){return fr}),n.d(e,"n",function(){return Sa}),n.d(e,"o",function(){return $i}),n.d(e,"p",function(){return _n}),n.d(e,"q",function(){return x}),n.d(e,"r",function(){return Je}),n.d(e,"s",function(){return ho}),n.d(e,"t",function(){return Bs}),n.d(e,"u",function(){return Ws}),n.d(e,"v",function(){return Xa}),n.d(e,"w",function(){return aa}),n.d(e,"x",function(){return Pu}),n.d(e,"y",function(){return sa}),n.d(e,"z",function(){return Iu}),n.d(e,"A",function(){return cu}),n.d(e,"B",function(){return wn}),n.d(e,"C",function(){return Qa}),n.d(e,"D",function(){return Ka}),n.d(e,"E",function(){return Is}),n.d(e,"F",function(){return Ts}),n.d(e,"G",function(){return mr}),n.d(e,"H",function(){return xs}),n.d(e,"I",function(){return ur}),n.d(e,"J",function(){return Cn}),n.d(e,"K",function(){return Lu}),n.d(e,"L",function(){return na}),n.d(e,"M",function(){return yu}),n.d(e,"N",function(){return en}),n.d(e,"O",function(){return js}),n.d(e,"P",function(){return Ns}),n.d(e,"Q",function(){return ca}),n.d(e,"R",function(){return D}),n.d(e,"S",function(){return Au}),n.d(e,"T",function(){return Su}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return Eu}),n.d(e,"W",function(){return Uu}),n.d(e,"X",function(){return bu}),n.d(e,"Y",function(){return Ya}),n.d(e,"Z",function(){return Xi}),n.d(e,"ab",function(){return ss}),n.d(e,"bb",function(){return sr}),n.d(e,"cb",function(){return Bn}),n.d(e,"db",function(){return kn}),n.d(e,"eb",function(){return Pn}),n.d(e,"fb",function(){return Fn}),n.d(e,"gb",function(){return Mn}),n.d(e,"hb",function(){return Dn}),n.d(e,"ib",function(){return Ln}),n.d(e,"jb",function(){return ns}),n.d(e,"kb",function(){return Vu}),n.d(e,"lb",function(){return rs}),n.d(e,"mb",function(){return is}),n.d(e,"nb",function(){return Rn}),n.d(e,"ob",function(){return U}),n.d(e,"pb",function(){return wo}),n.d(e,"qb",function(){return Do}),n.d(e,"rb",function(){return Ro}),n.d(e,"sb",function(){return Po}),n.d(e,"tb",function(){return es}),n.d(e,"ub",function(){return St}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return jn}),n.d(e,"xb",function(){return po}),n.d(e,"yb",function(){return bt}),n.d(e,"zb",function(){return ms}),n.d(e,"Ab",function(){return ti}),n.d(e,"Bb",function(){return Eo}),n.d(e,"Cb",function(){return Ho}),n.d(e,"Db",function(){return Fa}),n.d(e,"Eb",function(){return Z}),n.d(e,"Fb",function(){return ot}),n.d(e,"Gb",function(){return _}),n.d(e,"Hb",function(){return w}),n.d(e,"Ib",function(){return nt}),n.d(e,"Jb",function(){return st}),n.d(e,"Kb",function(){return To}),n.d(e,"Lb",function(){return jo}),n.d(e,"Mb",function(){return No}),n.d(e,"Nb",function(){return xo}),n.d(e,"Ob",function(){return ko}),n.d(e,"Pb",function(){return Qe}),n.d(e,"Qb",function(){return Xo}),n.d(e,"Rb",function(){return mn}),n.d(e,"Sb",function(){return Ye}),n.d(e,"Tb",function(){return qa}),n.d(e,"Ub",function(){return Mo}),n.d(e,"Vb",function(){return Va}),n.d(e,"Wb",function(){return Vo}),n.d(e,"Xb",function(){return Io}),n.d(e,"Yb",function(){return La}),n.d(e,"Zb",function(){return Bt}),n.d(e,"ac",function(){return cr}),n.d(e,"bc",function(){return rt}),n.d(e,"cc",function(){return So}),n.d(e,"dc",function(){return Ko}),n.d(e,"ec",function(){return Qo}),n.d(e,"fc",function(){return Yo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function m(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():m(t)}function b(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${v(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return O(t,S)||O(t,I)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(A))?t[T]:null}const S=u({"\u0275prov":u}),T=u({"\u0275inj":u}),I=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var x=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let N;function j(t){const e=N;return N=t,e}function k(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&x.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),D=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const M="undefined"!=typeof globalThis&&globalThis,L="undefined"!=typeof window&&window,F="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,U=M||V||L||F,q={},H=[],B=[],z=u({"\u0275cmp":u}),W=u({"\u0275dir":u}),G=u({"\u0275pipe":u}),K=u({"\u0275mod":u}),Q=u({"\u0275loc":u}),$=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let X=0;function Z(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||D.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function J(t){return at(t)||function(t){return t[W]||null}(t)}function tt(t){return function(t){return t[G]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{et[t.id]=t.type}),e}function rt(t,e){return R(()=>{const n=ut(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function it(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=Z;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[z]||null}function ut(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty($)?t[$]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function bt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),wt}function wt(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===q),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}let Et;function St(t){Et=t}function Tt(t){return!!t.listen}bt.ngInherit=!0;const It={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function At(t){for(;Array.isArray(t);)t=t[0];return t}function xt(t,e){return At(e[t])}function Nt(t,e){return At(e[t.index])}function jt(t,e){return t.data[e]}function kt(t,e){const n=e[t];return ht(n)?n:n[0]}function Rt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Pt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Mt(t,e){return null==e?null:t[e]}function Lt(t){t[18]=0}function Ft(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Vt={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Vt.bindingsEnabled}function qt(){return Vt.lFrame.lView}function Ht(){return Vt.lFrame.tView}function Bt(t){Vt.lFrame.contextLView=t}function zt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return Vt.lFrame.currentTNode}function Gt(t,e){const n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return Vt.lFrame.isParent}function Qt(){return Vt.isInCheckNoChangesMode}function $t(t){Vt.isInCheckNoChangesMode=t}function Yt(){return Vt.lFrame.bindingIndex++}function Xt(t){const e=Vt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Zt(t,e){const n=Vt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jt(e)}function Jt(t){Vt.lFrame.currentDirectiveIndex=t}function te(){return Vt.lFrame.currentQueryIndex}function ee(t){Vt.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&x.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&x.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Vt.lFrame=oe();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=oe(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=Vt.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return Vt.lFrame.selectedIndex}function he(t){Vt.lFrame.selectedIndex=t}function de(){const t=Vt.lFrame;return jt(t.tView,t.selectedIndex)}function fe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){me(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&me(t,e,n,r)}function ye(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function me(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ve(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ve(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const be=-1;class _e{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function we(t,e,n){const r=Tt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Oe(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ce(t){return 3===t||4===t||6===t}function Oe(t){return 64===t.charCodeAt(0)}function Ee(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Se(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Se(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Te(t){return t!==be}function Ie(t){return 32767&t}function Ae(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let xe=!0;function Ne(t){const e=xe;return xe=t,e}let je=0;function ke(t,e){const n=Pe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Re(r.data,t),Re(e,null),Re(r.blueprint,null));const i=De(t,e),o=t.injectorIndex;if(Te(i)){const t=Ie(i),n=Ae(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Re(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function De(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return be;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return be}function Me(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=je++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Le(t,e,n){if(n&x.Optional)return t;b(e,"NodeInjector")}function Fe(t,e,n,r){if(n&x.Optional&&void 0===r&&(r=null),0==(n&(x.Self|x.Host))){const i=t[9],o=j(void 0);try{return i?i.get(e,r,n&x.Optional):k(e,r,n&x.Optional)}finally{j(o)}}return Le(r,e,n)}function Ve(t,e,n,r=x.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof o){if(!re(e,t,r))return r&x.Host?Le(i,n,r):Fe(e,n,r,i);try{const t=o();if(null!=t||r&x.Optional)return t;b(n)}finally{ue()}}else if("number"==typeof o){let i=null,s=Pe(t,e),a=be,u=r&x.Host?e[16][6]:null;for((-1===s||r&x.SkipSelf)&&(a=-1===s?De(t,e):e[s+8],a!==be&&Ge(r,!1)?(i=e[1],s=Ie(a),e=Ae(a,e)):s=-1);-1!==s;){const t=e[1];if(We(o,s,t.data)){const t=He(s,e,n,i,r,u);if(t!==Ue)return t}a=e[s+8],a!==be&&Ge(r,e[1].data[s+8]===u)&&We(o,s,e)?(i=t,s=Ie(a),e=Ae(a,e)):s=-1}}}return Fe(e,n,r,i)}const Ue={};function qe(){return new Ke(zt(),qt())}function He(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Be(a,s,n,null==r?pt(a)&&xe:r!=s&&0!=(3&a.type),i&x.Host&&o===a);return null!==u?ze(e,s,u,a):Ue}function Be(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&yt(t)&&t.type===n)return u}return null}function ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof _e){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ne(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?j(s.injectImpl):null;re(t,r,x.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&j(u),Ne(a),s.resolving=!1,ue()}}return i}function We(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ge(t,e){return!(t&x.Self||t&x.Host&&e)}class Ke{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ve(this._tNode,this._lView,t,void 0,e)}}function Qe(t){return R(()=>{const e=t.prototype.constructor,n=e[$]||$e(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||$e(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function $e(t){return g(t)?()=>{const e=$e(p(t));return e&&e()}:mt(t)}function Ye(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ce(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(zt(),t)}const Xe="__parameters__";function Ze(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Xe)?t[Xe]:Object.defineProperty(t,Xe,{value:[]})[Xe];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Je{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tn=new Je("AnalyzeForEntryComponents"),en=Function;function nn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),nn(r,e)):e!==t&&e.push(r)}return e}function rn(t,e){t.forEach(t=>Array.isArray(t)?rn(t,e):e(t))}function on(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function an(t,e,n){let r=cn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function un(t,e){const n=cn(t,e);if(n>=0)return t[1|n]}function cn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ln={},hn=/\n/gm,dn="__source",fn=u({provide:String,useValue:u});let pn;function gn(t){const e=pn;return pn=t,e}function yn(t,e=x.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?k(t,void 0,e):pn.get(t,e&x.Optional?null:void 0,e)}function mn(t,e=x.Default){return(N||yn)(p(t),e)}function vn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=x.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(mn(t,n))}else e.push(mn(r))}return e}function bn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const _n=bn(Ze("Inject",t=>({token:t})),-1),wn=bn(Ze("Optional"),8),Cn=bn(Ze("SkipSelf"),4);let On;function En(t){var e;return(null===(e=function(){if(void 0===On&&(On=null,U.trustedTypes))try{On=U.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return On}())||void 0===e?void 0:e.createHTML(t))||t}class Sn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Tn extends Sn{getTypeName(){return"HTML"}}class In extends Sn{getTypeName(){return"Style"}}class An extends Sn{getTypeName(){return"Script"}}class xn extends Sn{getTypeName(){return"URL"}}class Nn extends Sn{getTypeName(){return"ResourceURL"}}function jn(t){return t instanceof Sn?t.changingThisBreaksApplicationSecurity:t}function kn(t,e){const n=Rn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Rn(t){return t instanceof Sn&&t.getTypeName()||null}function Pn(t){return new Tn(t)}function Dn(t){return new In(t)}function Mn(t){return new An(t)}function Ln(t){return new xn(t)}function Fn(t){return new Nn(t)}class Vn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(En(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Un{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=En(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=En(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const qn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bn(t){return(t=String(t)).match(qn)||t.match(Hn)?t:"unsafe:"+t}function zn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Wn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Gn=zn("area,br,col,hr,img,wbr"),Kn=zn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Qn=zn("rp,rt"),$n=Wn(Qn,Kn),Yn=Wn(Gn,Wn(Kn,zn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wn(Qn,zn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$n),Xn=zn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zn=zn("srcset"),Jn=Wn(Xn,Zn,zn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tr=zn("script,style,template");class er{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Yn.hasOwnProperty(e))return this.sanitizedSomething=!0,!tr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Jn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Xn[o]&&(s=Bn(s)),Zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Bn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ir(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Yn.hasOwnProperty(e)&&!Gn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ir(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const nr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rr=/([^\#-~ |!])/g;function ir(t){return t.replace(/&/g,"&amp;").replace(nr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(rr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let or;function sr(t,e){let n=null;try{or=or||function(t){const e=new Un(t);return function(){try{return!!(new window.DOMParser).parseFromString(En(""),"text/html")}catch(t){return!1}}()?new Vn(e):e}(t);let r=e?String(e):"";n=or.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=or.getInertBodyElement(r)}while(r!==o);return En((new er).sanitizeChildren(ar(n)||n))}finally{if(n){const t=ar(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function ar(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ur=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function cr(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(ur.URL,t)||"":kn(t,"URL")?jn(t):Bn(m(t))}function lr(t){return t.ngDebugContext}function hr(t){return t.ngOriginalError}function dr(t,...e){t.error(...e)}class fr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||dr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?lr(t)?lr(t):this._findContext(hr(t)):null}_findOriginalError(t){let e=hr(t);for(;e&&hr(e);)e=hr(e);return e}}function pr(t,e){t.__ngContext__=e}const gr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function yr(t){return t instanceof Function?t():t}var mr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function vr(t,e){return(void 0)(t,e)}function br(t){const e=t[3];return dt(e)?e[3]:e}function _r(t){return Cr(t[13])}function wr(t){return Cr(t[4])}function Cr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Or(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=At(r);0===t&&null!==n?null==i?Nr(e,n,a):xr(e,n,a,i||null,!0):1===t&&null!==n?xr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=kr(t,e);r&&function(t,e,n,r){Tt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==At(n)&&Or(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];Fr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Er(t,e,n){return Tt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Sr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ft(i,-1)),n.splice(r,1)}function Tr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Sr(o,r),e>0&&(t[n-1][4]=r[4]);const s=sn(t,lt+e);Fr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Ir(t,e){if(!(256&e[2])){const n=e[11];Tt(n)&&n.destroyNode&&Fr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ar(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Ar(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Ar(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ar(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof _e)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):At(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Tt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Sr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function xr(t,e,n,r,i){Tt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Nr(t,e,n){Tt(t)?t.appendChild(e,n):e.appendChild(n)}function jr(t,e,n,r,i){null!==r?xr(t,e,n,r,i):Nr(t,e,n)}function kr(t,e){return Tt(t)?t.parentNode(e):e.parentNode}function Rr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===D.None||e===D.Emulated)return null}return Nt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Nt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)jr(o,i,n[a],s,!1);else jr(o,i,n,s,!1)}function Pr(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return Mr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Pr(t,n);{const n=t[e.index];return dt(n)?Mr(-1,n):At(n)}}if(32&n)return vr(e,t)()||At(t[e.index]);{const n=Dr(t,e);return null!==n?Array.isArray(n)?n[0]:Pr(br(t[16]),n):Pr(t,e.next)}}return null}function Dr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Mr(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Pr(t,r)}return e[7]}function Lr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&pr(At(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Lr(t,e,n.child,r,i,o,!1),Or(e,t,i,a,o);else if(32&u){const s=vr(n,r);let u;for(;u=s();)Or(e,t,i,u,o);Or(e,t,i,a,o)}else 16&u?Vr(t,e,r,n,i,o):Or(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Fr(t,e,n,r,i,o){Lr(n,r,t.firstChild,e,i,o,!1)}function Vr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Or(e,t,i,a[u],o);else Lr(t,e,a,s[3],i,o,!0)}function Ur(t,e,n){Tt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function qr(t,e,n){Tt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Hr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Br="ng-template";function zr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Hr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Wr(t){return 4===t.type&&t.value!==Br}function Gr(t,e,n){return e===(4!==t.type||n?t.value:Br)}function Kr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ce(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Gr(t,u,n)||""===u&&1===e.length){if(Qr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!zr(t.attrs,c,n)){if(Qr(r))return!1;s=!0}continue}const l=$r(8&r?"class":u,i,Wr(t),n);if(-1===l){if(Qr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Hr(e,c,0)||2&r&&c!==t){if(Qr(r))return!1;s=!0}}}}else{if(!s&&!Qr(r)&&!Qr(u))return!1;if(s&&Qr(u))continue;s=!1,r=u|1&r}}return Qr(r)||s}function Qr(t){return 0==(1&t)}function $r(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Yr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Kr(t,e[r],n))return!0;return!1}function Xr(t,e){return t?":not("+e.trim()+")":e}function Zr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Qr(s)||(e+=Xr(o,i),i=""),r=s,o=o||!Qr(r);n++}return""!==i&&(e+=Xr(o,i)),e}const Jr={};function ti(t){ei(Ht(),qt(),le()+t,Qt())}function ei(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}he(n)}function ni(t,e){return t<<17|e<<2}function ri(t){return t>>17&32767}function ii(t){return 2|t}function oi(t){return(131068&t)>>2}function si(t,e){return-131069&t|e<<2}function ai(t){return 1|t}function ui(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ee(i),n.contentQueries(2,e[o],o)}}}function ci(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Lt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function li(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wt(),s=Kt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Vt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Vt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Gt(o,!0),o}function hi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function di(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&qi(1,r,n);const i=t.template;null!==i&&gi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&ui(t,e),t.staticViewQueries&&qi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Mi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function fi(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const o=Qt();try{Lt(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&gi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),ye(e,0)}if(function(t){for(let e=_r(t);null!==e;e=wr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ft(r,1),n[2]|=1024}}}(e),function(t){for(let e=_r(t);null!==e;e=wr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&fi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&ui(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),ye(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,o=n[++t],s=n[++t];Zt(o,i),s(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Pi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&qi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),ye(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ft(e[3],-1))}finally{ce()}}function pi(t,e,n,r){const i=e[10],o=!Qt(),s=Pt(e);try{o&&!s&&i.begin&&i.begin(),s&&di(t,e,r),fi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function gi(t,e,n,r,i){const o=le(),s=2&r;try{he(-1),s&&e.length>ct&&ei(t,e,ct,Qt()),n(r,i)}finally{he(o)}}function yi(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||ke(n,e),pr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=yt(r);o&&Ni(e,n,r);const u=ze(e,t,a,n);pr(u,e),null!==s&&ji(0,a-i,u,r,0,s),o&&(kt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Vt.lFrame.currentDirectiveIndex;try{he(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Jt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Si(r,i)}}finally{he(-1),Jt(s)}}(t,e,n))}function mi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function vi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=bi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function bi(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function _i(t,e,n,r){const i=Bi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&zi(t).push(r,i.length-1))}function wi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ci(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Gi(t,n,c,r,i),pt(e)&&function(t,e){const n=kt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Tt(o)?o.setProperty(u,r,i):Oe(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Oi(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Yr(n,s.selectors,!1)&&(i||(i=[]),Me(ke(n,e),t,s.type),yt(s)?(Ti(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ai(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=hi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ee(n.mergedAttrs,c.hostAttrs),xi(t,n,e,u,c),Ii(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Wr(e)?null:ki(n,i);o.push(c),s=wi(n,u,s),a=wi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ee(n.mergedAttrs,n.attrs),i}function Ei(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Si(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ti(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ii(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Ai(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new _e(o,yt(i),null);t.blueprint[r]=s,n[r]=s,Ei(t,e,0,r,hi(t,n,i.hostVars,Jr),i)}function Ni(t,e,n){const r=Nt(e,t),i=vi(n),o=t[10],s=Li(t,ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ji(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ki(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ri(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Pi(t,e){const n=kt(e,t);if(Dt(n)){const t=n[1];80&n[2]?fi(t,n,t.template,n[8]):n[5]>0&&Di(n)}}function Di(t){for(let n=_r(t);null!==n;n=wr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];fi(t,e,t.template,e[8])}else e[5]>0&&Di(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=kt(e[n],t);Dt(r)&&r[5]>0&&Di(r)}}function Mi(t,e){const n=kt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),di(r,n,n[8])}function Li(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Fi(t){for(;t;){t[2]|=64;const e=br(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Vi(t,e,n){const r=e[10];r.begin&&r.begin();try{fi(t,e,t.template,n)}catch(i){throw Wi(e,i),i}finally{r.end&&r.end()}}function Ui(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Rt(n),i=r[1];pi(i,r,i.template,n)}}(t[8])}function qi(t,e,n){ee(0),e(t,n)}const Hi=(()=>Promise.resolve(null))();function Bi(t){return t[7]||(t[7]=[])}function zi(t){return t.cleanup||(t.cleanup=[])}function Wi(t,e){const n=t[9],r=n?n.get(fr,null):null;r&&r.handleError(e)}function Gi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ki(t,e,n){const r=xt(e,t);!function(t,e,n){Tt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Qi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const $i=new Je("INJECTOR",-1);class Yi{get(t,e=ln){if(e===ln){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Xi=new Je("Set Injector scope."),Zi={},Ji={},to=[];let eo;function no(){return void 0===eo&&(eo=new Yi),eo}function ro(t,e=null,n=null,r){return new io(t,n,e||no(),r)}class io{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&rn(e,n=>this.processProvider(n,t,e)),rn([t],t=>this.processInjectorType(t,[],i)),this.records.set($i,ao(void 0,this));const o=this.records.get(Xi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ln,n=x.Default){this.assertNotDestroyed();const r=gn(this);try{if(!(n&x.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Je)&&C(t);e=n&&this.injectableDefInScope(n)?ao(oo(t),Zi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&x.Self?no():this.parent).get(t,e=n&x.Optional&&e===ln?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[dn]&&i.unshift(e[dn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(hn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{gn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{rn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];rn(r,t=>this.processProvider(t,n,r||to))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,ao(a,Zi));const u=r.providers;if(null!=u&&!s){const e=t;rn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=co(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return uo(t)?ao(void 0,t.useValue):ao(so(t),Zi)}(t);if(co(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=ao(void 0,Zi,!0),e.factory=()=>vn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Zi&&(e.value=Ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function oo(t){const e=C(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof Je)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[I]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function so(t,e,n){let r;if(co(t)){const e=p(t);return mt(e)||oo(e)}if(uo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...vn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>mn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||oo(e);r=()=>new e(...vn(t.deps))}var i;return r}function ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uo(t){return null!==t&&"object"==typeof t&&fn in t}function co(t){return"function"==typeof t}const lo=function(t,e,n){return function(t,e=null,n=null,r){const i=ro(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let ho=(()=>{class t{static create(t,e){return Array.isArray(t)?lo(t,e,""):lo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=ln,t.NULL=new Yi,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>mn($i)}),t.__NG_ELEMENT_ID__=-1,t})();function fo(t,e){fe(Rt(t)[1],zt())}function po(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=go(t.inputs),e.declaredInputs=go(t.declaredInputs),e.outputs=go(t.outputs);const n=i.hostBindings;n&&vo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&yo(t,o),s&&mo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===po&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ee(i.hostAttrs,n=Ee(n,i.hostAttrs))}}(r)}function go(t){return t===q?{}:t===B?[]:t}function yo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function mo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function vo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let bo=null;function _o(){if(!bo){const t=U.Symbol;if(t&&t.iterator)bo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(bo=n)}}}return bo}function wo(t){return!!Co(t)&&(Array.isArray(t)||!(t instanceof Map)&&_o()in t)}function Co(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Oo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Eo(t,e,n,r){const i=qt();return Oo(i,Yt(),e)&&(Ht(),function(t,e,n,r,i,o){const s=Nt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Tt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?m(o):s(o,r||"",i);Tt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(de(),i,t,e,n,r)),Eo}function So(t,e,n,r,i,o,s,a){const u=qt(),c=Ht(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=li(e,t,4,s||null,Mt(c,a));Oi(e,n,l,Mt(c,u)),fe(e,l);const h=l.tViews=bi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Gt(h,!1);const d=u[11].createComment("");Rr(c,u,d,h),pr(d,u),Li(u,u[l]=Ri(d,u,d,h)),gt(h)&&yi(c,u,h),null!=s&&mi(u,h,a)}function To(t,e=x.Default){const n=qt();return null===n?mn(t,e):Ve(zt(),n,p(t),e)}function Io(t,e,n){const r=qt();return Oo(r,Yt(),e)&&Ci(Ht(),de(),r,t,e,r[11],n,!1),Io}function Ao(t,e,n,r,i){const o=i?"class":"style";Gi(t,n,e.inputs[o],o,r)}function xo(t,e,n,r){const i=qt(),o=Ht(),s=ct+t,a=i[11],u=i[s]=Er(a,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=li(e,t,2,i,Mt(a,o));return Oi(e,n,u,Mt(a,s)),null!==u.attrs&&Qi(u,u.attrs,!1),null!==u.mergedAttrs&&Qi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Gt(c,!0);const l=c.mergedAttrs;null!==l&&we(a,u,l);const h=c.classes;null!==h&&qr(a,u,h);const d=c.styles;null!==d&&Ur(a,u,d),64!=(64&c.flags)&&Rr(o,i,u,c),0===Vt.lFrame.elementDepthCount&&pr(u,i),Vt.lFrame.elementDepthCount++,gt(c)&&(yi(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&mi(i,c)}function No(){let t=zt();Kt()?Vt.lFrame.isParent=!1:(t=t.parent,Gt(t,!1));const e=t;Vt.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(fe(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ao(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ao(n,e,qt(),e.stylesWithoutHost,!1)}function jo(t,e,n,r){xo(t,e,n,r),No()}function ko(){return qt()}function Ro(t){return!!t&&"function"==typeof t.then}function Po(t){return!!t&&"function"==typeof t.subscribe}const Do=Po;function Mo(t,e,n=!1,r){const i=qt(),o=Ht(),s=zt();return function(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&zi(t),l=Bi(e);let h=!0;if(3&r.type){const d=Nt(r,e),f=a?a(d):q,p=f.target||d,g=l.length,y=a?t=>a(At(t[r.index])).target:r.index;if(Tt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Fo(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Fo(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=Fo(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Mo}function Lo(t,e,n,r){try{return!1!==n(r)}catch(i){return Wi(t,i),!1}}function Fo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?kt(t.index,e):e;0==(32&e[2])&&Fi(s);let a=Lo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Lo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Vo(t=1){return function(t){return(Vt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Vt.lFrame.contextLView))[8]}(t)}function Uo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ri(o):oi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];qo(t[a],e)&&(u=!0,t[a+1]=r?ai(n):ii(n)),a=r?ri(n):oi(n)}u&&(t[n+1]=r?ii(o):ai(o))}function qo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&cn(t,e)>=0}function Ho(t,e){return function(t,e,n,r){const i=qt(),o=Ht(),s=Xt(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[le()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Vt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=zo(n=Bo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Bo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==oi(r))return t[ri(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Bo(null,t,e,n[1],r),n=zo(n,e.attrs,r),function(t,e,n,r){t[ri(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=zo(r,t[o].hostAttrs,true);return zo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ri(s),u=oi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||cn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ri(t[a+1]);t[r+1]=ni(e,a),0!==e&&(t[e+1]=si(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ni(a,0),0!==a&&(t[a+1]=si(t[a+1],r)),a=r;else t[r+1]=ni(u,0),0===a?a=r:t[u+1]=si(t[u+1],r),u=r;l&&(t[r+1]=ii(t[r+1])),Uo(t,c,r,!0),Uo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&cn(o,e)>=0&&(n[r+1]=ai(n[r+1]))}(e,c,t,r),s=ni(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Jr&&Oo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Go(1==(1&c)?Wo(u,e,n,i,oi(c),s):void 0)||(Go(o)||function(t){return 2==(2&t)}(c)&&(o=Wo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Tt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,xt(le(),n),i,o))}(o,o.data[le()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(jn(t))),t}(e),true,s)}(t,e),Ho}function Bo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=zo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function zo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),an(t,s,!!n||e[++o]))}return void 0===t?null:t}function Wo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Jr&&(l=c?H:void 0);let h=c?un(l,r):u===r?l:void 0;if(o&&!Go(h)&&(h=un(e,r)),Go(h)&&(a=h,s))return a;const d=t[i+1];i=s?ri(d):oi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=un(t,r))}return a}function Go(t){return void 0!==t}function Ko(t,e=""){const n=qt(),r=Ht(),i=t+ct,o=r.firstCreatePass?li(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Tt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Rr(r,n,s,o),Gt(o,!1)}function Qo(t){return $o("",t,""),Qo}function $o(t,e,n){const r=qt(),i=function(t,e,n,r){return Oo(t,Yt(),n)?e+m(n)+r:Jr}(r,t,e,n);return i!==Jr&&Ki(r,le(),i),$o}function Yo(t,e,n,r,i){const o=qt(),s=function(t,e,n,r,i,o){const s=function(t,e,n,r){const i=Oo(t,e,n);return Oo(t,e+1,r)||i}(t,Vt.lFrame.bindingIndex,n,i);return Xt(2),s?e+m(n)+r+m(i)+o:Jr}(o,t,e,n,r,i);return s!==Jr&&Ki(o,le(),s),Yo}function Xo(t,e,n){const r=qt();return Oo(r,Yt(),e)&&Ci(Ht(),de(),r,t,e,r[11],n,!0),Xo}const Zo=void 0;var Jo=["en",[["a","p"],["AM","PM"],Zo],[["AM","PM"],Zo,Zo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zo,"{1} 'at' {0}",Zo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ts={};function es(t,e,n){"string"!=typeof e&&(n=e,e=t[ss.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ts[e]=t,n&&(ts[e][ss.ExtraData]=n)}function ns(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=os(e);if(n)return n;const r=e.split("-")[0];if(n=os(r),n)return n;if("en"===r)return Jo;throw new Error(`Missing locale data for the locale "${t}".`)}function rs(t){return ns(t)[ss.CurrencyCode]||null}function is(t){return ns(t)[ss.PluralCase]}function os(t){return t in ts||(ts[t]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[t]),ts[t]}var ss=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const as="en-US";let us=as;function cs(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(us=t.toLowerCase().replace(/_/g,"-"))}function ls(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)ls(t[o],e,n,r,i);else{const o=Ht(),s=qt();let a=co(t)?t:p(t.provide),u=so(t);const c=zt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(co(t)||!t.multi){const r=new _e(u,i,To),f=fs(a,e,i?l:l+d,h);-1===f?(Me(ke(c,s),o,a),hs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=fs(a,e,l+d,h),p=fs(a,e,l,l+d),g=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!g){Me(ke(c,s),o,a);const l=function(t,e,n,r,i){const o=new _e(t,n,To);return o.multi=[],o.index=e,o.componentProviders=0,ds(o,i,r&&!n),o}(i?gs:ps,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),hs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else hs(o,t,f>-1?f:p,ds(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function hs(t,e,n,r){const i=co(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ds(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function fs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ps(t,e,n,r){return ys(this.multi,[])}function gs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ys(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ys(i,o);return o}function ys(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ms(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ht();if(r.firstCreatePass){const i=yt(t);ls(n,r.data,r.blueprint,i,!0),ls(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class vs{}class bs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let _s=(()=>{class t{}return t.NULL=new bs,t})();function ws(...t){}function Cs(t,e){return new Es(Nt(t,e))}const Os=function(){return Cs(zt(),qt())};let Es=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Os,t})();function Ss(t){return t instanceof Es?t.nativeElement:t}class Ts{}let Is=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>As(),t})();const As=function(){const t=qt(),e=kt(zt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let xs=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class Ns{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const js=new Ns("11.2.10");class ks{constructor(){}supports(t){return wo(t)}create(t){return new Ps(t)}}const Rs=(t,e)=>e;class Ps{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Rs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Fs(n,r,i)?e:n,s=Fs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!wo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[_o()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ds(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ls),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ls),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ds{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ms{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ls{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ms,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Vs{constructor(){}supports(t){return t instanceof Map||Co(t)}create(){return new Us}}class Us{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Co(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new qs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class qs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hs(){return new Bs([new ks])}let Bs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Hs()),deps:[[t,new Cn,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:Hs}),t})();function zs(){return new Ws([new Vs])}let Ws=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||zs()),deps:[[t,new Cn,new wn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:zs}),t})();function Gs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(At(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Gs(e[1],e,n,r)}const s=n.type;if(8&s)Gs(t,e,n.child,r);else if(32&s){const t=vr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Dr(e,n);if(Array.isArray(t))r.push(...t);else{const n=br(e[16]);Gs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ks{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Gs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Tr(t,n),sn(e,n))}this._attachedToViewContainer=!1}Ir(this._lView[1],this._lView)}onDestroy(t){_i(this._lView[1],this._lView,null,t)}markForCheck(){Fi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){$t(!0);try{Vi(t,e,n)}finally{$t(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Fr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Qs extends Ks{constructor(t){super(t),this._view=t}detectChanges(){Ui(this._view)}checkNoChanges(){!function(t){$t(!0);try{Ui(t)}finally{$t(!1)}}(this._view)}get context(){return null}}const $s=Xs;let Ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=$s,t.__ChangeDetectorRef__=!0,t})();function Xs(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=kt(t.index,e);return new Ks(n,n)}return 47&t.type?new Ks(e[16],e):null}(zt(),qt(),t)}const Zs=[new Vs],Js=new Bs([new ks]),ta=new Ws(Zs),ea=function(){return oa(zt(),qt())};let na=(()=>{class t{}return t.__NG_ELEMENT_ID__=ea,t})();const ra=na,ia=class extends ra{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),di(e,n,t),new Ks(n)}};function oa(t,e){return 4&t.type?new ia(e,t,Cs(t,e)):null}class sa{}class aa{}const ua=function(){return pa(zt(),qt())};let ca=(()=>{class t{}return t.__NG_ELEMENT_ID__=ua,t})();const la=ca,ha=class extends la{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Cs(this._hostTNode,this._hostLView)}get injector(){return new Ke(this._hostTNode,this._hostLView)}get parentInjector(){const t=De(this._hostTNode,this._hostLView);if(Te(t)){const e=Ae(t,this._hostLView),n=Ie(t);return new Ke(e[1].data[n+8],e)}return new Ke(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=da(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(sa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ha(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],on(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Mr(i,o),a=n[11],u=kr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Fr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),on(fa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=da(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Tr(this._lContainer,e);n&&(sn(fa(this._lContainer),e),Ir(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Tr(this._lContainer,e);return n&&null!=sn(fa(this._lContainer),e)?new Ks(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function da(t){return t[8]}function fa(t){return t[8]||(t[8]=[])}function pa(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=At(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);xr(n,kr(n,r),i,function(t,e){return Tt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ri(r,e,i,t),Li(e,n)}return new ha(n,t,e)}const ga={};class ya extends _s{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new ba(e,this.ngModule)}}function ma(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const va=new Je("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gr});class ba extends vs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Zr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ma(this.componentDef.inputs)}get outputs(){return ma(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ga,i);return o!==ga||r===ga?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ts,It),s=i.get(xs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Tt(t))return t.selectRootElement(e,n===D.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Er(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:gr,clean:Hi,playerHandler:null,flags:0},d=bi(0,null,null,1,0,null,null,null,null,null),f=ci(null,d,h,l,null,null,o,a,s,i);let p,g;ie(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=li(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Qi(a,u,!0),null!==t&&(we(i,t,u),null!==a.classes&&qr(i,t,a.classes),null!==a.styles&&Ur(i,t,a.styles)));const c=r.createRenderer(t,e),l=ci(n,vi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Me(ke(a,n),s,e.type),Ti(s,a),Ai(a,n.length,1)),Li(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)we(a,c,["ng-version",js.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Qr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&we(a,c,t),e&&e.length>0&&qr(a,c,e.join(" "))}if(g=jt(d,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),xi(t,r,e,hi(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);pr(i,e);const o=Nt(r,e);return o&&pr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=zt();e.contentQueries(1,s,t.directiveStart)}const a=zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),Ei(n[1],a,0,a.directiveStart,a.directiveEnd,e),Si(e,s)),s}(t,this.componentDef,f,h,[fo]),di(d,f,null)}finally{ce()}return new _a(this.componentType,p,Cs(g,f),f,g)}}class _a extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Qs(r),this.componentType=t}get injector(){return new Ke(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const wa=new Map;class Ca extends sa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ya(this);const n=ut(t),r=t[Q]||null;r&&cs(r),this._bootstrapComponents=yr(n.bootstrap),this._r3Injector=ro(t,e,[{provide:sa,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ho.THROW_IF_NOT_FOUND,n=x.Default){return t===ho||t===sa||t===$i?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Oa extends aa{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,wa.get(i),n),wa.set(i,n));const o=yr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ca(this.moduleType,t)}}function Ea(t){return e=>{setTimeout(t,void 0,e)}}const Sa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Ea(u),a&&(a=Ea(a)),c&&(c=Ea(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function Ta(){return this._results[_o()]()}class Ia{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=_o(),n=Ia.prototype;n[e]||(n[e]=Ta)}get changes(){return this._changes||(this._changes=new Sa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=nn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Aa{constructor(t){this.queryList=t,this.matches=null}clone(){return new Aa(this.queryList)}setDirty(){this.queryList.setDirty()}}class xa{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new xa(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ua(t,e).matches&&this.queries[e].setDirty()}}class Na{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class ja{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ja(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class ka{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new ka(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ra(e,i)),this.matchTNodeWithReadOption(t,e,Be(e,t,i,!1,!1))}else n===na?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Be(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Es||r===ca||r===na&&4&e.type)this.addMatch(e.index,-2);else{const n=Be(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ra(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Pa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Cs(t,e):4&t.type?oa(t,e):null}(e,t):-2===n?function(t,e,n){return n===Es?Cs(e,t):n===na?oa(e,t):n===ca?pa(e,t):void 0}(t,e,r):ze(t,t[1],n,e)}function Da(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Pa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ma(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Da(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ma(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ma(n[1],n,i,r)}}}}}return r}function La(t){const e=qt(),n=Ht(),r=te();ee(r+1);const i=Ua(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ma(n,e,r,[]):Da(n,e,i,r);t.reset(o,Ss),t.notifyOnChanges()}return!0}return!1}function Fa(t,e,n,r){const i=Ht();if(i.firstCreatePass){const o=zt();(function(t,e,n){null===t.queries&&(t.queries=new ja),t.queries.track(new ka(e,n))})(i,new Na(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ia(4==(4&n));_i(t,e,r,r.destroy),null===e[19]&&(e[19]=new xa),e[19].queries.push(new Aa(r))}(i,qt(),n)}function Va(){return t=qt(),e=te(),t[19].queries[e].queryList;var t,e}function Ua(t,e){return t.queries.getByIndex(e)}function qa(t=x.Default){const e=Xs(!0);if(null!=e||t&x.Optional)return e;b("ChangeDetectorRef")}const Ha=new Je("Application Initializer");let Ba=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ws,this.reject=ws,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ro(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(mn(Ha,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const za=new Je("AppId"),Wa={provide:za,useFactory:function(){return`${Ga()}${Ga()}${Ga()}`},deps:[]};function Ga(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ka=new Je("Platform Initializer"),Qa=new Je("Platform ID"),$a=new Je("appBootstrapListener");let Ya=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Xa=new Je("LocaleId"),Za=new Je("DefaultCurrencyCode");class Ja{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const tu=function(t){return new Oa(t)},eu=tu,nu=function(t){return Promise.resolve(tu(t))},ru=function(t){const e=tu(t),n=yr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new ba(n)),t},[]);return new Ja(e,n)},iu=ru,ou=function(t){return Promise.resolve(ru(t))};let su=(()=>{class t{constructor(){this.compileModuleSync=eu,this.compileModuleAsync=nu,this.compileModuleAndAllComponentsSync=iu,this.compileModuleAndAllComponentsAsync=ou}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const au=(()=>Promise.resolve(0))();function uu(t){"undefined"==typeof Zone?au.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class cu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sa(!1),this.onMicrotaskEmpty=new Sa(!1),this.onStable=new Sa(!1),this.onError=new Sa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=U.requestAnimationFrame,e=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(U,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,du(t),hu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),du(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return fu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),pu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return fu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),pu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,du(t),hu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,lu,ws,ws);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const lu={};function hu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function du(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function fu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pu(t){t._nesting--,hu(t)}class gu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sa,this.onMicrotaskEmpty=new Sa,this.onStable=new Sa,this.onError=new Sa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let yu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cu.assertNotInAngularZone(),uu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(mn(cu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),mu=(()=>{class t{constructor(){this._applications=new Map,wu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return wu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class vu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function bu(t){wu=t}let _u,wu=new vu,Cu=!0,Ou=!1;function Eu(){return Ou=!0,Cu}function Su(){if(Ou)throw new Error("Cannot enable prod mode after platform setup.");Cu=!1}const Tu=new Je("AllowMultipleToken");class Iu{constructor(t,e){this.name=t,this.token=e}}function Au(t,e,n=[]){const r=`Platform: ${e}`,i=new Je(r);return(e=[])=>{let o=xu();if(!o||o.injector.get(Tu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Xi,useValue:"platform"});!function(t){if(_u&&!_u.destroyed&&!_u.injector.get(Tu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_u=t.get(Nu);const e=t.get(Ka,null);e&&e.forEach(t=>t())}(ho.create({providers:t,name:r}))}return function(t){const e=xu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function xu(){return _u&&!_u.destroyed?_u:null}let Nu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new gu:("zone.js"===t?void 0:t)||new cu({enableLongStackTrace:Eu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:cu,useValue:n}];return n.run(()=>{const e=ho.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(fr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ru(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ro(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ba);return t.runInitializers(),t.donePromise.then(()=>(cs(i.injector.get(Xa,as)||as),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ju({},e);return function(t,e,n){const r=new Oa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(ku);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(mn(ho))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function ju(t,e){return Array.isArray(e)?e.reduce(ju,t):Object.assign(Object.assign({},t),e)}let ku=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{cu.assertNotInAngularZone(),uu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{cu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof vs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(sa),i=n.create(ho.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(yu,null),a=s&&i.injector.get(mu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ru(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ru(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($a,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(mn(cu),mn(ho),mn(fr),mn(_s),mn(Ba))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Ru(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Pu{}class Du{}const Mu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Lu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Mu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Fu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Fu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(mn(su),mn(Du,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function Fu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Vu=function(t){return null},Uu=Au(null,"core",[{provide:Qa,useValue:"unknown"},{provide:Nu,deps:[ho]},{provide:mu,deps:[]},{provide:Ya,deps:[]}]),qu=[{provide:ku,useClass:ku,deps:[cu,ho,fr,_s,Ba]},{provide:va,deps:[cu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ba,useClass:Ba,deps:[[new wn,Ha]]},{provide:su,useClass:su,deps:[]},Wa,{provide:Bs,useFactory:function(){return Js},deps:[]},{provide:Ws,useFactory:function(){return ta},deps:[]},{provide:Xa,useFactory:function(t){return cs(t=t||"undefined"!=typeof $localize&&$localize.locale||as),t},deps:[[new _n(Xa),new wn,new Cn]]},{provide:Za,useValue:"USD"}];let Hu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(mn(ku))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:qu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return k}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return H}),n.d(e,"m",function(){return K}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return j}),n.d(e,"p",function(){return y}),n.d(e,"q",function(){return m}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return P}),n.d(e,"t",function(){return _}),n.d(e,"u",function(){return p}),n.d(e,"v",function(){return g}),n.d(e,"w",function(){return C}),n.d(e,"x",function(){return v}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return N}),n.d(e,"A",function(){return I}),n.d(e,"B",function(){return D}),n.d(e,"C",function(){return M}),n.d(e,"D",function(){return R}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return W}),n.d(e,"G",function(){return A}),n.d(e,"H",function(){return q}),n.d(e,"I",function(){return B}),n.d(e,"J",function(){return z});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function C(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function S(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function A(t){return JSON.stringify(t)}var x=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=x(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=x(t).claims;return"object"==typeof e&&!0===e.admin};function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e){return t+" failed: "+e+" argument "}function B(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function K(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.20",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Rb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Rb)(s).location;return new b(Object(r.Rb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(y),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Rb)(y),Object(r.Rb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class T{}let I=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function A(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class x{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let N=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new j(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new j(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class j{constructor(t,e){this.record=t,this.view=e}}let k=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function P(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:T,useClass:I}]}),t})();function M(t){return"server"===t}let L=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new F(Object(r.Rb)(s),window)}),t})();class F{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=V(this.window.history)||V(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function V(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new U,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=H||(H=document.querySelector("base"),H)?H.getAttribute("href"):null;return null==e?null:(n=e,q||(q=document.createElement("a")),q.setAttribute("href",n),"/"===q.pathname.charAt(0)?q.pathname:"/"+q.pathname);var n}resetBaseElement(){H=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return A(document.cookie,t)}}let q,H=null;const B=new r.r("TRANSITION_ID"),z=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[B,s,r.s],multi:!0}];class W{static init(){Object(r.X)(new W)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const G=new r.r("EventManagerPlugins");let K=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(G),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Q{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let $=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t extends ${constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const X={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Z=/%COMP%/g;function J(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?J(t,i,n):(i=i.replace(Z,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=J(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(K),r.Rb(Y),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(X[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=X[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=X[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=J(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Z,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Z,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=J(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends Q{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends Q{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ht=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){U.makeCurrent(),W.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],dt=Object(r.S)(r.W,"browser",ht),ft=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:G,useClass:ot,multi:!0,deps:[s,r.A,r.C]},{provide:G,useClass:lt,multi:!0,deps:[s]},[],{provide:et,useClass:et,deps:[K,Y,r.c]},{provide:r.F,useExisting:et},{provide:$,useExisting:Y},{provide:Y,useClass:Y,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:K,useClass:K,deps:[G,r.A]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:B,useExisting:r.c},z]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:ft,imports:[D,r.f]}),t})();"undefined"!=typeof window&&window;var gt=n("LRne"),yt=n("HDdC"),mt=n("5+tZ");function vt(t,e){return Object(mt.a)(t,e,1)}var bt=n("7o/Q");function _t(t,e){return function(n){return n.lift(new wt(t,e))}}class wt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Ct(t,this.predicate,this.thisArg))}}class Ct extends bt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var Ot=n("lJxs");class Et{}class St{}class Tt{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Tt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Tt;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Tt?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class It{encodeKey(t){return At(t)}encodeValue(t){return At(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function At(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class xt{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new It,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new xt({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Nt(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function jt(t){return"undefined"!=typeof Blob&&t instanceof Blob}function kt(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Rt{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Tt),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new xt,this.urlWithParams=e}serializeBody(){return null===this.body?null:Nt(this.body)||jt(this.body)||kt(this.body)||"string"==typeof this.body?this.body:this.body instanceof xt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||kt(this.body)?null:jt(this.body)?this.body.type||null:Nt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Rt(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Pt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Dt{constructor(t,e=200,n="OK"){this.headers=t.headers||new Tt,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Mt extends Dt{constructor(t={}){super(t),this.type=Pt.ResponseHeader}clone(t={}){return new Mt({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Lt extends Dt{constructor(t={}){super(t),this.type=Pt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Lt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Ft extends Dt{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Vt(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Ut=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Rt)r=t;else{let i,o;i=n.headers instanceof Tt?n.headers:new Tt(n.headers),n.params&&(o=n.params instanceof xt?n.params:new xt({fromObject:n.params})),r=new Rt(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(gt.a)(r).pipe(vt(t=>this.handler.handle(t)));if(t instanceof Rt||"events"===n.observe)return i;const o=i.pipe(_t(t=>t instanceof Lt));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(Ot.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(Ot.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(Ot.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(Ot.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new xt).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Vt(n,e))}post(t,e,n={}){return this.request("POST",t,Vt(n,e))}put(t,e,n={}){return this.request("PUT",t,Vt(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Et))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class qt{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Ht=new r.r("HTTP_INTERCEPTORS");let Bt=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const zt=/^\)\]\}',?\n/;class Wt{}let Gt=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Kt=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new yt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Tt(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Mt({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(zt,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Lt({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Ft({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Ft({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Pt.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Pt.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Pt.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Wt))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Qt=new r.r("XSRF_COOKIE_NAME"),$t=new r.r("XSRF_HEADER_NAME");class Yt{}let Xt=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=A(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s),r.Rb(r.C),r.Rb(Qt))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Zt=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Yt),r.Rb($t))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Jt=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Ht,[]);this.chain=t.reduceRight((t,e)=>new qt(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(St),r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),te=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Zt,useClass:Bt}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Qt,useValue:e.cookieName}:[],e.headerName?{provide:$t,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[Zt,{provide:Ht,useExisting:Zt,multi:!0},{provide:Yt,useClass:Xt},{provide:Qt,useValue:"XSRF-TOKEN"},{provide:$t,useValue:"X-XSRF-TOKEN"}]}),t})(),ee=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[Ut,{provide:Et,useClass:Jt},Kt,{provide:St,useExisting:Kt},Gt,{provide:Wt,useExisting:Gt}],imports:[[te.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var ne=n("Cfvw"),re=n("XNiG"),ie=n("9ppp");class oe extends re.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ie.a;return this._value}next(t){super.next(this._value=t)}}var se=n("z+Ro"),ae=n("DH7j");class ue extends bt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class ce extends bt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var le=n("SeVD");function he(t,e,n,r,i=new ce(t,n,r)){if(!i.closed)return e instanceof yt.a?e.subscribe(i):Object(le.a)(e)(i)}var de=n("yCtX");const fe={};class pe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ge(t,this.resultSelector))}}class ge extends ue{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(fe),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(he(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===fe?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const ye=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var me=n("bHdf");function ve(...t){return Object(me.a)(1)(Object(gt.a)(...t))}var be=n("EY2u");function _e(t){return new yt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ne.a)(n):Object(be.b)()).subscribe(e)})}var we=n("EQ5u"),Ce=n("zx2A");function Oe(t,e){return"function"==typeof e?n=>n.pipe(Oe((n,r)=>Object(ne.a)(t(n,r)).pipe(Object(Ot.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Ee(t))}class Ee{constructor(t){this.project=t}call(t,e){return e.subscribe(new Se(t,this.project))}}class Se extends Ce.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ce.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Ce.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Te=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ie(t){return e=>0===t?Object(be.b)():e.lift(new Ae(t))}class Ae{constructor(t){if(this.total=t,this.total<0)throw new Te}call(t,e){return e.subscribe(new xe(t,this.total))}}class xe extends bt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ne(...t){const e=t[t.length-1];return Object(se.a)(e)?(t.pop(),n=>ve(t,n,e)):e=>ve(t,e)}function je(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ke(t,e,n))}}class ke{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Re(t,this.accumulator,this.seed,this.hasSeed))}}class Re extends bt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Pe(t){return function(e){const n=new De(t),r=e.lift(n);return n.caught=r}}class De{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Me(t,this.selector,this.caught))}}class Me extends Ce.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ce.a(this);this.add(r);const i=Object(Ce.c)(n,r);i!==r&&this.add(i)}}}function Le(t){return function(e){return 0===t?Object(be.b)():e.lift(new Fe(t))}}class Fe{constructor(t){if(this.total=t,this.total<0)throw new Te}call(t,e){return e.subscribe(new Ve(t,this.total))}}class Ve extends bt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Ue(t=Be){return e=>e.lift(new qe(t))}class qe{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new He(t,this.errorFactory))}}class He extends bt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(yb){t=yb}this.destination.error(t)}}}function Be(){return new ye}function ze(t=null){return e=>e.lift(new We(t))}class We{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ge(t,this.defaultValue))}}class Ge extends bt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ke=n("SpAZ");function Qe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?_t((e,n)=>t(e,n,r)):Ke.a,Ie(1),n?ze(e):Ue(()=>new ye))}var $e=n("vkgz"),Ye=n("x+ZX"),Xe=n("quSY");class Ze{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Je(t,this.callback))}}class Je extends bt.a{constructor(t,e){super(t),this.add(new Xe.a(e))}}class tn{constructor(t,e){this.id=t,this.url=e}}class en extends tn{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nn extends tn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rn extends tn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class on extends tn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sn extends tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class an extends tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class un extends tn{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cn extends tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ln extends tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yn{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mn{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const vn="primary";class bn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function _n(t){return new bn(t)}function wn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Cn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function On(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!En(t[i],e[i]))return!1;return!0}function En(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Sn(t){return Array.prototype.concat.apply([],t)}function Tn(t){return t.length>0?t[t.length-1]:null}function In(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function An(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(ne.a)(Promise.resolve(t)):Object(gt.a)(t)}function xn(t,e,n){return n?function(t,e){return On(t,e)}(t.queryParams,e.queryParams)&&Nn(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>En(t[n],e[n]))}(t.queryParams,e.queryParams)&&jn(t.root,e.root)}function Nn(t,e){if(!Mn(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Nn(t.children[n],e.children[n]))return!1}return!0}function jn(t,e){return kn(t,e,e.segments)}function kn(t,e,n){if(t.segments.length>n.length)return!!Mn(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Mn(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!jn(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Mn(t.segments,r)&&!!t.children.primary&&kn(t.children.primary,e,i)}}class Rn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_n(this.queryParams)),this._queryParamMap}toString(){return Vn.serialize(this)}}class Pn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,In(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Un(this)}}class Dn{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=_n(this.parameters)),this._parameterMap}toString(){return Kn(this)}}function Mn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Ln{}class Fn{parse(t){const e=new Zn(t);return new Rn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${qn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Bn(e)}=${Bn(t)}`).join("&"):`${Bn(e)}=${Bn(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Vn=new Fn;function Un(t){return t.segments.map(t=>Kn(t)).join("/")}function qn(t,e){if(!t.hasChildren())return Un(t);if(e){const e=t.children.primary?qn(t.children.primary,!1):"",n=[];return In(t.children,(t,e)=>{e!==vn&&n.push(`${e}:${qn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return In(t.children,(t,r)=>{r===vn&&(n=n.concat(e(t,r)))}),In(t.children,(t,r)=>{r!==vn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===vn?[qn(t.children.primary,!1)]:[`${n}:${qn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Un(t)}/${e[0]}`:`${Un(t)}/(${e.join("//")})`}}function Hn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bn(t){return Hn(t).replace(/%3B/gi,";")}function zn(t){return Hn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wn(t){return decodeURIComponent(t)}function Gn(t){return Wn(t.replace(/\+/g,"%20"))}function Kn(t){return`${zn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${zn(t)}=${zn(e[t])}`).join("")}`;var e}const Qn=/^[^\/()?;=#]+/;function $n(t){const e=t.match(Qn);return e?e[0]:""}const Yn=/^[^=?&#]+/,Xn=/^[^?&#]+/;class Zn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Pn(t,e)),n}parseSegment(){const t=$n(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Dn(Wn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=$n(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=$n(this.remaining);t&&(n=t,this.capture(n))}t[Wn(e)]=Wn(n)}parseQueryParam(t){const e=function(t){const e=t.match(Yn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Xn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Gn(e),i=Gn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=$n(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=vn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Pn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Jn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=tr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=tr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=er(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return er(t,this._root).map(t=>t.value)}}function tr(t,e){if(t===e.value)return e;for(const n of e.children){const e=tr(t,n);if(e)return e}return null}function er(t,e){if(t===e.value)return[e];for(const n of e.children){const r=er(t,n);if(r.length)return r.unshift(e),r}return[]}class nr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function rr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ir extends Jn{constructor(t,e){super(t),this.snapshot=e,lr(this,t)}toString(){return this.snapshot.toString()}}function or(t,e){const n=function(t,e){const n=new ur([],{},{},"",{},vn,e,null,t.root,-1,{});return new cr("",new nr(n,[]))}(t,e),r=new oe([new Dn("",{})]),i=new oe({}),o=new oe({}),s=new oe({}),a=new oe(""),u=new sr(r,i,s,a,o,vn,e,n.root);return u.snapshot=n.root,new ir(new nr(u,[]),n)}class sr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ot.a)(t=>_n(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ot.a)(t=>_n(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ar(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ur{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_n(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_n(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cr extends Jn{constructor(t,e){super(e),this.url=t,lr(this,e)}toString(){return hr(this._root)}}function lr(t,e){e.value._routerState=t,e.children.forEach(e=>lr(t,e))}function hr(t){const e=t.children.length>0?` { ${t.children.map(hr).join(", ")} } `:"";return`${t.value}${e}`}function dr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,On(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),On(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!On(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),On(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function fr(t,e){return On(t.params,e.params)&&function(t,e){return Mn(t,e)&&t.every((t,n)=>On(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||fr(t.parent,e.parent))}function pr(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return pr(t,e,r);return pr(t,e)})}(t,e,n);return new nr(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return gr(e,t),t}{const n=new sr(new oe((r=e.value).url),new oe(r.params),new oe(r.queryParams),new oe(r.fragment),new oe(r.data),r.outlet,r.component,r),i=e.children.map(e=>pr(t,e));return new nr(n,i)}}var r}function gr(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)gr(t.children[n],e.children[n])}function yr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function mr(t){return"object"==typeof t&&null!=t&&t.outlets}function vr(t,e,n,r,i){let o={};return r&&In(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Rn(n.root===t?e:br(n.root,t,e),o,i)}function br(t,e,n){const r={};return In(t.children,(t,i)=>{r[i]=t===e?n:br(t,e,n)}),new Pn(t.segments,r)}class _r{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&yr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(mr);if(r&&r!==Tn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Cr(t,e,n){if(t||(t=new Pn([],{})),0===t.segments.length&&t.hasChildren())return Or(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(mr(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ir(a,u,e))return o;r+=2}else{if(!Ir(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Pn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Pn(t.segments.slice(r.pathIndex),t.children),Or(e,0,i)}return r.match&&0===i.length?new Pn(t.segments,{}):r.match&&!t.hasChildren()?Er(t,e,n):r.match?Or(t,0,i):Er(t,e,n)}function Or(t,e,n){if(0===n.length)return new Pn(t.segments,{});{const r=function(t){return mr(t[0])?t[0].outlets:{[vn]:t}}(n),i={};return In(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Cr(t.children[r],e,n))}),In(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Pn(t.segments,i)}}function Er(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(mr(o)){const t=Sr(o.outlets);return new Pn(r,t)}if(0===i&&yr(n[0])){r.push(new Dn(t.segments[e].path,Tr(n[0]))),i++;continue}const s=mr(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&yr(a)?(r.push(new Dn(s,Tr(a))),i+=2):(r.push(new Dn(s,{})),i++)}return new Pn(r,{})}function Sr(t){const e={};return In(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Er(new Pn([],{}),0,t))}),e}function Tr(t){const e={};return In(t,(t,n)=>e[n]=`${t}`),e}function Ir(t,e,n){return t==n.path&&On(e,n.parameters)}class Ar{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),dr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=rr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),In(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=rr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=rr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new yn(t.value.snapshot))}),t.children.length&&this.forwardEvent(new pn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(dr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),xr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function xr(t){dr(t.value),t.children.forEach(xr)}class Nr{constructor(t,e){this.routes=t,this.module=e}}function jr(t){return"function"==typeof t}function kr(t){return t instanceof Rn}const Rr=Symbol("INITIAL_VALUE");function Pr(){return Oe(t=>function(...t){let e,n;return Object(se.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(ae.a)(t[0])&&(t=t[0]),Object(de.a)(t,n).lift(new pe(e))}(t.map(t=>t.pipe(Ie(1),Ne(Rr)))).pipe(je((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Rr)return t;if(r===Rr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||kr(r))return r}return t},t)},Rr),_t(t=>t!==Rr),Object(Ot.a)(t=>kr(t)?t:!0===t),Ie(1)))}let Dr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Ni]},encapsulation:2}),t})();function Mr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Lr(r,Fr(e,r))}}function Lr(t,e){t.children&&Mr(t.children,e)}function Fr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Vr(t){const e=t.children&&t.children.map(Vr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==vn&&(n.component=Dr),n}function Ur(t){return t.outlet||vn}function qr(t,e){const n=t.filter(t=>Ur(t)===e);return n.push(...t.filter(t=>Ur(t)!==e)),n}const Hr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Br(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Hr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Cn)(n,t,e);if(!i)return Object.assign({},Hr);const o={};In(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function zr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Wr(t,e,n)&&Ur(n)!==vn)}(t,n,r)){const i=new Pn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Ur(o)!==vn){const n=new Pn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ur(o)]=n}return i}(t,e,r,new Pn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Wr(t,e,n))}(t,n,r)){const o=new Pn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Wr(t,n,a)&&!i[Ur(a)]){const n=new Pn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Ur(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Pn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Wr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Gr(t,e,n,r){return!!(Ur(t)===r||r!==vn&&Wr(e,n,t))&&("**"===t.path||Br(e,t,n).matched)}function Kr(t,e,n){return 0===e.length&&!t.children[n]}class Qr{constructor(t){this.segmentGroup=t||null}}class $r{constructor(t){this.urlTree=t}}function Yr(t){return new yt.a(e=>e.error(new Qr(t)))}function Xr(t){return new yt.a(e=>e.error(new $r(t)))}function Zr(t){return new yt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Jr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=zr(this.urlTree.root,[],[],this.config).segmentGroup,e=new Pn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,vn).pipe(Object(Ot.a)(t=>this.createUrlTree(ti(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pe(t=>{if(t instanceof $r)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Qr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,vn).pipe(Object(Ot.a)(e=>this.createUrlTree(ti(e),t.queryParams,t.fragment))).pipe(Pe(t=>{if(t instanceof Qr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Pn([],{[vn]:t}):t;return new Rn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ot.a)(t=>new Pn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ne.a)(r).pipe(vt(r=>{const i=n.children[r],o=qr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Ot.a)(t=>({segment:t,outlet:r})))}),je((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?_t((e,n)=>t(e,n,r)):Ke.a,Le(1),n?ze(e):Ue(()=>new ye))}())}expandSegment(t,e,n,r,i,o){return Object(ne.a)(n).pipe(vt(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Pe(t=>{if(t instanceof Qr)return Object(gt.a)(null);throw t}))),Qe(t=>!!t),Pe((t,n)=>{if(t instanceof ye||"EmptyError"===t.name){if(Kr(e,r,i))return Object(gt.a)(new Pn([],{}));throw new Qr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Gr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Yr(e):Yr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Xr(i):this.lineralizeSegments(n,i).pipe(Object(mt.a)(n=>{const i=new Pn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Br(e,r,i);if(!s)return Yr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Xr(l):this.lineralizeSegments(r,l).pipe(Object(mt.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(gt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(Ot.a)(t=>(n._loadedConfig=t,new Pn(r,{})))):Object(gt.a)(new Pn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Br(e,n,r);if(!o)return Yr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(mt.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=zr(e,s,u,o),l=new Pn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Ot.a)(t=>new Pn(s,t)));if(0===o.length&&0===c.length)return Object(gt.a)(new Pn(s,{}));const h=Ur(n)===i;return this.expandSegment(r,l,o,c,h?vn:i,!0).pipe(Object(Ot.a)(t=>new Pn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(gt.a)(new Nr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(gt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(mt.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ot.a)(t=>(e._loadedConfig=t,t))):function(t){return new yt.a(e=>e.error(wn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(gt.a)(new Nr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(gt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&jr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!jr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return An(o)});return Object(gt.a)(i).pipe(Pr(),Object($e.a)(t=>{if(!kr(t))return;const e=wn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Ot.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(gt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Zr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Rn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return In(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return In(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Pn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ti(t){const e={};for(const n of Object.keys(t.children)){const r=ti(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Pn(t.segments.concat(e.segments),e.children)}return t}(new Pn(t.segments,e))}class ei{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ni{constructor(t,e){this.component=t,this.route=e}}function ri(t,e,n){const r=t._root;return oi(r,e?e._root:null,n,[r.value])}function ii(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function oi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=rr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Mn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Mn(t.url,e.url)||!On(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fr(t,e)||!On(t.queryParams,e.queryParams);case"paramsChange":default:return!fr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ei(r)):(o.data=s.data,o._resolvedData=s._resolvedData),oi(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ni(a.outlet.component,s))}else s&&si(e,a,i),i.canActivateChecks.push(new ei(r)),oi(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),In(o,(t,e)=>si(t,n.getContext(e),i)),i}function si(t,e,n){const r=rr(t),i=t.value;In(r,(t,r)=>{si(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ni(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ai{}function ui(t){return new yt.a(e=>e.error(t))}class ci{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=zr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,vn);if(null===e)return null;const n=new ur([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},vn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new nr(n,e),i=new cr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=ar(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=qr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!li(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===vn?-1:e.value.outlet===vn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Kr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Gr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Tn(n).parameters:{};i=new ur(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fi(t),Ur(t),t.component,t,hi(e),di(e)+n.length,pi(t))}else{const r=Br(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new ur(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fi(t),Ur(t),t.component,t,hi(e),di(e)+o.length,pi(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=zr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new nr(i,t)]}if(0===a.length&&0===c.length)return[new nr(i,[])];const l=Ur(t)===r,h=this.processSegment(a,u,c,l?vn:r);return null===h?null:[new nr(i,h)]}}function li(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function hi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function di(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function fi(t){return t.data||{}}function pi(t){return t.resolve||{}}function gi(t){return Oe(e=>{const n=t(e);return n?Object(ne.a)(n).pipe(Object(Ot.a)(()=>e)):Object(gt.a)(e)})}class yi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const mi=new r.r("ROUTES");class vi{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(Ot.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Nr(Sn(i.injector.get(mi,void 0,r.q.Self|r.q.Optional)).map(Vr),i)}),Pe(t=>{throw e._loader$=void 0,t}));return e._loader$=new we.a(n,()=>new re.a).pipe(Object(Ye.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(ne.a)(this.loader.load(t)):An(t()).pipe(Object(mt.a)(t=>t instanceof r.w?Object(gt.a)(t):Object(ne.a)(this.compiler.compileModuleAsync(t))))}}class bi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _i,this.attachRef=null}}class _i{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new bi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class wi{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ci(t){throw t}function Oi(t,e,n){return e.parse("/")}function Ei(t,e){return Object(gt.a)(null)}let Si=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new re.a,this.errorHandler=Ci,this.malformedUriErrorHandler=Oi,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ei,afterPreactivation:Ei},this.urlHandlingStrategy=new wi,this.routeReuseStrategy=new yi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Rn(new Pn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new vi(s,a,t=>this.triggerEvent(new hn(t)),t=>this.triggerEvent(new dn(t))),this.routerState=or(this.currentUrlTree,this.rootComponentType),this.transitions=new oe({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(_t(t=>0!==t.id),Object(Ot.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Oe(t=>{let n=!1,r=!1;return Object(gt.a)(t).pipe(Object($e.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Oe(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(gt.a)(t).pipe(Oe(t=>{const n=this.transitions.getValue();return e.next(new en(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?be.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Oe(t=>function(t,e,n,r,i){return new Jr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ot.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object($e.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(mt.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new ci(t,e,n,r,i,o).recognize();return null===s?ui(new ai):Object(gt.a)(s)}catch(yb){return ui(yb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ot.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object($e.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new sn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new en(n,this.serializeUrl(r),i,o);e.next(a);const u=or(r,this.rootComponentType).snapshot;return Object(gt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),be.a}),gi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object($e.a)(t=>{const e=new an(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ot.a)(t=>Object.assign(Object.assign({},t),{guards:ri(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(mt.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(gt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ne.a)(t).pipe(Object(mt.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(gt.a)(!0);const s=o.map(o=>{const s=ii(o,e,i);let a;if(function(t){return t&&jr(t.canDeactivate)}(s))a=An(s.canDeactivate(t,e,n,r));else{if(!jr(s))throw new Error("Invalid CanDeactivate guard");a=An(s(t,e,n,r))}return a.pipe(Qe())});return Object(gt.a)(s).pipe(Pr())}(t.component,t.route,n,e,r)),Qe(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(mt.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ne.a)(e).pipe(vt(e=>ve(function(t,e){return null!==t&&e&&e(new fn(t)),Object(gt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new gn(t)),Object(gt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>_e(()=>{const i=e.guards.map(i=>{const o=ii(i,e.node,n);let s;if(function(t){return t&&jr(t.canActivateChild)}(o))s=An(o.canActivateChild(r,t));else{if(!jr(o))throw new Error("Invalid CanActivateChild guard");s=An(o(r,t))}return s.pipe(Qe())});return Object(gt.a)(i).pipe(Pr())}));return Object(gt.a)(i).pipe(Pr())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(gt.a)(!0);const i=r.map(r=>_e(()=>{const i=ii(r,e,n);let o;if(function(t){return t&&jr(t.canActivate)}(i))o=An(i.canActivate(e,t));else{if(!jr(i))throw new Error("Invalid CanActivate guard");o=An(i(e,t))}return o.pipe(Qe())}));return Object(gt.a)(i).pipe(Pr())}(t,e.route,n))),Qe(t=>!0!==t,!0))}(r,o,t,e):Object(gt.a)(n)),Object(Ot.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object($e.a)(t=>{if(kr(t.guardsResult)){const e=wn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new un(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),_t(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new rn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),gi(t=>{if(t.guards.canActivateChecks.length)return Object(gt.a)(t).pipe(Object($e.a)(t=>{const e=new cn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Oe(t=>{let n=!1;return Object(gt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(mt.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(gt.a)(t);let o=0;return Object(ne.a)(n).pipe(vt(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(gt.a)({});const o={};return Object(ne.a)(i).pipe(Object(mt.a)(i=>function(t,e,n,r){const i=ii(t,e,r);return An(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object($e.a)(t=>{o[i]=t}))),Le(1),Object(mt.a)(()=>Object.keys(o).length===i.length?Object(gt.a)(o):be.a))}(t._resolve,t,e,r).pipe(Object(Ot.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ar(t,n).resolve),null)))}(t.route,e,r,i)),Object($e.a)(()=>o++),Le(1),Object(mt.a)(e=>o===n.length?Object(gt.a)(t):be.a))})),Object($e.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new rn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object($e.a)(t=>{const e=new ln(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),gi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ot.a)(t=>{const e=function(t,e,n){const r=pr(t,e._root,n?n._root:void 0);return new ir(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object($e.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ot.a)(t=>(new Ar(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object($e.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new rn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Ze(i))),Pe(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=kr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new rn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new on(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(zl){t.reject(zl)}}var i;return be.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Mr(t),this.config=t.map(Vr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return vr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new _r(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return In(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new _r(n,e,r)}(n);if(o.toRoot())return vr(e.root,new Pn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new wr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new wr(t,t===e.root,0)}const r=yr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new wr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Or(s.segmentGroup,s.index,o.commands):Cr(s.segmentGroup,s.index,o.commands);return vr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=kr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(yb){e=this.malformedUriErrorHandler(yb,this.urlSerializer,t)}return e}isActive(t,e){if(kr(t))return xn(this.currentUrlTree,t,e);const n=this.parseUrl(t);return xn(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new nn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(Ln),r.Rb(_i),r.Rb(w),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Ti=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new re.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Ai(this.skipLocationChange),replaceUrl:Ai(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ai(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Si),r.Kb(sr),r.Sb("tabindex"),r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Ub("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),Ii=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new re.a,this.subscription=t.events.subscribe(t=>{t instanceof nn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Ai(this.skipLocationChange),replaceUrl:Ai(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ai(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Si),r.Kb(sr),r.Kb(y))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.ac),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function Ai(t){return""===t||!!t}let xi=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof nn&&this.update()})}ngAfterContentInit(){Object(gt.a)(this.links.changes,this.linksWithHrefs.changes,Object(gt.a)(null)).pipe(Object(me.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(ne.a)(e).pipe(Object(me.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Si),r.Kb(r.l),r.Kb(r.E),r.Kb(r.h),r.Kb(Ti,8),r.Kb(Ii,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Db(n,Ti,1),r.Db(n,Ii,1)),2&t){let t;r.Yb(t=r.Vb())&&(e.links=t),r.Yb(t=r.Vb())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.yb]}),t})(),Ni=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||vn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ji(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(_i),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ji{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===sr?this.route:t===_i?this.childContexts:this.parent.get(t,e)}}class ki{}class Ri{preload(t,e){return Object(gt.a)(null)}}let Pi=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new vi(e,n,e=>t.triggerEvent(new hn(e)),e=>t.triggerEvent(new dn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(_t(t=>t instanceof nn),vt(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ne.a)(n).pipe(Object(me.a)(),Object(Ot.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(gt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(mt.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Si),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(ki))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),Di=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof en?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mn&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new mn(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Si),r.Rb(L),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Mi=new r.r("ROUTER_CONFIGURATION"),Li=new r.r("ROUTER_FORROOT_GUARD"),Fi=[w,{provide:Ln,useClass:Fn},{provide:Si,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Si(null,t,e,n,r,i,s,Sn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Ln,_i,w,r.s,r.x,r.i,mi,Mi,[class{},new r.B],[class{},new r.B]]},_i,{provide:sr,useFactory:function(t){return t.routerState.root},deps:[Si]},{provide:r.x,useClass:r.K},Pi,Ri,class{preload(t,e){return e().pipe(Pe(()=>Object(gt.a)(null)))}},{provide:Mi,useValue:{enableTracing:!1}}];function Vi(){return new r.z("Router",Si)}let Ui=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Fi,zi(e),{provide:Li,useFactory:Bi,deps:[[Si,new r.B,new r.J]]},{provide:Mi,useValue:n||{}},{provide:y,useFactory:Hi,deps:[a,[new r.p(v),new r.B],Mi]},{provide:Di,useFactory:qi,deps:[Si,L,Mi]},{provide:ki,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ri},{provide:r.z,multi:!0,useFactory:Vi},[Wi,{provide:r.d,multi:!0,useFactory:Gi,deps:[Wi]},{provide:Qi,useFactory:Ki,deps:[Wi]},{provide:r.b,multi:!0,useExisting:Qi}]]}}static forChild(e){return{ngModule:t,providers:[zi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Li,8),r.Rb(Si,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function qi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Di(t,e,n)}function Hi(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Bi(t){return"guarded"}function zi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:mi,multi:!0,useValue:t}]}let Wi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new re.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Si),r=this.injector.get(Mi);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(gt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Mi),n=this.injector.get(Pi),i=this.injector.get(Di),o=this.injector.get(Si),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Gi(t){return t.appInitializer.bind(t)}function Ki(t){return t.bootstrapListener.bind(t)}const Qi=new r.r("Router Initializer");var $i=n("D0XW");function Yi(){return t=>t.lift(new Xi)}class Xi{call(t,e){return e.subscribe(new Zi(t))}}class Zi extends bt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Ji(t,e){return n=>n.lift(new to(t,e))}class to{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new eo(t,this.compare,this.keySelector))}}class eo extends bt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var no=n("pxpQ"),ro=n("spgP"),io=n("Jgta"),oo=n("zIRd"),so=n("qOnz"),ao=n("q/0M"),uo=function(t,e){return(uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function co(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var lo,ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fo=fo||{},po=ho||self;function go(){}function yo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function mo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var vo="closure_uid_"+(1e9*Math.random()>>>0),bo=0;function _o(t,e,n){return t.call.apply(t.bind,arguments)}function wo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Co(t,e,n){return(Co=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_o:wo).apply(null,arguments)}function Oo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Eo(){return Date.now()}function So(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function To(){this.j=this.j,this.i=this.i}To.prototype.j=!1,To.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,vo)&&t[vo]||(t[vo]=++bo)}(this)},To.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Io=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ao=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function xo(t){return Array.prototype.concat.apply([],arguments)}function No(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function jo(t){return/^[\s\xa0]*$/.test(t)}var ko,Ro=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Po(t,e){return-1!=t.indexOf(e)}function Do(t,e){return t<e?-1:t>e?1:0}t:{var Mo=po.navigator;if(Mo){var Lo=Mo.userAgent;if(Lo){ko=Lo;break t}}ko=""}function Fo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Vo(t){var e={};for(var n in t)e[n]=t[n];return e}var Uo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Uo.length;o++)n=Uo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ho(t){return Ho[" "](t),t}Ho[" "]=go;var Bo,zo,Wo=Po(ko,"Opera"),Go=Po(ko,"Trident")||Po(ko,"MSIE"),Ko=Po(ko,"Edge"),Qo=Ko||Go,$o=Po(ko,"Gecko")&&!(Po(ko.toLowerCase(),"webkit")&&!Po(ko,"Edge"))&&!(Po(ko,"Trident")||Po(ko,"MSIE"))&&!Po(ko,"Edge"),Yo=Po(ko.toLowerCase(),"webkit")&&!Po(ko,"Edge");function Xo(){var t=po.document;return t?t.documentMode:void 0}t:{var Zo="",Jo=(zo=ko,$o?/rv:([^\);]+)(\)|;)/.exec(zo):Ko?/Edge\/([\d\.]+)/.exec(zo):Go?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zo):Yo?/WebKit\/(\S+)/.exec(zo):Wo?/(?:Version)[ \/]?(\S+)/.exec(zo):void 0);if(Jo&&(Zo=Jo?Jo[1]:""),Go){var ts=Xo();if(null!=ts&&ts>parseFloat(Zo)){Bo=String(ts);break t}}Bo=Zo}var es={};function ns(t){return function(t,e){var n=es;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Ro(String(Bo)).split("."),r=Ro(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Do(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Do(0==s[2].length,0==a[2].length)||Do(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var rs=po.document&&Go&&(Xo()||parseInt(Bo,10))||void 0,is=!Go||9<=Number(rs),os=Go&&!ns("9"),ss=function(){if(!po.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{po.addEventListener("test",go,e),po.removeEventListener("test",go,e)}catch(n){}return t}();function as(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function us(t,e){if(as.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if($o){t:{try{Ho(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:cs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}as.prototype.b=function(){this.defaultPrevented=!0},So(us,as);var cs={2:"touch",3:"pen",4:"mouse"};us.prototype.b=function(){us.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,os)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ls="closure_listenable_"+(1e6*Math.random()|0),hs=0;function ds(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++hs,this.Y=this.Z=!1}function fs(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ps(t){this.src=t,this.a={},this.b=0}function gs(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Io(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fs(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ys(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ps.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ys(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ds(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ms="closure_lm_"+(1e6*Math.random()|0),vs={};function bs(t,e,n,r,i){if(r&&r.once)return ws(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bs(t,e[o],n,r,i);return null}return n=xs(n),t&&t[ls]?t.va(e,n,mo(r)?!!r.capture:!!r,i):_s(t,e,n,!1,r,i)}function _s(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=mo(i)?!!i.capture:!!i;if(s&&!is)return null;var a=Is(t);if(a||(t[ms]=a=new ps(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ts,e=is?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ss||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Es(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ws(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ws(t,e[o],n,r,i);return null}return n=xs(n),t&&t[ls]?t.wa(e,n,mo(r)?!!r.capture:!!r,i):_s(t,e,n,!0,r,i)}function Cs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Cs(t,e[o],n,r,i);else r=mo(r)?!!r.capture:!!r,n=xs(n),t&&t[ls]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ys(o=t.a[e],n,r,i))&&(fs(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Is(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ys(e,n,r,i)),(n=-1<t?e[t]:null)&&Os(n))}function Os(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ls])gs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Es(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Is(e))?(gs(n,t),0==n.b&&(n.src=null,e[ms]=null)):fs(t)}}}function Es(t){return t in vs?vs[t]:vs[t]="on"+t}function Ss(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Os(t),n.call(r,e)}function Ts(t,e){if(t.Y)return!0;if(!is){if(!e)t:{e=["window","event"];for(var n=po,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ss(t,e=new us(e,this))}return Ss(t,new us(e,this))}function Is(t){return(t=t[ms])instanceof ps?t:null}var As="__closure_events_fn_"+(1e9*Math.random()>>>0);function xs(t){return"function"==typeof t?t:(t[As]||(t[As]=function(e){return t.handleEvent(e)}),t[As])}function Ns(){To.call(this),this.c=new ps(this),this.J=this,this.C=null}function js(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new as(e,t);else if(e instanceof as)e.target=e.target||t;else{var i=e;qo(e=new as(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ks(s,r,!0,e)&&i}if(i=ks(s=e.a=t,r,!0,e)&&i,i=ks(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ks(s=e.a=n[o],r,!1,e)&&i}function ks(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&gs(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}So(Ns,To),Ns.prototype[ls]=!0,(lo=Ns.prototype).addEventListener=function(t,e,n,r){bs(this,t,e,n,r)},lo.removeEventListener=function(t,e,n,r){Cs(this,t,e,n,r)},lo.G=function(){if(Ns.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fs(n[r]);delete e.a[t],e.b--}}this.C=null},lo.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},lo.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Rs=po.JSON.stringify;function Ps(){this.b=this.a=null}var Ds,Ms=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Fs},function(t){t.reset()});function Ls(){var t=Hs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Fs(){this.next=this.b=this.a=null}function Vs(t){po.setTimeout(function(){throw t},0)}function Us(t,e){Ds||function(){var t=po.Promise.resolve(void 0);Ds=function(){t.then(Bs)}}(),qs||(Ds(),qs=!0),Hs.add(t,e)}Ps.prototype.add=function(t,e){var n=Ms.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Fs.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Fs.prototype.reset=function(){this.next=this.b=this.a=null};var qs=!1,Hs=new Ps;function Bs(){for(var t;t=Ls();){try{t.a.call(t.b)}catch(n){Vs(n)}var e=Ms;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}qs=!1}function zs(t,e){Ns.call(this),this.b=t||1,this.a=e||po,this.f=Co(this.Za,this),this.g=Eo()}function Ws(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gs(t,e,n){if("function"==typeof t)n&&(t=Co(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Co(t.handleEvent,t)}return 2147483647<Number(e)?-1:po.setTimeout(t,e||0)}function Ks(t){t.a=Gs(function(){t.a=null,t.c&&(t.c=!1,Ks(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}So(zs,Ns),(lo=zs.prototype).aa=!1,lo.M=null,lo.Za=function(){if(this.aa){var t=Eo()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),js(this,"tick"),this.aa&&(Ws(this),this.start()))}},lo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Eo())},lo.G=function(){zs.X.G.call(this),Ws(this),delete this.a};var Qs=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}uo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ks(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(po.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(To);function $s(t){To.call(this),this.b=t,this.a={}}So($s,To);var Ys=[];function Xs(t,e,n,r){Array.isArray(n)||(n&&(Ys[0]=n.toString()),n=Ys);for(var i=0;i<n.length;i++){var o=bs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Zs(t){Fo(t.a,function(t,e){this.a.hasOwnProperty(e)&&Os(t)},t),t.a={}}function Js(){this.a=!0}function ta(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Rs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}$s.prototype.G=function(){$s.X.G.call(this),Zs(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Js.prototype.info=function(){};var ea={},na=null;function ra(){return na=na||new Ns}function ia(t){as.call(this,ea.Fa,t)}function oa(t){var e=ra();js(e,new ia(e,t))}function sa(t,e){as.call(this,ea.STAT_EVENT,t),this.stat=e}function aa(t){var e=ra();js(e,new sa(e,t))}function ua(t){as.call(this,ea.Ga,t)}function ca(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return po.setTimeout(function(){t()},e)}ea.Fa="serverreachability",So(ia,as),ea.STAT_EVENT="statevent",So(sa,as),ea.Ga="timingevent",So(ua,as);var la={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ha={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function da(){}function fa(){}da.prototype.a=null;var pa,ga={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ya(){as.call(this,"d")}function ma(){as.call(this,"c")}function va(){}function ba(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new $s(this),this.P=_a,this.R=new zs(t=Qo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}So(ya,as),So(ma,as),So(va,da),pa=new va;var _a=45e3,wa={},Ca={};function Oa(t,e,n){t.H=1,t.i=Wa(Va(e)),t.j=n,t.I=!0,Ea(t,null)}function Ea(t,e){t.u=Eo(),Ia(t),t.l=Va(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),iu(n.b,"t",r),t.D=0,t.a=Zu(t.g,t.g.C?e:null),0<t.O&&(t.F=new Qs(Co(t.Ca,t,t.a),t.O)),Xs(t.J,t.a,"readystatechange",t.Xa),e=t.B?Vo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),oa(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Sa(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ta(t,n);if(i==Ca){4==e&&(t.h=4,aa(14),r=!1),ta(t.c,t.f,null,"[Incomplete Response]");break}if(i==wa){t.h=4,aa(15),ta(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ta(t.c,t.f,i,null),ka(t,i)}4==e&&0==n.length&&(t.h=1,aa(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zu(e),e.F=!0,aa(11))):(ta(t.c,t.f,n,"[Invalid Chunked Response]"),ja(t),Na(t))}function Ta(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ca:(n=Number(e.substring(n,r)),isNaN(n)?wa:(r+=1)+n>e.length?Ca:(e=e.substr(r,n),t.D=r+n,e))}function Ia(t){t.T=Eo()+t.P,Aa(t,t.P)}function Aa(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ca(Co(t.Va,t),e)}function xa(t){t.o&&(po.clearTimeout(t.o),t.o=null)}function Na(t){0==t.g.v||t.A||Ku(t.g,t)}function ja(t){xa(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ws(t.R),Zs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ka(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hu(n.b,t)))if(n.I=t.N,!t.C&&hu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Dv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Gu(n),Du(n)}Bu(n),aa(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ca(Co(n.Sa,n),6e3));if(1>=lu(n.b)&&n.ea){try{n.ea()}catch(Dv){}n.ea=void 0}}else $u(n,11)}else if((t.C||n.a==t)&&Gu(n),!jo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Po(l,"spdy")||Po(l,"quic")||Po(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(du(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,za(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Eo()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Xu(u,u.C?u.ga:null,u.fa),f.C){fu(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(xa(p),Ia(p)),u.a=f}else Hu(u);0<n.g.length&&Fu(n)}else"stop"!=i[0]&&"close"!=i[0]||$u(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?$u(n,7):Pu(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);oa(4)}catch(Dv){}}function Ra(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(yo(t)||"string"==typeof t)Ao(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(yo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(yo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Pa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Da(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ma(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ma(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ma(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(lo=ba.prototype).setTimeout=function(t){this.P=t},lo.Xa=function(t){t=t.target;var e=this.F;e&&3==Nu(t)?e.f():this.Ca(t)},lo.Ca=function(t){try{if(t==this.a)t:{var e=Nu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Qo&&!this.a.$())){this.A||4!=e||7==n||oa(8==n||0>=r?3:2),xa(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,aa(12),ja(this),Na(this);break t}ta(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ka(this,u)}this.I?(Sa(this,e,o),Qo&&this.b&&3==e&&(Xs(this.J,this.R,"tick",this.Wa),this.R.start())):(ta(this.c,this.f,o,null),ka(this,o)),4==e&&ja(this),this.b&&!this.A&&(4==e?Ku(this.g,this):(this.b=!1,Ia(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,aa(12)):(this.h=0,aa(13)),ja(this),Na(this)}}}catch(c){}},lo.Wa=function(){if(this.a){var t=Nu(this.a),e=this.a.$();this.D<e.length&&(xa(this),Sa(this,t,e),this.b&&4!=t&&Ia(this))}},lo.cancel=function(){this.A=!0,ja(this)},lo.Va=function(){this.o=null;var t=Eo();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(oa(3),aa(17)),ja(this),this.h=2,Na(this)):Aa(this,this.T-t)},(lo=Pa.prototype).K=function(){Da(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},lo.L=function(){return Da(this),this.a.concat()},lo.get=function(t,e){return Ma(this.b,t)?this.b[t]:e},lo.set=function(t,e){Ma(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},lo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var La=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fa(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fa){this.a=void 0!==e?e:t.a,Ua(this,t.f),this.j=t.j,qa(this,t.c),Ha(this,t.h),this.g=t.g,e=t.b;var n=new tu;n.c=e.c,e.a&&(n.a=new Pa(e.a),n.b=e.b),Ba(this,n),this.i=t.i}else t&&(n=String(t).match(La))?(this.a=!!e,Ua(this,n[1]||"",!0),this.j=Ga(n[2]||""),qa(this,n[3]||"",!0),Ha(this,n[4]),this.g=Ga(n[5]||"",!0),Ba(this,n[6]||"",!0),this.i=Ga(n[7]||"")):(this.a=!!e,this.b=new tu(null,this.a))}function Va(t){return new Fa(t)}function Ua(t,e,n){t.f=n?Ga(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function qa(t,e,n){t.c=n?Ga(e,!0):e}function Ha(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ba(t,e,n){e instanceof tu?(t.b=e,function(t,e){e&&!t.f&&(eu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(nu(this,e),iu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ka(e,Za)),t.b=new tu(e,t.a))}function za(t,e,n){t.b.set(e,n)}function Wa(t){return za(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Eo()).toString(36)),t}function Ga(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ka(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Qa),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qa(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fa.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ka(e,$a,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ka(e,$a,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ka(n,"/"==n.charAt(0)?Xa:Ya,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ka(n,Ja)),t.join("")};var $a=/[#\/\?@]/g,Ya=/[#\?:]/g,Xa=/[#\?]/g,Za=/[#\?@]/g,Ja=/#/g;function tu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function eu(t){t.a||(t.a=new Pa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function nu(t,e){eu(t),e=ou(t,e),Ma(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ma((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Da(t)))}function ru(t,e){return eu(t),e=ou(t,e),Ma(t.a.b,e)}function iu(t,e,n){nu(t,e),0<n.length&&(t.c=null,t.a.set(ou(t,e),No(n)),t.b+=n.length)}function ou(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(lo=tu.prototype).add=function(t,e){eu(this),this.c=null,t=ou(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},lo.forEach=function(t,e){eu(this),this.a.forEach(function(n,r){Ao(n,function(n){t.call(e,n,r,this)},this)},this)},lo.L=function(){eu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},lo.K=function(t){eu(this);var e=[];if("string"==typeof t)ru(this,t)&&(e=xo(e,this.a.get(ou(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=xo(e,t[n])}return e},lo.set=function(t,e){return eu(this),this.c=null,ru(this,t=ou(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},lo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},lo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var su=function(){return function(t,e){this.b=t,this.a=e}}();function au(t){this.g=t||uu,t=po.PerformanceNavigationTiming?0<(t=po.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(po.ia&&po.ia.ya&&po.ia.ya()&&po.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var uu=10;function cu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function lu(t){return t.b?1:t.a?t.a.size:0}function hu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function du(t,e){t.a?t.a.add(e):t.b=e}function fu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=co(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return No(t.c)}function gu(){}function yu(){this.a=new gu}function mu(t,e,n){var r=n||"";try{Ra(t,function(t,n){var i=t;mo(t)&&(i=Rs(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(yb){throw e.push(r+"type="+encodeURIComponent("_badmap")),yb}}function vu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}au.prototype.cancel=function(){var t,e;if(this.c=pu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=co(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},gu.prototype.stringify=function(t){return po.JSON.stringify(t,void 0)},gu.prototype.parse=function(t){return po.JSON.parse(t,void 0)};var bu=po.JSON.parse;function _u(t){Ns.call(this),this.headers=new Pa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=wu,this.D=this.F=!1}So(_u,Ns);var wu="",Cu=/^https?$/i,Ou=["POST","PUT"];function Eu(t){return"content-type"==t.toLowerCase()}function Su(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Tu(t),Au(t)}function Tu(t){t.u||(t.u=!0,js(t,"complete"),js(t,"error"))}function Iu(t){if(t.b&&void 0!==fo&&(!t.s[1]||4!=Nu(t)||2!=t.W()))if(t.l&&4==Nu(t))Gs(t.za,0,t);else if(js(t,"readystatechange"),4==Nu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(La)[1]||null;if(!o&&po.self&&po.self.location){var s=po.self.location.protocol;o=s.substr(0,s.length-1)}i=!Cu.test(o?o.toLowerCase():"")}e=i}if(e)js(t,"complete"),js(t,"success");else{t.h=6;try{var a=2<Nu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Tu(t)}}finally{Au(t)}}}function Au(t,e){if(t.a){xu(t);var n=t.a,r=t.s[0]?go:null;t.a=null,t.s=null,e||js(t,"ready");try{n.onreadystatechange=r}catch(yb){}}}function xu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(po.clearTimeout(t.m),t.m=null)}function Nu(t){return t.a?t.a.readyState:0}function ju(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Fo(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):za(t,e,n))}function ku(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ru(t){this.pa=0,this.g=[],this.c=new Js,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ku("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ku("baseRetryDelayMs",5e3,t),this.Ra=ku("retryDelaySeedMs",1e4,t),this.Ma=ku("forwardChannelMaxRetries",2,t),this.ma=ku("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new au(t&&t.concurrentRequestLimit),this.ka=new yu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Pu(t){if(Mu(t),3==t.v){var e=t.R++,n=Va(t.B);za(n,"SID",t.J),za(n,"RID",e),za(n,"TYPE","terminate"),Uu(t,n),(e=new ba(t,t.c,e,void 0)).H=2,e.i=Wa(Va(n)),n=!1,po.navigator&&po.navigator.sendBeacon&&(n=po.navigator.sendBeacon(e.i.toString(),"")),!n&&po.Image&&((new Image).src=e.i,n=!0),n||(e.a=Zu(e.g,null),e.a.ba(e.i)),e.u=Eo(),Ia(e)}Yu(t)}function Du(t){t.a&&(zu(t),t.a.cancel(),t.a=null)}function Mu(t){Du(t),t.j&&(po.clearTimeout(t.j),t.j=null),Gu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&po.clearTimeout(t.h),t.h=null)}function Lu(t,e){t.g.push(new su(t.Oa++,e)),3==t.v&&Fu(t)}function Fu(t){cu(t.b)||t.h||(t.h=!0,Us(t.Ba,t),t.u=0)}function Vu(t,e){var n;n=e?e.f:t.R++;var r=Va(t.B);za(r,"SID",t.J),za(r,"RID",n),za(r,"AID",t.P),Uu(t,r),t.i&&t.l&&ju(r,t.i,t.l),n=new ba(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=qu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),du(t.b,n),Oa(n,r,e)}function Uu(t,e){t.f&&Ra({},function(t,n){za(e,n,t)})}function qu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Co(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{mu(l,s,"req"+c+"_")}catch(Nc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Hu(t){t.a||t.j||(t.T=1,Us(t.Aa,t),t.o=0)}function Bu(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ca(Co(t.Aa,t),Qu(t,t.o)),t.o++,0))}function zu(t){null!=t.s&&(po.clearTimeout(t.s),t.s=null)}function Wu(t){t.a=new ba(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Va(t.la);za(e,"RID","rpc"),za(e,"SID",t.J),za(e,"CI",t.H?"0":"1"),za(e,"AID",t.P),Uu(t,e),za(e,"TYPE","xmlhttp"),t.i&&t.l&&ju(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Wa(Va(e)),n.j=null,n.I=!0,Ea(n,t)}function Gu(t){null!=t.m&&(po.clearTimeout(t.m),t.m=null)}function Ku(t,e){var n=null;if(t.a==e){Gu(t),zu(t),t.a=null;var r=2}else{if(!hu(t.b,e))return;n=e.s,fu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Eo()-e.u;var i=t.u;js(r=ra(),new ua(r,n,e,i)),Fu(t)}else Hu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(lu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ca(Co(t.Ba,t,e),Qu(t,t.u)),t.u++,0)))}(t,e)||2==r&&Bu(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:$u(t,5);break;case 4:$u(t,10);break;case 3:$u(t,6);break;default:$u(t,2)}}function Qu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function $u(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Co(t.Ya,t);n||(n=new Fa("//www.google.com/images/cleardot.gif"),po.location&&"http"==po.location.protocol||Ua(n,"https"),Wa(n)),function(t,e){var n=new Js;if(po.Image){var r=new Image;r.onload=Oo(vu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Oo(vu,n,r,"TestLoadImage: error",!1,e),r.onabort=Oo(vu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oo(vu,n,r,"TestLoadImage: timeout",!1,e),po.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else aa(2);t.v=0,t.f&&t.f.ra(e),Yu(t),Mu(t)}function Yu(t){t.v=0,t.I=-1,t.f&&(0==pu(t.b).length&&0==t.g.length||(t.b.c.length=0,No(t.g),t.g.length=0),t.f.qa())}function Xu(t,e,n){var r=function(t){return t instanceof Fa?Va(t):new Fa(t,void 0)}(n);if(""!=r.c)e&&qa(r,e+"."+r.c),Ha(r,r.h);else{var i=po.location;r=function(t,e,n,r){var i=new Fa(null,void 0);return t&&Ua(i,t),e&&qa(i,e),n&&Ha(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Fo(t.V,function(t,e){za(r,e,t)}),n=t.na,(e=t.A)&&n&&za(r,e,n),za(r,"VER",t.ha),Uu(t,r),r}function Zu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _u(t.Na)).F=t.C,e}function Ju(){}function tc(){if(Go&&!(10<=Number(rs)))throw Error("Environmental error: no available transport.")}function ec(t,e){Ns.call(this),this.a=new Ru(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!jo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ic(this)}function nc(t){ya.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rc(){ma.call(this),this.status=1}function ic(t){this.a=t}(lo=_u.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:pa),this.a.onreadystatechange=Co(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Su(this,o)}t=n||"";var i=new Pa(this.headers);r&&Ra(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Eu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=po.FormData&&t instanceof po.FormData,!(0<=Io(Ou,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xu(this),0<this.o&&((this.D=function(t){return Go&&ns(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Co(this.xa,this)):this.m=Gs(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Su(this,o)}},lo.xa=function(){void 0!==fo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,js(this,"timeout"),this.abort(8))},lo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,js(this,"complete"),js(this,"abort"),Au(this))},lo.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Au(this,!0)),_u.X.G.call(this)},lo.za=function(){this.j||(this.A||this.l||this.g?Iu(this):this.Ua())},lo.Ua=function(){Iu(this)},lo.W=function(){try{return 2<Nu(this)?this.a.status:-1}catch(zo){return-1}},lo.$=function(){try{return this.a?this.a.responseText:""}catch(zo){return""}},lo.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bu(e)}},lo.ua=function(){return this.h},lo.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(lo=Ru.prototype).ha=8,lo.v=1,lo.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ba(this,this.c,t,void 0),r=this.l;if(this.O&&(r?qo(r=Vo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qu(this,n,e),za(i=Va(this.B),"RID",t),za(i,"CVER",22),this.A&&za(i,"X-HTTP-Session-Id",this.A),Uu(this,i),this.i&&r&&ju(i,this.i,r),du(this.b,n),this.Ia&&za(i,"TYPE","init"),this.da?(za(i,"$req",e),za(i,"SID","null"),n.U=!0,Oa(n,i,null)):Oa(n,i,e),this.v=2}}else 3==this.v&&(t?Vu(this,t):0==this.g.length||cu(this.b)||Vu(this))},lo.Aa=function(){if(this.j=null,Wu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ca(Co(this.Ta,this),t)}},lo.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,aa(10),Du(this),Wu(this))},lo.Sa=function(){null!=this.m&&(this.m=null,Du(this),Bu(this),aa(19))},lo.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),aa(2)):(this.c.info("Failed to ping google.com"),aa(1))},(lo=Ju.prototype).ta=function(){},lo.sa=function(){},lo.ra=function(){},lo.qa=function(){},lo.Ja=function(){},tc.prototype.a=function(t,e){return new ec(t,e)},So(ec,Ns),ec.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;aa(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Xu(t,null,t.fa),Fu(t)},ec.prototype.close=function(){Pu(this.a)},ec.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Lu(this.a,e)}else this.l?((e={}).__data__=Rs(t),Lu(this.a,e)):Lu(this.a,t)},ec.prototype.G=function(){this.a.f=null,delete this.f,Pu(this.a),delete this.a,ec.X.G.call(this)},So(nc,ya),So(rc,ma),So(ic,Ju),ic.prototype.ta=function(){js(this.a,"a")},ic.prototype.sa=function(t){js(this.a,new nc(t))},ic.prototype.ra=function(t){js(this.a,new rc(t))},ic.prototype.qa=function(){js(this.a,"b")},tc.prototype.createWebChannel=tc.prototype.a,ec.prototype.send=ec.prototype.h,ec.prototype.open=ec.prototype.g,ec.prototype.close=ec.prototype.close,la.NO_ERROR=0,la.TIMEOUT=8,la.HTTP_ERROR=6,ha.COMPLETE="complete",fa.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",Ns.prototype.listen=Ns.prototype.va,_u.prototype.listenOnce=_u.prototype.wa,_u.prototype.getLastError=_u.prototype.Qa,_u.prototype.getLastErrorCode=_u.prototype.ua,_u.prototype.getStatus=_u.prototype.W,_u.prototype.getResponseJson=_u.prototype.Pa,_u.prototype.getResponseText=_u.prototype.$,_u.prototype.send=_u.prototype.ba;var oc=la,sc=ha,ac=ea,uc=fa,cc=_u,lc=n("mrSG"),hc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();hc.o=-1;var dc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(lc.c)(e,t),e}(Error),pc=new ao.b("@firebase/firestore");function gc(){return pc.logLevel}function yc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pc.logLevel<=ao.a.DEBUG){var r=e.map(bc);pc.debug.apply(pc,Object(lc.f)(["Firestore (8.4.2): "+t],r))}}function mc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pc.logLevel<=ao.a.ERROR){var r=e.map(bc);pc.error.apply(pc,Object(lc.f)(["Firestore (8.4.2): "+t],r))}}function vc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pc.logLevel<=ao.a.WARN){var r=e.map(bc);pc.warn.apply(pc,Object(lc.f)(["Firestore (8.4.2): "+t],r))}}function bc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(yb){return t}}function _c(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+t;throw mc(e),new Error(e)}function wc(t,e){t||_c()}function Cc(t,e){return t}function Oc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ec=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Oc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Sc(t,e){return t<e?-1:t>e?1:0}function Tc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Ic(t){return t+"\0"}var Ac=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new fc(dc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new fc(dc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new fc(dc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fc(dc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Sc(this.nanoseconds,t.nanoseconds):Sc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),xc=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ac(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Nc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Rc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&_c(),void 0===n?n=t.length-e:n>t.length-e&&_c(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Pc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new fc(dc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Rc),Dc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Dc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new fc(dc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new fc(dc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fc(dc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new fc(dc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Rc),Lc=function(){function t(t){this.fields=t,t.sort(Mc.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Tc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Fc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Sc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Fc.EMPTY_BYTE_STRING=new Fc("");var Vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uc(t){if(wc(!!t),"string"==typeof t){var e=0,n=Vc.exec(t);if(wc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:qc(t.seconds),nanos:qc(t.nanos)}}function qc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Hc(t){return"string"==typeof t?Fc.fromBase64String(t):Fc.fromUint8Array(t)}function Bc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zc(t){var e=t.mapValue.fields.__previous_value__;return Bc(e)?zc(e):e}function Wc(t){var e=Uc(t.mapValue.fields.__local_write_time__.timestampValue);return new Ac(e.seconds,e.nanos)}function Gc(t){return null==t}function Kc(t){return 0===t&&1/t==-1/0}function Qc(t){return"number"==typeof t&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var $c=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Pc.fromString(e))},t.fromName=function(e){return new t(Pc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Pc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Pc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Pc(e.slice()))},t}();function Yc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bc(t)?4:10:_c()}function Xc(t,e){var n=Yc(t);if(n!==Yc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wc(t).isEqual(Wc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Uc(t.timestampValue),r=Uc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Hc(t.bytesValue).isEqual(Hc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return qc(t.geoPointValue.latitude)===qc(e.geoPointValue.latitude)&&qc(t.geoPointValue.longitude)===qc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return qc(t.integerValue)===qc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=qc(t.doubleValue),r=qc(e.doubleValue);return n===r?Kc(n)===Kc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Tc(t.arrayValue.values||[],e.arrayValue.values||[],Xc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Nc(n)!==Nc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xc(n[i],r[i])))return!1;return!0}(t,e);default:return _c()}}function Zc(t,e){return void 0!==(t.values||[]).find(function(t){return Xc(t,e)})}function Jc(t,e){var n=Yc(t),r=Yc(e);if(n!==r)return Sc(n,r);switch(n){case 0:return 0;case 1:return Sc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=qc(t.integerValue||t.doubleValue),r=qc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return tl(t.timestampValue,e.timestampValue);case 4:return tl(Wc(t),Wc(e));case 5:return Sc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Hc(t),r=Hc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Sc(n[i],r[i]);if(0!==o)return o}return Sc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Sc(qc(t.latitude),qc(e.latitude));return 0!==n?n:Sc(qc(t.longitude),qc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Jc(n[i],r[i]);if(o)return o}return Sc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Sc(r[s],o[s]);if(0!==a)return a;var u=Jc(n[r[s]],i[o[s]]);if(0!==u)return u}return Sc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw _c()}}function tl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Sc(t,e);var n=Uc(t),r=Uc(e),i=Sc(n.seconds,r.seconds);return 0!==i?i:Sc(n.nanos,r.nanos)}function el(t){return nl(t)}function nl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Uc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hc(t.bytesValue).toBase64():"referenceValue"in t?$c.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=nl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+nl(t.fields[o])}return e+"}"}(t.mapValue):_c();var e}function rl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function il(t){return!!t&&"integerValue"in t}function ol(t){return!!t&&"arrayValue"in t}function sl(t){return!!t&&"nullValue"in t}function al(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ul(t){return!!t&&"mapValue"in t}var cl=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Mc.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Xc(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Yc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=ul(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Mc.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!ul(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function ll(t){var e=[];return jc(t.fields||{},function(t,n){var r=new Mc([t]);if(ul(n)){var i=ll(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Lc(e)}var hl=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,xc.min(),cl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,cl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,cl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=cl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=cl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),dl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function fl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new dl(t,e,n,r,i,o,s)}function pl(t){var e=Cc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+el(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Il(e.startAt)),e.endAt&&(n+="|ub:",n+=Il(e.endAt)),e.h=n}return e.h}function gl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!xl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Xc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jl(t.startAt,e.startAt)&&jl(t.endAt,e.endAt)}function yl(t){return $c.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ml=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(lc.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new vl(t,n,r):"array-contains"===n?new Cl(t,r):"in"===n?new Ol(t,r):"not-in"===n?new El(t,r):"array-contains-any"===n?new Sl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new bl(t,n):new _l(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Jc(e,this.value)):null!==e&&Yc(this.value)===Yc(e)&&this.m(Jc(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return _c()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),vl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=$c.fromName(r.referenceValue),i}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=$c.comparator(t.key,this.key);return this.m(e)},e}(ml),bl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=wl(0,n),r}return Object(lc.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(ml),_l=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=wl(0,n),r}return Object(lc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(ml);function wl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return $c.fromName(t.referenceValue)})}var Cl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return ol(e)&&Zc(e.arrayValue,this.value)},e}(ml),Ol=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Zc(this.value.arrayValue,e)},e}(ml),El=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Zc(this.value.arrayValue,e)},e}(ml),Sl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!ol(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Zc(e.value.arrayValue,t)})},e}(ml),Tl=function(t,e){this.position=t,this.before=e};function Il(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return el(t)}).join(",")}var Al=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function xl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Nl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?$c.comparator($c.fromName(s.referenceValue),n.key):Jc(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function jl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Xc(t.position[n],e.position[n]))return!1;return!0}var kl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Rl(t,e,n,r,i,o,s,a){return new kl(t,e,n,r,i,o,s,a)}function Pl(t){return new kl(t)}function Dl(t){return!Gc(t.limit)&&"F"===t.limitType}function Ml(t){return!Gc(t.limit)&&"L"===t.limitType}function Ll(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Fl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Vl(t){return null!==t.collectionGroup}function Ul(t){var e=Cc(t);if(null===e.p){e.p=[];var n=Fl(e),r=Ll(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Al(n)),e.p.push(new Al(Mc.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Al(Mc.keyField(),u))}}}return e.p}function ql(t){var e=Cc(t);if(!e.T)if("F"===e.limitType)e.T=fl(e.path,e.collectionGroup,Ul(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ul(e);r<i.length;r++){var o=i[r];n.push(new Al(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Tl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Tl(e.startAt.position,!e.startAt.before):null;e.T=fl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Hl(t,e,n){return new kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bl(t,e){return gl(ql(t),ql(e))&&t.limitType===e.limitType}function zl(t){return pl(ql(t))+"|lt:"+t.limitType}function Wl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+el(e.value);var e}).join(", ")+"]"),Gc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Il(t.startAt)),t.endAt&&(e+=", endAt: "+Il(t.endAt)),"Target("+e+")"}(ql(t))+"; limitType="+t.limitType+")"}function Gl(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):$c.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Nl(t.startAt,Ul(t),e)||t.endAt&&Nl(t.endAt,Ul(t),e))}(t,e)}function Kl(t){return function(e,n){for(var r=!1,i=0,o=Ul(t);i<o.length;i++){var s=o[i],a=Ql(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Ql(t,e,n){var r=t.field.isKeyField()?$c.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Jc(r,i):_c()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _c()}}function $l(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function Yl(t){return{integerValue:""+t}}function Xl(t,e){return Qc(e)?Yl(e):$l(t,e)}var Zl=function(){this._=void 0};function Jl(t,e,n){return t instanceof nh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof rh?ih(t,e):t instanceof oh?sh(t,e):function(t,e){var n=eh(t,e),r=uh(n)+uh(t.A);return il(n)&&il(t.A)?Yl(r):$l(t.R,r)}(t,e)}function th(t,e,n){return t instanceof rh?ih(t,e):t instanceof oh?sh(t,e):n}function eh(t,e){return t instanceof ah?il(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e}(Zl),rh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(lc.c)(e,t),e}(Zl);function ih(t,e){for(var n=ch(e),r=function(t){n.some(function(e){return Xc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var oh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(lc.c)(e,t),e}(Zl);function sh(t,e){for(var n=ch(e),r=function(t){n=n.filter(function(e){return!Xc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(lc.c)(e,t),e}(Zl);function uh(t){return qc(t.integerValue||t.doubleValue)}function ch(t){return ol(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var lh=function(t,e){this.field=t,this.transform=e},hh=function(t,e){this.version=t,this.transformResults=e},dh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function fh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ph=function(){};function gh(t,e,n){t instanceof _h?function(t,e,n){var r=t.value.clone(),i=Oh(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof wh?function(t,e,n){if(fh(t.precondition,e)){var r=Oh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ch(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function yh(t,e,n){t instanceof _h?function(t,e,n){if(fh(t.precondition,e)){var r=t.value.clone(),i=Eh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(bh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof wh?function(t,e,n){if(fh(t.precondition,e)){var r=Eh(t.fieldTransforms,n,e),i=e.data;i.setAll(Ch(t)),i.setAll(r),e.convertToFoundDocument(bh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){fh(t.precondition,e)&&e.convertToNoDocument(xc.min())}(t,e)}function mh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=eh(o.transform,s||null);null!=a&&(null==n&&(n=cl.empty()),n.set(o.field,a))}return n||null}function vh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Tc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof rh&&e instanceof rh||t instanceof oh&&e instanceof oh?Tc(t.elements,e.elements,Xc):t instanceof ah&&e instanceof ah?Xc(t.A,e.A):t instanceof nh&&e instanceof nh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function bh(t){return t.isFoundDocument()?t.version:xc.min()}var _h=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(lc.c)(e,t),e}(ph),wh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(lc.c)(e,t),e}(ph);function Ch(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Oh(t,e,n){var r=new Map;wc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,th(s,a,n[i]))}return r}function Eh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Jl(a,u,e))}return r}var Sh,Th,Ih=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(lc.c)(e,t),e}(ph),Ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(lc.c)(e,t),e}(ph),xh=function(t){this.count=t};function Nh(t){switch(t){case dc.OK:return _c();case dc.CANCELLED:case dc.UNKNOWN:case dc.DEADLINE_EXCEEDED:case dc.RESOURCE_EXHAUSTED:case dc.INTERNAL:case dc.UNAVAILABLE:case dc.UNAUTHENTICATED:return!1;case dc.INVALID_ARGUMENT:case dc.NOT_FOUND:case dc.ALREADY_EXISTS:case dc.PERMISSION_DENIED:case dc.FAILED_PRECONDITION:case dc.ABORTED:case dc.OUT_OF_RANGE:case dc.UNIMPLEMENTED:case dc.DATA_LOSS:return!0;default:return _c()}}function jh(t){if(void 0===t)return mc("GRPC error has no .code"),dc.UNKNOWN;switch(t){case Sh.OK:return dc.OK;case Sh.CANCELLED:return dc.CANCELLED;case Sh.UNKNOWN:return dc.UNKNOWN;case Sh.DEADLINE_EXCEEDED:return dc.DEADLINE_EXCEEDED;case Sh.RESOURCE_EXHAUSTED:return dc.RESOURCE_EXHAUSTED;case Sh.INTERNAL:return dc.INTERNAL;case Sh.UNAVAILABLE:return dc.UNAVAILABLE;case Sh.UNAUTHENTICATED:return dc.UNAUTHENTICATED;case Sh.INVALID_ARGUMENT:return dc.INVALID_ARGUMENT;case Sh.NOT_FOUND:return dc.NOT_FOUND;case Sh.ALREADY_EXISTS:return dc.ALREADY_EXISTS;case Sh.PERMISSION_DENIED:return dc.PERMISSION_DENIED;case Sh.FAILED_PRECONDITION:return dc.FAILED_PRECONDITION;case Sh.ABORTED:return dc.ABORTED;case Sh.OUT_OF_RANGE:return dc.OUT_OF_RANGE;case Sh.UNIMPLEMENTED:return dc.UNIMPLEMENTED;case Sh.DATA_LOSS:return dc.DATA_LOSS;default:return _c()}}(Th=Sh||(Sh={}))[Th.OK=0]="OK",Th[Th.CANCELLED=1]="CANCELLED",Th[Th.UNKNOWN=2]="UNKNOWN",Th[Th.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Th[Th.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Th[Th.NOT_FOUND=5]="NOT_FOUND",Th[Th.ALREADY_EXISTS=6]="ALREADY_EXISTS",Th[Th.PERMISSION_DENIED=7]="PERMISSION_DENIED",Th[Th.UNAUTHENTICATED=16]="UNAUTHENTICATED",Th[Th.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Th[Th.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Th[Th.ABORTED=10]="ABORTED",Th[Th.OUT_OF_RANGE=11]="OUT_OF_RANGE",Th[Th.UNIMPLEMENTED=12]="UNIMPLEMENTED",Th[Th.INTERNAL=13]="INTERNAL",Th[Th.UNAVAILABLE=14]="UNAVAILABLE",Th[Th.DATA_LOSS=15]="DATA_LOSS";var kh=function(){function t(t,e){this.comparator=t,this.root=e||Ph.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ph.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ph.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Rh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Rh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Rh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Rh(this.root,t,this.comparator,!0)},t}(),Rh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ph=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw _c();if(this.right.isRed())throw _c();var t=this.left.check();if(t!==this.right.check())throw _c();return t+(this.isRed()?0:1)},t}();Ph.EMPTY=null,Ph.RED=!0,Ph.BLACK=!1,Ph.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw _c()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw _c()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ph(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Dh=function(){function t(t){this.comparator=t,this.data=new kh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Mh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Mh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Mh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Lh=new kh($c.comparator);function Fh(){return Lh}var Vh=new kh($c.comparator);function Uh(){return Vh}var qh=new kh($c.comparator);function Hh(){return qh}var Bh=new Dh($c.comparator);function zh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Bh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Wh=new Dh(Sc);function Gh(){return Wh}var Kh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Qh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(xc.min(),r,Gh(),Fh(),zh())},t}(),Qh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Fc.EMPTY_BYTE_STRING,n,zh(),zh(),zh())},t}(),$h=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Yh=function(t,e){this.targetId=t,this.V=e},Xh=function(t,e,n,r){void 0===n&&(n=Fc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Zh=function(){function t(){this.S=0,this.D=ed(),this.C=Fc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=zh(),e=zh(),n=zh();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:_c()}}),new Qh(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ed()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Jh=function(){function t(t){this.W=t,this.G=new Map,this.H=Fh(),this.J=td(),this.Y=new Dh(Sc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:_c()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(yl(i))if(0===n){var o=new $c(i.path);this.tt(e,o,hl.newNoDocument(o,xc.min()))}else wc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&yl(o.target)){var s=new $c(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,hl.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=zh();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Kh(t,n,this.Y,this.H,r);return this.H=Fh(),this.J=td(),this.Y=new Dh(Sc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Zh,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Dh(Sc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||yc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Zh),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function td(){return new kh($c.comparator)}function ed(){return new kh($c.comparator)}var nd={asc:"ASCENDING",desc:"DESCENDING"},rd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},id=function(t,e){this.databaseId=t,this.I=e};function od(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function sd(t,e){return t.I?e.toBase64():e.toUint8Array()}function ad(t,e){return od(t,e.toTimestamp())}function ud(t){return wc(!!t),xc.fromTimestamp(function(t){var e=Uc(t);return new Ac(e.seconds,e.nanos)}(t))}function cd(t,e){return function(t){return new Pc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ld(t){var e=Pc.fromString(t);return wc(Pd(e)),e}function hd(t,e){return cd(t.databaseId,e.path)}function dd(t,e){var n=ld(e);if(n.get(1)!==t.databaseId.projectId)throw new fc(dc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fc(dc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $c(yd(n))}function fd(t,e){return cd(t.databaseId,e)}function pd(t){var e=ld(t);return 4===e.length?Pc.emptyPath():yd(e)}function gd(t){return new Pc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yd(t){return wc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function md(t,e,n){return{name:hd(t,e),fields:n.toProto().mapValue.fields}}function vd(t,e,n){var r=dd(t,e.name),i=ud(e.updateTime),o=new cl({mapValue:{fields:e.fields}}),s=hl.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function bd(t,e){var n;if(e instanceof _h)n={update:md(t,e.key,e.value)};else if(e instanceof Ih)n={delete:hd(t,e.key)};else if(e instanceof wh)n={update:md(t,e.key,e.data),updateMask:Rd(e.fieldMask)};else{if(!(e instanceof Ah))return _c();n={verify:hd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof nh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ah)return{fieldPath:e.field.canonicalString(),increment:n.A};throw _c()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ad(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:_c()}(t,e.precondition)),n}function _d(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?dh.updateTime(ud(t.updateTime)):void 0!==t.exists?dh.exists(t.exists):dh.none()}(e.currentDocument):dh.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(wc("REQUEST_TIME"===e.setToServerValue),n=new nh):"appendMissingElements"in e?n=new rh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new oh(e.removeAllFromArray.values||[]):"increment"in e?n=new ah(t,e.increment):_c();var r=Mc.fromServerFormat(e.fieldPath);return new lh(r,n)}(t,e)}):[];if(e.update){var i=dd(t,e.update.name),o=new cl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Lc((t.fieldPaths||[]).map(function(t){return Mc.fromServerFormat(t)}))}(e.updateMask);return new wh(i,o,s,n,r)}return new _h(i,o,n,r)}if(e.delete){var a=dd(t,e.delete);return new Ih(a,n)}if(e.verify){var u=dd(t,e.verify);return new Ah(u,n)}return _c()}function wd(t,e){return{documents:[fd(t,e.path)]}}function Cd(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(al(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NAN"}};if(sl(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(al(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NOT_NAN"}};if(sl(t.value))return{unaryFilter:{field:xd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xd(t.field),op:Ad(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:xd(t.field),direction:Id(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Gc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Sd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Sd(e.endAt)),n}function Od(t){var e=pd(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){wc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ed(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Al(Nd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Gc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Td(n.startAt));var l=null;return n.endAt&&(l=Td(n.endAt)),Rl(e,i,a,s,u,"F",c,l)}function Ed(t){return t?void 0!==t.unaryFilter?[kd(t)]:void 0!==t.fieldFilter?[jd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Ed(t)}).reduce(function(t,e){return t.concat(e)}):_c():[]}function Sd(t){return{before:t.before,values:t.position}}function Td(t){return new Tl(t.values||[],!!t.before)}function Id(t){return nd[t]}function Ad(t){return rd[t]}function xd(t){return{fieldPath:t.canonicalString()}}function Nd(t){return Mc.fromServerFormat(t.fieldPath)}function jd(t){return ml.create(Nd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return _c()}}(t.fieldFilter.op),t.fieldFilter.value)}function kd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Nd(t.unaryFilter.field);return ml.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Nd(t.unaryFilter.field);return ml.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Nd(t.unaryFilter.field);return ml.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Nd(t.unaryFilter.field);return ml.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return _c()}}function Rd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Pd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Dd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ld(e)),e=Md(t.get(n),e);return Ld(e)}function Md(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ld(t){return t+"\x01\x01"}function Fd(t){var e=t.length;if(wc(e>=2),2===e)return wc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Pc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&_c(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:_c()}o=s+2}return new Pc(r)}var Vd=function(t,e){this.seconds=t,this.nanoseconds=e},Ud=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ud.store="owner",Ud.key="owner";var qd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};qd.store="mutationQueues",qd.keyPath="userId";var Hd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Hd.store="mutations",Hd.keyPath="batchId",Hd.userMutationsIndex="userMutationsIndex",Hd.userMutationsKeyPath=["userId","batchId"];var Bd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Dd(e)]},t.key=function(t,e,n){return[t,Dd(e),n]},t}();Bd.store="documentMutations",Bd.PLACEHOLDER=new Bd;var zd=function(t,e){this.path=t,this.readTime=e},Wd=function(t,e){this.path=t,this.version=e},Gd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Gd.store="remoteDocuments",Gd.readTimeIndex="readTimeIndex",Gd.readTimeIndexPath="readTime",Gd.collectionReadTimeIndex="collectionReadTimeIndex",Gd.collectionReadTimeIndexPath=["parentPath","readTime"];var Kd=function(t){this.byteSize=t};Kd.store="remoteDocumentGlobal",Kd.key="remoteDocumentGlobalKey";var Qd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Qd.store="targets",Qd.keyPath="targetId",Qd.queryTargetsIndexName="queryTargetsIndex",Qd.queryTargetsKeyPath=["canonicalId","targetId"];var $d=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};$d.store="targetDocuments",$d.keyPath=["targetId","path"],$d.documentTargetsIndex="documentTargetsIndex",$d.documentTargetsKeyPath=["path","targetId"];var Yd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Yd.key="targetGlobalKey",Yd.store="targetGlobal";var Xd=function(t,e){this.collectionId=t,this.parent=e};Xd.store="collectionParents",Xd.keyPath=["collectionId","parent"];var Zd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Zd.store="clientMetadata",Zd.keyPath="clientId";var Jd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Jd.store="bundles",Jd.keyPath="bundleId";var tf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};tf.store="namedQueries",tf.keyPath="name";var ef=Object(lc.f)(Object(lc.f)([],Object(lc.f)(Object(lc.f)([],Object(lc.f)(Object(lc.f)([],Object(lc.f)(Object(lc.f)([],[qd.store,Hd.store,Bd.store,Gd.store,Qd.store,Ud.store,Yd.store,$d.store]),[Zd.store])),[Kd.store])),[Xd.store])),[Jd.store,tf.store]),nf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),of=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},sf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&_c(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),af=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new of,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new lf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=gf(e.target.error);n.ft.reject(new lf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new lf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(yc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new df(e)},t}(),uf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(so.n)())&&mc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return yc("SimpleDb","Removing database:",t),ff(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(so.n)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n=this;return Object(lc.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(yc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new lf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new fc(dc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new lf(t,n))},i.onupgradeneeded=function(t){yc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){yc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(lc.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=af.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),sf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return yc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),cf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ff(this.Pt.delete())},t}(),lf=function(t){function e(e,n){var r=this;return(r=t.call(this,dc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(lc.c)(e,t),e}(fc);function hf(t){return"IndexedDbTransactionError"===t.name}var df=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(yc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(yc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ff(n)},t.prototype.add=function(t){return yc("SimpleDb","ADD",this.store.name,t,t),ff(this.store.add(t))},t.prototype.get=function(t){var e=this;return ff(this.store.get(t)).next(function(n){return void 0===n&&(n=null),yc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return yc("SimpleDb","DELETE",this.store.name,t),ff(this.store.delete(t))},t.prototype.count=function(){return yc("SimpleDb","COUNT",this.store.name),ff(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){yc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new sf(function(n,r){e.onerror=function(t){var e=gf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new sf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new cf(i),s=e(i.primaryKey,i.value,o);if(s instanceof sf){var a=s.catch(function(t){return o.done(),sf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return sf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ff(t){return new sf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=gf(t.target.error);n(e)}})}var pf=!1;function gf(t){var e=uf._t(Object(so.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new fc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pf||(pf=!0,setTimeout(function(){throw r},0)),r}}return t}var yf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(lc.c)(e,t),e}(rf);function mf(t,e){var n=Cc(t);return uf.It(n.Mt,e)}var vf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&gh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&yh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&yh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xc.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},zh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Tc(this.mutations,t.mutations,function(t,e){return vh(t,e)})&&Tc(this.baseMutations,t.baseMutations,function(t,e){return vh(t,e)})},t}(),bf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){wc(e.mutations.length===r.length);for(var i=Hh(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),_f=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=xc.min()),void 0===o&&(o=xc.min()),void 0===s&&(s=Fc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),wf=function(t){this.Lt=t};function Cf(t,e){if(e.document)return vd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=$c.fromSegments(e.noDocument.path),r=If(e.noDocument.readTime),i=hl.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=$c.fromSegments(e.unknownDocument.path);return r=If(e.unknownDocument.version),hl.newUnknownDocument(o,r)}return _c()}function Of(t,e,n){var r=Ef(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:hd(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:od(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Gd(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Tf(e.version);return s=e.hasCommittedMutations,new Gd(null,new zd(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Tf(e.version);return new Gd(new Wd(c,l),null,null,!0,r,i)}return _c()}function Ef(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Sf(t){var e=new Ac(t[0],t[1]);return xc.fromTimestamp(e)}function Tf(t){var e=t.toTimestamp();return new Vd(e.seconds,e.nanoseconds)}function If(t){var e=new Ac(t.seconds,t.nanoseconds);return xc.fromTimestamp(e)}function Af(t,e){for(var n=(e.baseMutations||[]).map(function(e){return _d(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return _d(t.Lt,e)}),o=Ac.fromMillis(e.localWriteTimeMs);return new vf(e.batchId,o,n,i)}function xf(t){var e,n,r=If(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?If(t.lastLimboFreeSnapshotVersion):xc.min();return void 0!==t.query.documents?(wc(1===(n=t.query).documents.length),e=ql(Pl(pd(n.documents[0])))):e=function(t){return ql(Od(t))}(t.query),new _f(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Fc.fromBase64String(t.resumeToken))}function Nf(t,e){var n,r=Tf(e.snapshotVersion),i=Tf(e.lastLimboFreeSnapshotVersion);n=yl(e.target)?wd(t.Lt,e.target):Cd(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Qd(e.targetId,pl(e.target),r,o,e.sequenceNumber,i,n)}function jf(t){var e=Od({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Hl(e,e.limit,"L"):e}var kf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Rf(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:If(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Rf(t).put({bundleId:(n=e).id,createTime:Tf(ud(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Pf(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:jf(e.bundledQuery),readTime:If(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Pf(t).put(function(t){return{name:t.name,readTime:Tf(ud(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Rf(t){return mf(t,Jd.store)}function Pf(t){return mf(t,tf.store)}var Df=function(){function t(){this.Bt=new Mf}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),sf.resolve()},t.prototype.getCollectionParents=function(t,e){return sf.resolve(this.Bt.getEntries(e))},t}(),Mf=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Dh(Pc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Dh(Pc.comparator)).toArray()},t}(),Lf=function(){function t(){this.qt=new Mf}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Dd(i)};return Ff(t).put(o)}return sf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ic(e),""],!1,!0);return Ff(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Fd(o.parent))}return n})},t}();function Ff(t){return mf(t,Xd.store)}var Vf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uf=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function qf(t,e,n){var r=t.store(Hd.store),i=t.store(Bd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){wc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Bd.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return sf.waitFor(o).next(function(){return c})}function Hf(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw _c();e=t.noDocument}return JSON.stringify(e).length}Uf.DEFAULT_COLLECTION_PERCENTILE=10,Uf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uf.DEFAULT=new Uf(41943040,Uf.DEFAULT_COLLECTION_PERCENTILE,Uf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uf.DISABLED=new Uf(-1,0,0);var Bf=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return wc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wf(t).Ot({index:Hd.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Gf(t),s=Wf(t);return s.add({}).next(function(a){wc("number"==typeof a);for(var u=new vf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return bd(t.Lt,e)}),i=n.mutations.map(function(e){return bd(t.Lt,e)});return new Hd(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Dh(function(t,e){return Sc(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Bd.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Bd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),sf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Wf(t).get(e).next(function(t){return t?(wc(t.userId===n.userId),Af(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?sf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Wf(t).Ot({index:Hd.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(wc(e.batchId>=r),o=Af(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wf(t).Ot({index:Hd.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wf(t).Nt(Hd.userMutationsIndex,n).next(function(t){return t.map(function(t){return Af(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Bd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gf(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Fd(r[1]);if(a===n.userId&&e.path.isEqual(c))return Wf(t).get(u).next(function(t){if(!t)throw _c();wc(t.userId===n.userId),o.push(Af(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Dh(Sc),i=[];return e.forEach(function(e){var o=Bd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Gf(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Fd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),sf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Bd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Dh(Sc);return Gf(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Fd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Wf(t).get(e).next(function(t){if(null===t)throw _c();wc(t.userId===n.userId),r.push(Af(n.R,t))}))}),sf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return qf(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),sf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return sf.resolve();var r=IDBKeyRange.lowerBound(Bd.prefixForUser(e.userId)),i=[];return Gf(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Fd(t[1]);i.push(o)}else r.done()}).next(function(){wc(0===i.length)})})},t.prototype.containsKey=function(t,e){return zf(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Kf(t).get(this.userId).next(function(t){return t||new qd(e.userId,-1,"")})},t}();function zf(t,e,n){var r=Bd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gf(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Wf(t){return mf(t,Hd.store)}function Gf(t){return mf(t,Bd.store)}function Kf(t){return mf(t,qd.store)}var Qf=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),$f=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Qf(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return xc.fromTimestamp(new Ac(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Yf(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return wc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Yf(t).Ot(function(s,a){var u=xf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return sf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Yf(t).Ot(function(t,n){var r=xf(n);e(r)})},t.prototype.Xt=function(t){return Xf(t).get(Yd.key).next(function(t){return wc(null!==t),t})},t.prototype.Zt=function(t,e){return Xf(t).put(Yd.key,e)},t.prototype.te=function(t,e){return Yf(t).put(Nf(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=pl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Yf(t).Ot({range:r,index:Qd.queryTargetsIndexName},function(t,n,r){var o=xf(n);gl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Zf(t);return e.forEach(function(e){var s=Dd(e.path);i.push(o.put(new $d(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),sf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Zf(t);return sf.forEach(e,function(e){var o=Dd(e.path);return sf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Zf(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Zf(t),i=zh();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Fd(t[1]),o=new $c(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Dd(e.path),r=IDBKeyRange.bound([n],[Ic(n)],!1,!0),i=0;return Zf(t).Ot({index:$d.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Yf(t).get(e).next(function(t){return t?xf(t):null})},t}();function Yf(t){return mf(t,Qd.store)}function Xf(t){return mf(t,Yd.store)}function Zf(t){return mf(t,$d.store)}function Jf(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){if(t.code!==dc.FAILED_PRECONDITION||t.message!==nf)throw t;return yc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function tp(t,e){var n=t[1],r=e[1],i=Sc(t[0],e[0]);return 0===i?Sc(n,r):i}var ep=function(){function t(t){this.ne=t,this.buffer=new Dh(tp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();tp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),np=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;yc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(lc.b)(e,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return hf(e=n.sent())?(yc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Jf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),rp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return sf.resolve(hc.o);var r=new ep(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(yc("LruGarbageCollector","Garbage collection skipped; disabled"),sf.resolve(Vf)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(yc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Vf):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(yc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),gc()<=ao.a.DEBUG&&yc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),sf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),ip=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new rp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return op(t,n)},t.prototype.removeReference=function(t,e,n){return op(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return op(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Kf(t).$t(function(r){return zf(t,r,e).next(function(t){return t&&(n=!0),sf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Zf(t).delete([0,Dd(s.path)])})});i.push(u)}}).next(function(){return sf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return op(t,e)},t.prototype.we=function(t,e){var n,r=Zf(t),i=hc.o;return r.Ot({index:$d.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==hc.o&&e(new $c(Fd(n)),i),i=s,n=o):i=hc.o}).next(function(){i!==hc.o&&e(new $c(Fd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function op(t,e){return Zf(t).put(function(t,e){return new $d(0,Dd(t.path),e)}(e,t.currentSequenceNumber))}var sp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){jc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return kc(this.inner)},t}(),ap=function(){function t(){this.changes=new sp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:xc.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:hl.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?sf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),up=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return hp(t).put(dp(e),n)},t.prototype.removeEntry=function(t,e){var n=hp(t),r=dp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return hp(t).get(dp(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return hp(t).get(dp(e)).next(function(t){return{document:n.ye(e,t),size:Hf(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Fh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Fh(),i=new kh($c.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Hf(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return sf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return hp(t).Ot({range:r},function(t,e,r){for(var s=$c.fromSegments(t);o&&$c.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Fh(),o=e.path.length+1,s={};if(n.isEqual(xc.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ef(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Gd.collectionReadTimeIndex}return hp(t).Ot(s,function(t,n,s){if(t.length===o){var a=Cf(r.R,n);e.path.isPrefixOf(a.key.path)?Gl(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new cp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return lp(t).get(Kd.key).next(function(t){return wc(!!t),t})},t.prototype.me=function(t,e){return lp(t).put(Kd.key,e)},t.prototype.ye=function(t,e){if(e){var n=Cf(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(xc.min()))return n}return hl.newInvalidDocument(t)},t}(),cp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new sp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(lc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Dh(function(t,e){return Sc(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Of(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Hf(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Of(e.Ie.R,hl.newNoDocument(o,xc.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),sf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(ap);function lp(t){return mf(t,Kd.store)}function hp(t){return mf(t,Gd.store)}function dp(t){return t.path.toArray()}var fp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;wc(n<r&&n>=0&&r<=11);var o=new af("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ud.store)}(t),function(t){t.createObjectStore(qd.store,{keyPath:qd.keyPath}),t.createObjectStore(Hd.store,{keyPath:Hd.keyPath,autoIncrement:!0}).createIndex(Hd.userMutationsIndex,Hd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Bd.store)}(t),pp(t),function(t){t.createObjectStore(Gd.store)}(t));var s=sf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore($d.store),t.deleteObjectStore(Qd.store),t.deleteObjectStore(Yd.store)}(t),pp(t)),s=s.next(function(){return function(t){var e=t.store(Yd.store),n=new Yd(0,0,xc.min().toTimestamp(),0);return e.put(Yd.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Hd.store).Nt().next(function(n){t.deleteObjectStore(Hd.store),t.createObjectStore(Hd.store,{keyPath:Hd.keyPath,autoIncrement:!0}).createIndex(Hd.userMutationsIndex,Hd.userMutationsKeyPath,{unique:!0});var r=e.store(Hd.store),i=n.map(function(t){return r.put(t)});return sf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Zd.store,{keyPath:Zd.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Kd.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Gd.store);e.createIndex(Gd.readTimeIndex,Gd.readTimeIndexPath,{unique:!1}),e.createIndex(Gd.collectionReadTimeIndex,Gd.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Jd.store,{keyPath:Jd.keyPath})}(t),function(t){t.createObjectStore(tf.store,{keyPath:tf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Gd.store).Ot(function(t,n){e+=Hf(n)}).next(function(){var n=new Kd(e);return t.store(Kd.store).put(Kd.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(qd.store),r=t.store(Hd.store);return n.Nt().next(function(n){return sf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Hd.userMutationsIndex,i).next(function(r){return sf.forEach(r,function(r){wc(r.userId===n.userId);var i=Af(e.R,r);return qf(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store($d.store),n=t.store(Gd.store);return t.store(Yd.store).get(Yd.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Pc(n),s=function(t){return[0,Dd(t)]}(o);r.push(e.get(s).next(function(n){return n?sf.resolve():function(n){return e.put(new $d(0,Dd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return sf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Xd.store,{keyPath:Xd.keyPath});var n=e.store(Xd.store),r=new Mf,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Dd(i)})}};return e.store(Gd.store).Ot({kt:!0},function(t,e){var n=new Pc(t);return i(n.popLast())}).next(function(){return e.store(Bd.store).Ot({kt:!0},function(t,e){var n=Fd(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Qd.store);return n.Ot(function(t,r){var i=xf(r),o=Nf(e.R,i);return n.put(o)})},t}();function pp(t){t.createObjectStore($d.store,{keyPath:$d.keyPath}).createIndex($d.documentTargetsIndex,$d.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Qd.store,{keyPath:Qd.keyPath}).createIndex(Qd.queryTargetsIndexName,Qd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yd.store)}var gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new fc(dc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ip(this,i),this.Le=n+"main",this.R=new wf(u),this.Be=new uf(this.Le,11,new fp(this.R)),this.qe=new $f(this.referenceDelegate,this.R),this.Ut=new Lf,this.Ue=function(t,e){return new up(t,e)}(this.R,this.Ut),this.Qe=new kf,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&mc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new fc(dc.FAILED_PRECONDITION,gp);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new hc(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return vp(e).put(new Zd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(hf(e))return yc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return yc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return mp(t).get(Ud.key).next(function(t){return sf.resolve(e.tn(t))})},t.prototype.en=function(t){return vp(t).delete(this.clientId)},t.prototype.nn=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(lc.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=mf(t,Zd.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return sf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?sf.resolve(!0):mp(t).get(Ud.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new fc(dc.FAILED_PRECONDITION,gp);return!1}}return!(!e.networkEnabled||!e.inForeground)||vp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&yc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(lc.b)(this,void 0,void 0,function(){var t=this;return Object(lc.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ud.store,Zd.store],function(e){var n=new yf(e,hc.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return vp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Bf.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return yc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",ef,function(o){return r=new yf(o,i.Ne?i.Ne.next():hc.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw mc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new fc(dc.FAILED_PRECONDITION,nf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return mp(t).get(Ud.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new fc(dc.FAILED_PRECONDITION,gp)})},t.prototype.Ze=function(t){var e=new Ud(this.clientId,this.allowTabSynchronization,Date.now());return mp(t).put(Ud.key,e)},t.yt=function(){return uf.yt()},t.prototype.Xe=function(t){var e=this,n=mp(t);return n.get(Ud.key).next(function(t){return e.tn(t)?(yc("IndexedDbPersistence","Releasing primary lease."),n.delete(Ud.key)):sf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(mc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return yc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return mc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){mc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function mp(t){return mf(t,Ud.store)}function vp(t){return mf(t,Zd.store)}function bp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var _p=function(t,e){this.progress=t,this.wn=e},wp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return $c.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Vl(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new $c(e)).next(function(t){var e=Uh();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Uh();return this.Ut.getCollectionParents(t,i).next(function(s){return sf.forEach(s,function(s){var a=function(t,e){return new kl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=hl.newInvalidDocument(c),r=r.insert(c,l)),yh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Gl(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=zh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof wh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Cp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=zh(),i=zh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Op=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(xc.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Dl(e)||Ml(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(gc()<=ao.a.DEBUG&&yc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Wl(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Dh(Kl(t));return e.forEach(function(e,r){Gl(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return gc()<=ao.a.DEBUG&&yc("QueryEngine","Using full collection scan to execute query:",Wl(e)),this.Sn.getDocumentsMatchingQuery(t,e,xc.min())},t}(),Ep=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new kh(Sc),this.kn=new sp(function(t){return pl(t)},gl),this.On=xc.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new wp(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Sp(t,e,n,r){return new Ep(t,e,n,r)}function Tp(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:return n=Cc(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new wp(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=zh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Ip(t,e){var n=Cc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=sf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);wc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Ap(t){var e=Cc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function xp(t,e){var n=Cc(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return wc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Fh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Np(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(xc.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return sf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Np(t,e,n,r,i){var o=zh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Fh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(xc.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):yc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function jp(t,e){var n=Cc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function kp(t,e){var n=Cc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?sf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new _f(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Rp(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:r=Cc(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!hf(s=a.sent()))throw s;return yc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Pp(t,e,n){var r=Cc(t),i=xc.min(),o=zh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Cc(t),i=r.kn.get(n);return void 0!==i?sf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,ql(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:xc.min(),n?o:zh())}).next(function(t){return{documents:t,Bn:o}})})}function Dp(t,e){var n=Cc(t),r=Cc(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Mp(t){var e=Cc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Cc(t),i=Fh(),o=Ef(n),s=hp(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Gd.readTimeIndex,range:a},function(t,e){var n=Cf(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Sf(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Lp(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){return[2,(e=Cc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=hp(t),n=xc.min();return e.Ot({index:Gd.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Sf(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Fp(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(lc.d)(this,function(p){switch(p.label){case 0:for(i=Cc(t),o=zh(),s=Fh(),a=Hh(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,kp(i,function(t){return ql(Pl(Pc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Np(t,d,s,xc.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function Vp(t,e,n){return void 0===n&&(n=zh()),Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return[4,kp(t,ql(jf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Cc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=ud(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Fc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var Up=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return sf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:ud(n.createTime)}),sf.resolve()},t.prototype.getNamedQuery=function(t,e){return sf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:jf(t.bundledQuery),readTime:ud(t.readTime)}}(e)),sf.resolve()},t}(),qp=function(){function t(){this.Wn=new Dh(Hp.Gn),this.zn=new Dh(Hp.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Hp(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Hp(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new $c(new Pc([])),r=new Hp(n,t),i=new Hp(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new $c(new Pc([])),n=new Hp(e,t),r=new Hp(e,t+1),i=zh();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Hp(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Hp=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return $c.comparator(t.key,e.key)||Sc(t.ns,e.ns)},t.Hn=function(t,e){return Sc(t.ns,e.ns)||$c.comparator(t.key,e.key)},t}(),Bp=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Dh(Hp.Gn)}return t.prototype.checkEmpty=function(t){return sf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new vf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Hp(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return sf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return sf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return sf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return sf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return sf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Hp(e,0),i=new Hp(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),sf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Dh(Sc);return e.forEach(function(t){var e=new Hp(t,0),i=new Hp(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),sf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;$c.isDocumentKey(i)||(i=i.child(""));var o=new Hp(new $c(i),0),s=new Dh(Sc);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),sf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;wc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return sf.forEach(e.mutations,function(i){var o=new Hp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Hp(e,0),r=this.rs.firstAfterOrEqual(n);return sf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return sf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),zp=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new kh($c.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return sf.resolve(n?n.document.clone():hl.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Fh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():hl.newInvalidDocument(t))}),sf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Fh(),i=new $c(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Gl(e,u)&&(r=r.insert(u.key,u.clone()))}return sf.resolve(r)},t.prototype.fs=function(t,e){return sf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Wp(this)},t.prototype.getSize=function(t){return sf.resolve(this.size)},t}(),Wp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(lc.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),sf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ap),Gp=function(){function t(t){this.persistence=t,this.ds=new sp(function(t){return pl(t)},gl),this.lastRemoteSnapshotVersion=xc.min(),this.highestTargetId=0,this.ws=0,this._s=new qp,this.targetCount=0,this.ys=Qf.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),sf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return sf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return sf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),sf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),sf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Qf(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,sf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),sf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,sf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),sf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return sf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return sf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),sf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),sf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),sf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return sf.resolve(n)},t.prototype.containsKey=function(t,e){return sf.resolve(this._s.containsKey(e))},t}(),Kp=function(){function t(t,e){var n=this;this.gs={},this.Ne=new hc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Gp(this),this.Ut=new Df,this.Ue=function(t,e){return new zp(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new wf(e),this.Qe=new Up(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Bp(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;yc("MemoryPersistence","Starting transaction:",t);var i=new Qp(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return sf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Qp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(lc.c)(e,t),e}(rf),$p=function(){function t(t){this.persistence=t,this.As=new qp,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw _c()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),sf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),sf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),sf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sf.forEach(this.vs,function(r){var i=$c.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return sf.or([function(){return sf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Yp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Xp(t,e){return"firestore_clients_"+t+"_"+e}function Zp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Jp(t,e){return"firestore_targets_"+t+"_"+e}Yp.UNAUTHENTICATED=new Yp(null),Yp.GOOGLE_CREDENTIALS=new Yp("google-credentials-uid"),Yp.FIRST_PARTY=new Yp("first-party-uid");var tg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new fc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(mc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),eg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new fc(i.error.code,i.error.message)),o?new t(e,i.state,r):(mc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ng=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Gh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Qc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(mc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),rg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(mc("SharedClientState","Failed to parse online state: "+e),null)},t}(),ig=function(){function t(){this.activeTargetIds=Gh()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),og=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new kh(Sc),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Xp(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new ig),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(lc.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Xp(this.persistenceKey,r)))&&(o=ng.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Jp(this.persistenceKey,t));if(n){var r=eg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Jp(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return yc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){yc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){yc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(yc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void mc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(lc.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(lc.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=hc.o;if(null!=t)try{var n=JSON.parse(t);wc("number"==typeof n),e=n}catch(t){mc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==hc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new tg(this.currentUser,t,e,n),i=Zp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Zp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Jp(this.persistenceKey,t),i=new eg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return ng.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return tg.Vs(new Yp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return eg.Vs(r,e)},t.prototype.js=function(t){return rg.Vs(t)},t.prototype.ii=function(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(yc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Gh();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),sg=function(){function t(){this.li=new ig,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new ig,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),ag=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),ug=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){yc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){yc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),cg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},lg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),hg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(lc.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new cc;s.listenOnce(sc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case oc.NO_ERROR:var e=s.getResponseJson();yc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case oc.TIMEOUT:yc("Connection",'RPC "'+t+'" timed out'),o(new fc(dc.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:var n=s.getStatus();if(yc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(dc).indexOf(e)>=0?e:dc.UNKNOWN}(r.status);o(new fc(a,r.message))}else o(new fc(dc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fc(dc.UNAVAILABLE,"Connection failed."));break;default:_c()}}finally{yc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tc,i=ra(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(so.u)()||Object(so.x)()||Object(so.r)()||Object(so.t)()||Object(so.y)()||Object(so.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");yc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new lg({Ei:function(t){c?yc("Connection","Not sending because WebChannel is closed:",t):(u||(yc("Connection","Opening WebChannel transport."),a.open(),u=!0),yc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,uc.EventType.OPEN,function(){c||yc("Connection","WebChannel transport opened.")}),h(a,uc.EventType.CLOSE,function(){c||(c=!0,yc("Connection","WebChannel transport closed"),l.Vi())}),h(a,uc.EventType.ERROR,function(t){c||(c=!0,vc("Connection","WebChannel transport errored:",t),l.Vi(new fc(dc.UNAVAILABLE,"The operation could not be completed")))}),h(a,uc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];wc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){yc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Sh[t];if(void 0!==e)return jh(e)}(i),s=r.message;void 0===o&&(o=dc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new fc(o,s)),a.close()}else yc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,ac.STAT_EVENT,function(t){10===t.stat?yc("Connection","Detected buffering proxy"):11===t.stat&&yc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);yc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return yc("RestConnection","Received: ",t),t},function(e){throw vc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+cg[t]},t}());function dg(){return"undefined"!=typeof window?window:null}function fg(){return"undefined"!=typeof document?document:null}function pg(t){return new id(t,!0)}var gg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&yc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),yg=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new gg(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===dc.RESOURCE_EXHAUSTED?(mc(e.toString()),mc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===dc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new fc(dc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(lc.b)(t,void 0,void 0,function(){return Object(lc.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return yc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(yc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),mg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(lc.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:_c()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(wc(void 0===e||"string"==typeof e),Fc.fromBase64String(e||"")):(wc(void 0===e||e instanceof Uint8Array),Fc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?dc.UNKNOWN:jh(t.code);return new fc(e,t.message||"")}(a);n=new Xh(r,i,o,s||null)}else if("documentChange"in e){i=dd(t,(r=e.documentChange).document.name),o=ud(r.document.updateTime);var a=new cl({mapValue:{fields:r.document.fields}}),u=(s=hl.newFoundDocument(i,o,a),r.targetIds||[]);n=new $h(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=dd(t,(r=e.documentDelete).document),o=r.readTime?ud(r.readTime):xc.min(),a=hl.newNoDocument(i,o),n=new $h([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=dd(t,(r=e.documentRemove).document),n=new $h([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return _c();var c=e.filter;i=new xh(r=c.count||0),n=new Yh(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return xc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?xc.min():e.readTime?ud(e.readTime):xc.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=gd(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=yl(r)?{documents:wd(t,r)}:{query:Cd(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=sd(t,e.resumeToken):e.snapshotVersion.compareTo(xc.min())>0&&(n.readTime=od(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return _c()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=gd(this.R),e.removeTarget=t,this.cr(e)},e}(yg),vg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(wc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(wc(void 0!==e),t.map(function(t){return function(t,e){var n=ud(t.updateTime?t.updateTime:e);return n.isEqual(xc.min())&&(n=ud(e)),new hh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=ud(t.commitTime);return this.listener.Tr(n,e)}return wc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=gd(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return bd(e.R,t)})};this.cr(n)},e}(yg),bg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(lc.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new fc(dc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===dc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new fc(dc.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===dc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new fc(dc.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),_g=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(mc(e),this.Vr=!1):yc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),wg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(lc.b)(o,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return Ng(this)?(yc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return(e=Cc(t)).$r.add(4),[4,Og(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Cg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new _g(n,r)};function Cg(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:if(!Ng(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Og(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Eg(t,e){var n=Cc(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),xg(n)?Ag(n):Wg(n).er()&&Tg(n,e))}function Sg(t,e){var n=Cc(t),r=Wg(n);n.Or.delete(e),r.er()&&Ig(n,e),0===n.Or.size&&(r.er()?r.ir():Ng(n)&&n.Br.set("Unknown"))}function Tg(t,e){t.qr.U(e.targetId),Wg(t).mr(e)}function Ig(t,e){t.qr.U(e),Wg(t).yr(e)}function Ag(t){t.qr=new Jh({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Wg(t).start(),t.Br.Sr()}function xg(t){return Ng(t)&&!Wg(t).tr()&&t.Or.size>0}function Ng(t){return 0===Cc(t).$r.size}function jg(t){t.qr=void 0}function kg(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){return t.Or.forEach(function(e,n){Tg(t,e)}),[2]})})}function Rg(t,e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){return jg(t),xg(t)?(t.Br.Nr(e),Ag(t)):t.Br.set("Unknown"),[2]})})}function Pg(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Xh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),yc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Dg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof $h?t.qr.X(e):e instanceof Yh?t.qr.rt(e):t.qr.et(e),n.isEqual(xc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ap(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Fc.EMPTY_BYTE_STRING,n.snapshotVersion)),Ig(t,e);var r=new _f(n.target,e,1,n.sequenceNumber);Tg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return yc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Dg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Dg(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r=this;return Object(lc.d)(this,function(i){switch(i.label){case 0:if(!hf(e))throw e;return t.$r.add(1),[4,Og(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ap(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(lc.b)(r,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return yc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Cg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Mg(t,e){return e().catch(function(n){return Dg(t,n,e)})}function Lg(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:e=Cc(t),n=Gg(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ng(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,jp(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Gg(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Dg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Fg(e)&&Vg(e),[2]}})})}function Fg(t){return Ng(t)&&!Gg(t).tr()&&t.kr.length>0}function Vg(t){Gg(t).start()}function Ug(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){return Gg(t).Ar(),[2]})})}function qg(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n,r;return Object(lc.d)(this,function(i){for(e=Gg(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Hg(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=bf.from(r,e,n),[4,Mg(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Lg(t)];case 2:return o.sent(),[2]}})})}function Bg(t,e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){switch(n.label){case 0:return e&&Gg(t).pr?[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return Nh(r=e.code)&&r!==dc.ABORTED?(n=t.kr.shift(),Gg(t).sr(),[4,Mg(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Lg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Fg(t)&&Vg(t),[2]}})})}function zg(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return n=Cc(t),e?(n.$r.delete(2),[4,Cg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,Og(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Wg(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Cc(t);return r.br(),new mg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:kg.bind(null,t),Ri:Rg.bind(null,t),_r:Pg.bind(null,t)}),t.Mr.push(function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),xg(t)?Ag(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),jg(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Gg(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Cc(t);return r.br(),new vg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ug.bind(null,t),Ri:Bg.bind(null,t),Ir:qg.bind(null,t),Tr:Hg.bind(null,t)}),t.Mr.push(function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Lg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(yc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Kg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new of,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fc(dc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Qg(t,e){if(mc("AsyncQueue",e+": "+t),hf(t))return new fc(dc.UNAVAILABLE,e+": "+t);throw t}var $g=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||$c.comparator(e.key,n.key)}:function(t,e){return $c.comparator(t.key,e.key)},this.keyedMap=Uh(),this.sortedSet=new kh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Yg=function(){function t(){this.Kr=new kh($c.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):_c():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Xg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,$g.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Zg=function(){this.Wr=void 0,this.listeners=[]},Jg=function(){this.queries=new sp(function(t){return zl(t)},Bl),this.onlineState="Unknown",this.Gr=new Set};function ty(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:if(n=Cc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Zg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Qg(a,"Initialization of query '"+Wl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&iy(n),[2]}})})}function ey(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(lc.d)(this,function(a){return n=Cc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function ny(t,e){for(var n=Cc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&iy(n)}function ry(t,e,n){var r=Cc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function iy(t){t.Gr.forEach(function(t){t.next()})}var oy=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Xg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Xg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),sy=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ay=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return dd(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?vd(this.R,t.document,!1):hl.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return ud(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new ay(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||zh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return[4,Fp(this.localStore,new ay(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Vp(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new _p(Object.assign({},this.progress),t))]}})})}}();var uy=function(t){this.key=t},cy=function(t){this.key=t},ly=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=zh(),this.mutatedKeys=zh(),this.lo=Kl(t),this.fo=new $g(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Yg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Dl(this.query)&&i.size===this.query.limit?i.last():null,c=Ml(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Gl(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Dl(this.query)||Ml(this.query))for(;s.size>this.query.limit;){var l=Dl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _c()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Xg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Yg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=zh(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new cy(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new uy(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=zh();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Xg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),hy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},dy=function(t){this.key=t,this.bo=!1},fy=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new sp(function(t){return zl(t)},Bl),this.Vo=new Map,this.So=new Set,this.Do=new kh($c.comparator),this.Co=new Map,this.No=new qp,this.xo={},this.Fo=new Map,this.ko=Qf.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function py(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return n=By(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,kp(n.localStore,ql(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,gy(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Eg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function gy(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(lc.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Pp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Ay(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Pp(t.localStore,e,!0)];case 1:return i=l.sent(),o=new ly(e,i.Bn),s=o._o(i.documents),a=Qh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Ay(t,n,u.To),c=new hy(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function yy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return n=Cc(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Bl(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Rp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Sg(n.remoteStore,r.targetId),Ty(n,r.targetId)}).catch(Jf)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ty(n,r.targetId),[4,Rp(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function my(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:r=zy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Cc(t),i=Ac.now(),o=e.reduce(function(t,e){return t.add(e.key)},zh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=mh(c,n.get(c.key));null!=l&&s.push(new wh(c.key,l,ll(l.toProto().mapValue),dh.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new kh(Sc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,jy(r,i.changes)];case 3:return a.sent(),[4,Lg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Qg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function vy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:n=Cc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,xp(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(wc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?wc(r.bo):t.removedDocuments.size>0&&(wc(r.bo),r.bo=!1))}),[4,jy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Jf(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function by(t,e,n){var r=Cc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Cc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&iy(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _y(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:return(r=Cc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new kh($c.comparator)).insert(o,hl.newNoDocument(o,xc.min())),a=zh().add(o),u=new Kh(xc.min(),new Map,new Dh(Sc),s,a),[4,vy(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Ny(r),[3,4];case 2:return[4,Rp(r.localStore,e,!1).then(function(){return Ty(r,e,n)}).catch(Jf)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function wy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:n=Cc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ip(n.localStore,e)];case 2:return i=o.sent(),Sy(n,r,null),Ey(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,jy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Cy(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:r=Cc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Cc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return wc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Sy(r,e,n),Ey(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,jy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jf(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Oy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:Ng((n=Cc(t)).remoteStore)||yc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Cc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Qg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Ey(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Sy(t,e,n){var r=Cc(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ty(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Iy(t,e)})}function Iy(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Sg(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ny(t))}function Ay(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof uy?(t.No.addReference(o.key,e),xy(t,o)):o instanceof cy?(yc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Iy(t,o.key)):_c()}}function xy(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(yc("SyncEngine","New document in limbo: "+n),t.So.add(r),Ny(t))}function Ny(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new $c(Pc.fromString(e)),r=t.ko.next();t.Co.set(r,new dy(n)),t.Do=t.Do.insert(n,r),Eg(t.remoteStore,new _f(ql(Pl(n.path)),r,2,hc.o))}}function jy(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return r=Cc(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Cp.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(lc.d)(this,function(l){switch(l.label){case 0:n=Cc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return sf.forEach(e,function(e){return sf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return sf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!hf(r=l.sent()))throw r;return yc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function ky(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return(n=Cc(t)).currentUser.isEqual(e)?[3,3]:(yc("SyncEngine","User change. New user:",e.toKey()),[4,Tp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new fc(dc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,jy(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Ry(t,e){var n=Cc(t),r=n.Co.get(e);if(r&&r.bo)return zh().add(r.key);var i=zh(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Py(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return[4,Pp((n=Cc(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Ay(n,e.targetId,i.To),i)]}})})}function Dy(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){return[2,Mp((e=Cc(t)).localStore).then(function(t){return jy(e,t)})]})})}function My(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Cc(t),r=Cc(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):sf.resolve(null)})})}((i=Cc(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Lg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Sy(i,e,r||null),Ey(i,e),function(t,e){Cc(Cc(t)._n).Gt(e)}(i.localStore,e)):_c(),s.label=4;case 4:return[4,jy(i,o)];case 5:return s.sent(),[3,7];case 6:yc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Ly(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:return By(n=Cc(t)),zy(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Fy(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,zg(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Eg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Ty(n,e),Rp(n.localStore,e,!0)}),Sg(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Fy(n,a)];case 5:return c.sent(),function(t){var e=Cc(t);e.Co.forEach(function(t,n){Sg(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new kh($c.comparator)}(n),n.Oo=!1,[4,zg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Fy(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(lc.d)(this,function(g){switch(g.label){case 0:n=Cc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,kp(n.localStore,ql(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Py(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Dp(n.localStore,a)];case 8:return p=g.sent(),[4,kp(n.localStore,p)];case 9:return u=g.sent(),[4,gy(n,Vy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Vy(t){return Rl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Uy(t){var e=Cc(t);return Cc(Cc(e.localStore).persistence).fn()}function qy(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return(i=Cc(t)).Oo?(yc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Mp(i.localStore)];case 3:return o=a.sent(),s=Kh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,jy(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Rp(i.localStore,e,!0)];case 6:return a.sent(),Ty(i,e,r),[3,8];case 7:_c(),a.label=8;case 8:return[2]}})})}function Hy(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(lc.d)(this,function(d){switch(d.label){case 0:if(!(r=By(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(yc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Dp(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,kp(r.localStore,a)];case 3:return u=d.sent(),[4,gy(r,Vy(a),u.targetId,!1)];case 4:d.sent(),Eg(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(lc.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Rp(r.localStore,t,!1).then(function(){Sg(r.remoteStore,t),Ty(r,t)}).catch(Jf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function By(t){var e=Cc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ry.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_y.bind(null,e),e.vo._r=ny.bind(null,e.eventManager),e.vo.Mo=ry.bind(null,e.eventManager),e}function zy(t){var e=Cc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wy.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Cy.bind(null,e),e}var Wy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return this.R=pg(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Sp(this.persistence,new Op,t.initialUser,this.R)},t.prototype.qo=function(t){return new Kp($p.bs,this.R)},t.prototype.Bo=function(t){return new sg},t.prototype.terminate=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Gy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(lc.c)(e,t),e.prototype.initialize=function(e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Lp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,zy(this.Ko.syncEngine)];case 4:return n.sent(),[4,Lg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Sp(this.persistence,new Op,t.initialUser,this.R)},e.prototype.Uo=function(t){return new np(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Uf.withCacheSize(this.cacheSizeBytes):Uf.DEFAULT;return new yp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,dg(),fg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new sg},e}(Wy),Ky=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(lc.c)(e,t),e.prototype.initialize=function(e){return Object(lc.b)(this,void 0,void 0,function(){var n,r=this;return Object(lc.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof og?(this.sharedClientState.syncEngine={ui:My.bind(null,n),ai:qy.bind(null,n),hi:Hy.bind(null,n),fn:Uy.bind(null,n),ci:Dy.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(lc.b)(r,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return[4,Ly(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=dg();if(!og.yt(e))throw new fc(dc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new og(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Gy),Qy=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n=this;return Object(lc.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return by(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ky.bind(null,this.syncEngine),[4,zg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Jg},t.prototype.createDatastore=function(t){var e=pg(t.databaseInfo.databaseId),n=new hg(t.databaseInfo);return function(t,e,n){return new bg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return by(s.syncEngine,t,0)},o=ug.yt()?new ug:new ag,new wg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new fy(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=Cc(t),yc("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,Og(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),$y=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Yy=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new of,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new sy(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n=this;return Object(lc.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new fc(dc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(lc.d)(this,function(u){switch(u.label){case 0:return n=Cc(t),r=gd(n.R)+"/documents",i={documents:e.map(function(t){return hd(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){wc(!!e.found);var n=dd(t,e.found.name),r=ud(e.found.updateTime),i=new cl({mapValue:{fields:e.found.fields}});return hl.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){wc(!!e.missing),wc(!!e.readTime);var n=dd(t,e.missing),r=ud(e.readTime);return hl.newNoDocument(n,r)}(t,e):_c()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());wc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ih(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e=this;return Object(lc.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=$c.fromPath(n);e.mutations.push(new Ah(r,e.precondition(r)))}),[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return n=Cc(t),r=gd(n.R)+"/documents",i={writes:e.map(function(t){return bd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw _c();e=xc.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new fc(dc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?dh.updateTime(e):dh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(xc.min()))throw new fc(dc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dh.updateTime(e)}return dh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Xy=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new gg(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(lc.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(lc.d)(this,function(r){return t=new Yy(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Gc(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Nh(e)}return!1},t}(),Zy=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Yp.UNAUTHENTICATED,this.clientId=Ec.u(),this.credentialListener=function(){},this.receivedInitialUser=new of,this.credentials.setChangeListener(function(t){yc("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new fc(dc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new of;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(lc.b)(t,void 0,void 0,function(){var t,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Qg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Jy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(lc.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),yc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(lc.b)(i,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return[4,Tp(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function tm(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,em(t)];case 1:return n=i.sent(),yc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return(n=Cc(t)).asyncQueue.verifyOperationInProgress(),yc("RemoteStore","RemoteStore received new credentials"),r=Ng(n),n.$r.add(3),[4,Og(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Cg(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function em(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(yc("FirestoreClient","Using default OfflineComponentProvider"),[4,Jy(t,new Wy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function nm(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(yc("FirestoreClient","Using default OnlineComponentProvider"),[4,tm(t,new Qy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function rm(t){return em(t).then(function(t){return t.persistence})}function im(t){return em(t).then(function(t){return t.localStore})}function om(t){return nm(t).then(function(t){return t.remoteStore})}function sm(t){return nm(t).then(function(t){return t.syncEngine})}function am(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return[4,nm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=py.bind(null,e.syncEngine),n.onUnlisten=yy.bind(null,e.syncEngine),n)]}})})}function um(t,e,n){var r=this;void 0===n&&(n={});var i=new of;return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(r,void 0,void 0,function(){var r;return Object(lc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new $y({next:function(o){e.enqueueAndForget(function(){return ey(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new fc(dc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new fc(dc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new oy(Pl(n.path),o,{includeMetadataChanges:!0,so:!0});return ty(t,s)},[4,am(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function cm(t,e,n){var r=this;void 0===n&&(n={});var i=new of;return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(r,void 0,void 0,function(){var r;return Object(lc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new $y({next:function(n){e.enqueueAndForget(function(){return ey(t,s)}),n.fromCache&&"server"===r.source?i.reject(new fc(dc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new oy(n,o,{includeMetadataChanges:!0,so:!0});return ty(t,s)},[4,am(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var lm=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},hm=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),dm=new Map,fm=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},pm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Yp.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),gm=function(){function t(t){var e=this;this.oc=null,this.currentUser=Yp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(yc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(wc("string"==typeof n.accessToken),new fm(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return wc(null===t||"string"==typeof t),new Yp(t)},t}(),ym=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Yp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),mm=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new ym(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Yp.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function vm(t,e,n){if(!n)throw new fc(dc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function bm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fc(dc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function _m(t,e,n,r){if(!0===e&&!0===r)throw new fc(dc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function wm(t){if(!$c.isDocumentKey(t))throw new fc(dc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Cm(t){if($c.isDocumentKey(t))throw new fc(dc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Om(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":_c()}function Em(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fc(dc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Om(t);throw new fc(dc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Sm(t,e){if(e<=0)throw new fc(dc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Tm=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new fc(dc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fc(dc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,_m("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Im=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1,t instanceof hm?(this._databaseId=t,this._credentials=new pm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new fc(dc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hm(t.options.projectId)}(t),this._credentials=new gm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new fc(dc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new fc(dc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new pm;switch(t.type){case"gapi":var e=t.client;return wc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new mm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new fc(dc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=dm.get(this))&&(yc("ComponentProvider","Removing Datastore"),dm.delete(this),t.terminate()),Promise.resolve();var t},t}(),Am=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Nm(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),xm=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Nm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Pl(r))||this)._path=r,i.type="collection",i}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Am(this.firestore,null,new $c(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(xm);function jm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(so.m)(t),vm("collection","path",e),t instanceof Im)return Cm(n=Pc.fromString.apply(Pc,Object(lc.f)([e],r))),new Nm(t,null,n);if(!(t instanceof Am||t instanceof Nm))throw new fc(dc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Cm(n=Pc.fromString.apply(Pc,Object(lc.f)([t.path],r)).child(Pc.fromString(e))),new Nm(t.firestore,null,n)}function km(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(so.m)(t),1===arguments.length&&(e=Ec.u()),vm("doc","path",e),t instanceof Im)return wm(n=Pc.fromString.apply(Pc,Object(lc.f)([e],r))),new Am(t,null,new $c(n));if(!(t instanceof Am||t instanceof Nm))throw new fc(dc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return wm(n=t._path.child(Pc.fromString.apply(Pc,Object(lc.f)([e],r)))),new Am(t.firestore,t instanceof Nm?t._converter:null,new $c(n))}function Rm(t,e){return t=Object(so.m)(t),e=Object(so.m)(e),(t instanceof Am||t instanceof Nm)&&(e instanceof Am||e instanceof Nm)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function Pm(t,e){return t=Object(so.m)(t),e=Object(so.m)(e),t instanceof xm&&e instanceof xm&&t.firestore===e.firestore&&Bl(t._query,e._query)&&t._converter===e._converter}var Dm=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new gg(this,"async_queue_retry"),this.Ec=function(){var e=fg();e&&yc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=fg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=fg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e=this;return Object(lc.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!hf(t=n.sent()))throw t;return yc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,mc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Kg.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&_c()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(lc.b)(this,void 0,void 0,function(){var t;return Object(lc.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Mm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new of,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Lm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Dm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(lc.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Vm(this),this._firestoreClient.terminate()},e}(Im);function Fm(t){return t._firestoreClient||Vm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Vm(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new lm(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Zy(t._credentials,t._queue,r)}function Um(t,e,n){var r=this,i=new of;return t.asyncQueue.enqueue(function(){return Object(lc.b)(r,void 0,void 0,function(){var r;return Object(lc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Jy(t,n)];case 1:return o.sent(),[4,tm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===dc.FAILED_PRECONDITION||t.code===dc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function qm(t){if(t._initialized||t._terminated)throw new fc(dc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Hm=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new fc(dc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mc(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Bm=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Fc.fromBase64String(e))}catch(e){throw new fc(dc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Fc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),zm=function(t){this._methodName=t},Wm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new fc(dc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new fc(dc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Sc(this._lat,t._lat)||Sc(this._long,t._long)},t}(),Gm=/^__.*__$/,Km=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new wh(t,this.data,this.fieldMask,e,this.fieldTransforms):new _h(t,this.data,e,this.fieldTransforms)},t}(),Qm=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new wh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function $m(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _c()}}var Ym=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return yv(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if($m(this.Dc)&&Gm.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),Xm=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||pg(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new Ym({Dc:t,methodName:e,Lc:n,path:Mc.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Zm(t){var e=t._freezeSettings(),n=pg(t._databaseId);return new Xm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);dv("Data must be an object, but it was:",s,r);var a,u,c=lv(r,s);if(o.merge)a=new Lc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=fv(e,d[h],n);if(!s.contains(f))throw new fc(dc.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");mv(l,f)||l.push(f)}a=new Lc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Km(new cl(c),a,u)}var tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(zm);function ev(t,e,n){return new Ym({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var nv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype._toFieldTransform=function(t){return new lh(t.path,new nh)},e.prototype.isEqual=function(t){return t instanceof e},e}(zm),rv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(lc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=ev(this,t,!0),n=this.qc.map(function(t){return cv(t,e)}),r=new rh(n);return new lh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(zm),iv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(lc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=ev(this,t,!0),n=this.qc.map(function(t){return cv(t,e)}),r=new oh(n);return new lh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(zm),ov=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(lc.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new ah(t.R,Xl(t.R,this.Uc));return new lh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(zm);function sv(t,e,n,r){var i=t.Bc(1,e,n);dv("Data must be an object, but it was:",i,r);var o=[],s=cl.empty();jc(r,function(t,r){var a=gv(e,t,n);r=Object(so.m)(r);var u=i.kc(a);if(r instanceof tv)o.push(a);else{var c=cv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Lc(o);return new Qm(s,a,i.fieldTransforms)}function av(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[fv(e,r,n)],u=[i];if(o.length%2!=0)throw new fc(dc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(fv(e,o[c])),u.push(o[c+1]);for(var l=[],h=cl.empty(),d=a.length-1;d>=0;--d)if(!mv(l,a[d])){var f=a[d],p=u[d];p=Object(so.m)(p);var g=s.kc(f);if(p instanceof tv)l.push(f);else{var y=cv(p,g);null!=y&&(l.push(f),h.set(f,y))}}var m=new Lc(l);return new Qm(h,m,s.fieldTransforms)}function uv(t,e,n,r){return void 0===r&&(r=!1),cv(n,t.Bc(r?4:3,e))}function cv(t,e){if(hv(t=Object(so.m)(t)))return dv("Unsupported field value:",e,t),lv(t,e);if(t instanceof zm)return function(t,e){if(!$m(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=cv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(so.m)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xl(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ac.fromDate(t);return{timestampValue:od(e.R,n)}}if(t instanceof Ac)return n=new Ac(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:od(e.R,n)};if(t instanceof Wm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bm)return{bytesValue:sd(e.R,t._byteString)};if(t instanceof Am){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:cd(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Om(t))}(t,e)}function lv(t,e){var n={};return kc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jc(t,function(t,r){var i=cv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function hv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ac||t instanceof Wm||t instanceof Bm||t instanceof Am||t instanceof zm)}function dv(t,e,n){if(!hv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Om(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function fv(t,e,n){if((e=Object(so.m)(e))instanceof Hm)return e._internalPath;if("string"==typeof e)return gv(t,e);throw yv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var pv=new RegExp("[~\\*/\\[\\]]");function gv(t,e,n){if(e.search(pv)>=0)throw yv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Hm.bind.apply(Hm,Object(lc.f)([void 0],e.split(".")))))._internalPath}catch(r){throw yv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function yv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new fc(dc.INVALID_ARGUMENT,(a+=". ")+t+u)}function mv(t,e){return t.some(function(t){return t.isEqual(e)})}var vv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Am(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new bv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(_v("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),bv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(vv);function _v(t,e){return"string"==typeof e?gv(t,e):e instanceof Hm?e._internalPath:e._delegate._internalPath}var wv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Cv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(lc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Ov(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(_v("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(vv),Ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Cv),Ev=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new wv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Ov(n._firestore,n._userDataWriter,r.key,r,new wv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new fc(dc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Ov(t._firestore,t._userDataWriter,e.doc.key,e.doc,new wv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Ov(t._firestore,t._userDataWriter,e.doc.key,e.doc,new wv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Sv(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Sv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _c()}}function Tv(t,e){return t instanceof Cv&&e instanceof Cv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ev&&e instanceof Ev&&t._firestore===e._firestore&&Pm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Iv(t){if(Ml(t)&&0===t.explicitOrderBy.length)throw new fc(dc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Av=function(){};function xv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Nv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(lc.c)(e,t),e.prototype._apply=function(t){var e=Zm(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new fc(dc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Lv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Mv(r,t,l[c]));a={arrayValue:{values:u}}}else a=Mv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Lv(s,o),a=uv(n,"where",s,"in"===o||"not-in"===o);var h=ml.create(i,o,a);return function(t,e){if(e.g()){var n=Fl(t);if(null!==n&&!n.isEqual(e.field))throw new fc(dc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ll(t);null!==r&&Fv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new fc(dc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new xm(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Av),jv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(lc.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new fc(dc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new fc(dc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Al(e,n);return function(t,e){if(null===Ll(t)){var n=Fl(t);null!==n&&Fv(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new xm(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new kl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Av),kv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(lc.c)(e,t),e.prototype._apply=function(t){return new xm(t.firestore,t._converter,Hl(t._query,this.Gc,this.zc))},e}(Av),Rv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(lc.c)(e,t),e.prototype._apply=function(t){var e=Dv(t,this.type,this.Hc,this.Jc);return new xm(t.firestore,t._converter,function(t,e){return new kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Av),Pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(lc.c)(e,t),e.prototype._apply=function(t){var e=Dv(t,this.type,this.Hc,this.Jc);return new xm(t.firestore,t._converter,function(t,e){return new kl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Av);function Dv(t,e,n,r){if(n[0]=Object(so.m)(n[0]),n[0]instanceof vv)return function(t,e,n,r,i){if(!r)throw new fc(dc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ul(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(rl(e,r.key));else{var c=r.data.field(u.field);if(Bc(c))throw new fc(dc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new fc(dc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Tl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Zm(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new fc(dc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new fc(dc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Vl(t)&&-1!==c.indexOf("/"))throw new fc(dc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Pc.fromString(c));if(!$c.isDocumentKey(l))throw new fc(dc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new $c(l);a.push(rl(e,h))}else{var d=uv(n,r,c);a.push(d)}}return new Tl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Mv(t,e,n){if("string"==typeof(n=Object(so.m)(n))){if(""===n)throw new fc(dc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vl(e)&&-1!==n.indexOf("/"))throw new fc(dc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Pc.fromString(n));if(!$c.isDocumentKey(r))throw new fc(dc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return rl(t,new $c(r))}if(n instanceof Am)return rl(t,n._key);throw new fc(dc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Om(n)+".")}function Lv(t,e){if(!Array.isArray(t)||0===t.length)throw new fc(dc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new fc(dc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Fv(t,e,n){if(!n.isEqual(e))throw new fc(dc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Vv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Yc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return qc(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Hc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw _c()}},t.prototype.convertObject=function(t,e){var n=this,r={};return jc(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Wm(qc(t.latitude),qc(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=zc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Wc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Uc(t);return new Ac(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Pc.fromString(t);wc(Pd(n));var r=new hm(n.get(1),n.get(3)),i=new $c(n.popFirst(5));return r.isEqual(e)||mc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Uv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var qv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(lc.c)(e,t),e.prototype.convertBytes=function(t){return new Bm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Am(this.firestore,null,e)},e}(Vv),Hv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Zm(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Bv(t,this._firestore),i=Uv(r._converter,e,n),o=Jm(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,dh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Bv(t,this._firestore);return o="string"==typeof(e=Object(so.m)(e))||e instanceof Hm?av(this._dataReader,"WriteBatch.update",s._key,e,n,r):sv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,dh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Bv(t,this._firestore);return this._mutations=this._mutations.concat(new Ih(e._key,dh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new fc(dc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Bv(t,e){if((t=Object(so.m)(t)).firestore!==e)throw new fc(dc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var zv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(lc.c)(e,t),e.prototype.convertBytes=function(t){return new Bm(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Am(this.firestore,null,e)},e}(Vv);function Wv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Em(t,Am);var o=Em(t.firestore,Lm),s=Zm(o);return Kv(o,[("string"==typeof(e=Object(so.m)(e))||e instanceof Hm?av(s,"updateDoc",t._key,e,n,r):sv(s,"updateDoc",t._key,e)).toMutation(t._key,dh.exists(!0))])}function Gv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(so.m)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Mm(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Mm(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Am)c=Em(t.firestore,Lm),l=Pl(t._key.path),u={next:function(e){i[a]&&i[a](Qv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=Em(t,xm);c=Em(f.firestore,Lm),l=f._query;var p=new zv(c);u={next:function(t){i[a]&&i[a](new Ev(c,p,f,t))},error:i[a+1],complete:i[a+2]},Iv(t._query)}return function(t,e,n,r){var i=this,o=new $y(r),s=new oy(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(i,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=ty,[4,am(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(i,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=ey,[4,am(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Fm(c),l,h,u)}function Kv(t,e){return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return n=my,[4,sm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Fm(t),e)}function Qv(t,e,n){var r=n.docs.get(e._key),i=new zv(t);return new Cv(t,i,e._key,r,new wv(n.hasPendingWrites,n.fromCache),e._converter)}var $v=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(lc.c)(e,t),e.prototype.get=function(e){var n=this,r=Bv(e,this._firestore),i=new zv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Cv(n._firestore,i,r._key,t._document,new wv(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Zm(t)}return t.prototype.get=function(t){var e=this,n=Bv(t,this._firestore),r=new qv(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return _c();var i=t[0];if(i.isFoundDocument())return new vv(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new vv(e._firestore,r,n._key,null,n._converter);throw _c()})},t.prototype.set=function(t,e,n){var r=Bv(t,this._firestore),i=Uv(r._converter,e,n),o=Jm(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Bv(t,this._firestore);return o="string"==typeof(e=Object(so.m)(e))||e instanceof Hm?av(this._dataReader,"Transaction.update",s._key,e,n,r):sv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Bv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Yv(){if("undefined"==typeof Uint8Array)throw new fc(dc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Xv(){if("undefined"==typeof atob)throw new fc(dc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Zv=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Xv(),new t(Bm.fromBase64String(e))},t.fromUint8Array=function(e){return Yv(),new t(Bm.fromUint8Array(e))},t.prototype.toBase64=function(){return Xv(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Yv(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Jv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){qm(t=Em(t,Lm));var n=Fm(t),r=t._freezeSettings(),i=new Qy;return Um(n,i,new Gy(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){qm(t=Em(t,Lm));var e=Fm(t),n=t._freezeSettings(),r=new Qy;return Um(e,r,new Ky(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new fc(dc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new of;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(lc.b)(e,void 0,void 0,function(){var e;return Object(lc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return uf.yt()?[4,uf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(bp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),tb=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof hm||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Em(t,Im))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&vc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(lc.b)(e,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return[4,rm(t)];case 1:return e=r.sent(),[4,om(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Cc(t);return e.$r.delete(0),Cg(e)}(n))]}})})})}(Fm(Em(this._delegate,Lm)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(lc.b)(e,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return[4,rm(t)];case 1:return e=r.sent(),[4,om(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return(e=Cc(t)).$r.add(0),[4,Og(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Fm(Em(this._delegate,Lm)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&_m("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new of;return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(e,void 0,void 0,function(){var e;return Object(lc.d)(this,function(r){switch(r.label){case 0:return e=Oy,[4,sm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Fm(Em(this._delegate,Lm)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new $y(e);return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(n,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Cc(t).Gr.add(e),e.next()},[4,am(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(n,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Cc(t).Gr.delete(e)},[4,am(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Fm(t=Em(t,Lm)),Mm(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new fc(dc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new pb(this,jm(this._delegate,t))}catch(t){throw sb(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new ob(this,km(this._delegate,t))}catch(t){throw sb(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new hb(this,function(t,e){if(t=Em(t,Im),vm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fc(dc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new xm(t,null,function(t){return new kl(Pc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw sb(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return nm(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Xy(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Fm(t),function(n){return e(new $v(t,n))})}(this._delegate,function(n){return t(new nb(e,n))})},t.prototype.batch=function(){var t=this;return Fm(this._delegate),new rb(new Hv(this._delegate,function(e){return Kv(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new fc(dc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new fc(dc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(lc.c)(e,t),e.prototype.convertBytes=function(t){return new Zv(new Bm(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return ob.Zc(e,this.firestore,null)},e}(Vv),nb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new eb(t)}return t.prototype.get=function(t){var e=this,n=gb(t);return this._delegate.get(n).then(function(t){return new cb(e._firestore,new Cv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},t.prototype.set=function(t,e,n){var r=gb(t);return n?(bm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=gb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(lc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=gb(t);return this._delegate.delete(e),this},t}(),rb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=gb(t);return n?(bm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=gb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(lc.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=gb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),ib=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Ov(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new lb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new eb(e),n),i.set(n,o)),o},t}();ib.eu=new WeakMap;var ob=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new eb(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new fc(dc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Am(n._delegate,r,new $c(e)))},t.Zc=function(e,n,r){return new t(n,new Am(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new pb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new pb(this.firestore,jm(this._delegate,t))}catch(t){throw sb(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(so.m)(t))instanceof Am&&Rm(this._delegate,t)},t.prototype.set=function(t,e){e=bm("DocumentReference.set",e);try{return function(t,e,n){t=Em(t,Am);var r=Em(t.firestore,Lm),i=Uv(t._converter,e,n);return Kv(r,[Jm(Zm(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,dh.none())])}(this._delegate,t,e)}catch(t){throw sb(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Wv(this._delegate,t):Wv.apply(void 0,Object(lc.f)([this._delegate,t,e],n))}catch(t){throw sb(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Kv(Em((t=this._delegate).firestore,Lm),[new Ih(t._key,dh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ab(e),i=ub(e,function(e){return new cb(t.firestore,new Cv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Gv(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Em(t,Am);var e=Em(t.firestore,Lm),n=Fm(e),r=new zv(e);return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Cc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new fc(dc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Qg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,im(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Cv(e,r,t._key,n,new wv(null!==n&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Em(t,Am);var e=Em(t.firestore,Lm);return um(Fm(e),t._key,{source:"server"}).then(function(n){return Qv(e,t,n)})}(this._delegate):function(t){t=Em(t,Am);var e=Em(t.firestore,Lm);return um(Fm(e),t._key).then(function(n){return Qv(e,t,n)})}(this._delegate)).then(function(t){return new cb(e.firestore,new Cv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?ib.tu(this.firestore,e):null))},t}();function sb(t,e,n){return t.message=t.message.replace(e,n),t}function ab(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Mm(r))return r}return{}}function ub(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Mm(t[0])?t[0]:Mm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var cb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new ob(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Tv(this._delegate,t._delegate)},t}(),lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(cb),hb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new eb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,xv(this._delegate,function(t,e,n){var r=e,i=_v("where",t);return new Nv(i,r,n)}(e,n,r)))}catch(e){throw sb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,xv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=_v("orderBy",t);return new jv(r,n)}(e,n)))}catch(e){throw sb(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,xv(this._delegate,function(t){return Sm("limit",t),new kv("limit",t,"F")}(e)))}catch(e){throw sb(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,xv(this._delegate,function(t){return Sm("limitToLast",t),new kv("limitToLast",t,"L")}(e)))}catch(e){throw sb(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw sb(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Rv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw sb(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw sb(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,xv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw sb(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Pm(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Em(t,xm);var e=Em(t.firestore,Lm),n=Fm(e),r=new zv(e);return function(t,e){var n=this,r=new of;return t.asyncQueue.enqueueAndForget(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(lc.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Pp(t,e,!0)];case 1:return a=u.sent(),r=new ly(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Qg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,im(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Ev(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Em(t,xm);var e=Em(t.firestore,Lm),n=Fm(e),r=new zv(e);return cm(n,t._query,{source:"server"}).then(function(n){return new Ev(e,r,t,n)})}(this._delegate):function(t){t=Em(t,xm);var e=Em(t.firestore,Lm),n=Fm(e),r=new zv(e);return Iv(t._query),cm(n,t._query).then(function(n){return new Ev(e,r,t,n)})}(this._delegate)).then(function(t){return new fb(e.firestore,new Ev(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ab(e),i=ub(e,function(e){return new fb(t.firestore,new Ev(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Gv(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?ib.tu(this.firestore,e):null))},t}(),db=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new lb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),fb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new hb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new lb(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new db(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new lb(n._firestore,r))})},t.prototype.isEqual=function(t){return Tv(this._delegate,t._delegate)},t}(),pb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new ob(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ob(this.firestore,void 0===t?km(this._delegate):km(this._delegate,t))}catch(t){throw sb(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Em(t.firestore,Lm),r=km(t),i=Uv(t._converter,e);return Kv(n,[Jm(Zm(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,dh.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new ob(e.firestore,t)})},e.prototype.isEqual=function(t){return Rm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?ib.tu(this.firestore,t):null))},e}(hb);function gb(t){return Em(t,Am)}var yb,mb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Hm.bind.apply(Hm,Object(lc.f)([void 0],t)))}return t.documentId=function(){return new t(Mc.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(so.m)(t))instanceof Hm&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),vb=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new nv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new tv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rv("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new ov("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),bb=n("/6Yf"),_b={Firestore:tb,GeoPoint:Wm,Timestamp:Ac,Blob:Zv,Transaction:nb,WriteBatch:rb,DocumentReference:ob,DocumentSnapshot:cb,Query:hb,QueryDocumentSnapshot:lb,QuerySnapshot:fb,CollectionReference:pb,FieldPath:mb,FieldValue:vb,setLogLevel:function(t){pc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new bb.a("firestore",function(t){return function(t,e){return new tb(t,new Lm(t,e),new Jv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},_b)))})(yb=oo.a),yb.registerVersion("@firebase/firestore","2.2.5");var wb=n("VRyK"),Cb=n("qgXg"),Ob=n("Ylt2");class Eb extends re.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Sb(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new ie.a;if(this.isStopped||this.hasError?o=Xe.a.EMPTY:(this.observers.push(t),o=new Ob.a(this,t)),r&&t.add(t=new no.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Cb.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Sb{constructor(t,e){this.time=t,this.value=e}}function Tb(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Eb(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Ib(t,e){return e?Oe(()=>t,e):Oe(()=>t)}var Ab=n("tf+s");const xb=new r.r("angularfire2.auth.use-emulator"),Nb=new r.r("angularfire2.auth.settings"),jb=new r.r("angularfire2.auth.tenant-id"),kb=new r.r("angularfire2.auth.langugage-code"),Rb=new r.r("angularfire2.auth.use-device-language"),Pb=new r.r("angularfire.auth.persistence");let Db=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new ro.d(i),d=Object(ro.h)(h),f=new re.a,p=Object(gt.a)(void 0).pipe(Object(no.b)(h.outsideAngular),Oe(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Ot.a)(()=>Object(ro.g)(t,i,e)),Object(Ot.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ro.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Tb({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(gt.a)(null);else{p.pipe(Qe()).subscribe();const t=p.pipe(Oe(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Tb({bufferSize:1,refCount:!1})),e=t=>new yt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Oe(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Oe(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ib(n),Object(Ab.a)(h.outsideAngular),Object(no.b)(h.insideAngular)),this.user=t.pipe(Ib(r),Object(Ab.a)(h.outsideAngular),Object(no.b)(h.insideAngular)),this.idToken=this.user.pipe(Oe(t=>t?Object(ne.a)(t.getIdToken()):Object(gt.a)(null))),this.idTokenResult=this.user.pipe(Oe(t=>t?Object(ne.a)(t.getIdTokenResult()):Object(gt.a)(null))),this.credential=Object(wb.a)(t,f,this.authState.pipe(_t(t=>!t))).pipe(Object(Ot.a)(t=>(null==t?void 0:t.user)?t:null),Object(Ab.a)(h.outsideAngular),Object(no.b)(h.insideAngular))}return Object(ro.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ro.c),r.Rb(ro.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(xb,8),r.Rb(Nb,8),r.Rb(jb,8),r.Rb(kb,8),r.Rb(Rb,8),r.Rb(Pb,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(ro.c),Object(r.Rb)(ro.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(xb,8),Object(r.Rb)(Nb,8),Object(r.Rb)(jb,8),Object(r.Rb)(kb,8),Object(r.Rb)(Rb,8),Object(r.Rb)(Pb,8))},token:t,providedIn:"any"}),t})();function Mb(t,e){return function(t,e=$i.a){return new yt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Lb(t,e){return Mb(t,e).pipe(Object(Ot.a)(t=>({payload:t,type:"query"})))}function Fb(t,e){return Lb(t,e).pipe(Ne(void 0),Yi(),Object(Ot.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Vb(t,e,n){return Fb(t,n).pipe(je((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ub(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ub(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ub(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ji(),Object(Ot.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ub(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function qb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(ro.e)(Db,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Hb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Fb(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ot.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ne(void 0),Yi(),_t(([t,e])=>e.length>0||!t),Object(Ot.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(je((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qb(t);return Vb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Lb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ot.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ne.a)(this.query.get(t)).pipe(Object(no.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Bb(this.ref.doc(t),this.afs)}}class Bb{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=$b(n,e);return new Hb(r,i,this.afs)}snapshotChanges(){return Mb(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne(void 0),Yi(),Object(Ot.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ot.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ne.a)(this.ref.get(t)).pipe(Object(no.b)(this.afs.schedulers.insideAngular))}}class zb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Fb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ot.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),_t(t=>t.length>0),this.afs.keepUnstableUntilFirst):Fb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(je((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qb(t);return Vb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Lb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ot.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ne.a)(this.query.get(t)).pipe(Object(no.b)(this.afs.schedulers.insideAngular))}}const Wb=new r.r("angularfire2.enableFirestorePersistence"),Gb=new r.r("angularfire2.firestore.persistenceSettings"),Kb=new r.r("angularfire2.firestore.settings"),Qb=new r.r("angularfire2.firestore.use-emulator");function $b(t,e=(t=>t)){return{query:e(t),ref:t}}let Yb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ro.d(o),this.keepUnstableUntilFirst=Object(ro.h)(this.schedulers);const c=Object(ro.g)(t,o,e);!io.a.auth&&u&&Object(ro.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ro.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return Object(ne.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(yb){return"undefined"!=typeof console&&console.warn(yb),Object(gt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(gt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=$b(n,e),o=this.schedulers.ngZone.run(()=>r);return new Hb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new zb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Bb(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ro.c),r.Rb(ro.b,8),r.Rb(Wb,8),r.Rb(Kb,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Gb,8),r.Rb(Qb,8),r.Rb(xb,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(ro.c),Object(r.Rb)(ro.b,8),Object(r.Rb)(Wb,8),Object(r.Rb)(Kb,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(Gb,8),Object(r.Rb)(Qb,8),Object(r.Rb)(xb,8))},token:t,providedIn:"any"}),t})(),Xb=(()=>{class t{constructor(t){this.db=t,this.dbPath="/actorFire",this.ActorRef=t.collection(this.dbPath)}getAll(){return this.ActorRef}getById(t){return this.db.collection(this.dbPath,e=>e.where("id","==",t))}create(t){return this.ActorRef.add(Object.assign({},t))}update(t,e){return this.ActorRef.doc(t).update(e)}delete(t){return this.ActorRef.doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Yb))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zb=(()=>{class t{constructor(t){this.db=t,this.dbPath="/peliculaFire",this.PeliculaRef=t.collection(this.dbPath)}getAll(){return this.PeliculaRef}getById(t){return this.db.collection(this.dbPath,e=>e.where("id","==",t))}getMovieByActor(t){return this.db.collection(this.dbPath,e=>e.where("actores","==",t))}create(t){return this.PeliculaRef.add(Object.assign({},t))}update(t,e){return this.PeliculaRef.doc(t).update(e)}delete(t){return this.PeliculaRef.doc(t).delete()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Yb))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Jb(t,e){if(1&t){const t=r.Ob();r.Nb(0,"tr"),r.Nb(1,"td"),r.Nb(2,"span"),r.dc(3),r.Mb(),r.Mb(),r.Nb(4,"td"),r.Nb(5,"button",1),r.Ub("click",function(){r.Zb(t);const n=e.$implicit;return r.Wb().cargarActorSeleccionado(n)}),r.dc(6,"Seleccionar Actor"),r.Mb(),r.Mb(),r.Nb(7,"td"),r.Nb(8,"button",2),r.Ub("click",function(){r.Zb(t);const n=e.$implicit;return r.Wb().deleteActor(n)}),r.dc(9,"Eliminar"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(3),r.fc("",t.nombre," ",t.apellido,"")}}let t_=(()=>{class t{constructor(t){this._actorService=t,this.eventSelectedActor=new r.n}ngOnInit(){}cargarActorSeleccionado(t){this.eventSelectedActor.emit(t)}deleteActor(t){this._actorService.getById(t.id).snapshotChanges().pipe(Object(Ot.a)(t=>t.map(t=>(console.log("c",t),this._actorService.delete(t.payload.doc.id),Object.assign({id:t.payload.doc.id},t.payload.doc.data()))))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Xb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-listado-actores"]],inputs:{listadoActores:"listadoActores"},outputs:{eventSelectedActor:"eventSelectedActor"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","m-1",3,"click"],[1,"btn","btn-outline-secondary","m-1",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"table"),r.Nb(1,"tbody"),r.cc(2,Jb,10,2,"tr",0),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.Xb("ngForOf",e.listadoActores))},directives:[N],styles:[""]}),t})();function e_(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"ul",1),r.Nb(2,"li",2),r.Nb(3,"div"),r.Nb(4,"h6",3),r.dc(5,"Titulo"),r.Mb(),r.Nb(6,"small",4),r.dc(7),r.Mb(),r.Mb(),r.Nb(8,"span",4),r.dc(9),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(7),r.ec(t.nombre),r.Ab(2),r.ec(t.tipo)}}let n_=(()=>{class t{constructor(){this.listaPeliculas=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-peliculas-list"]],inputs:{listaPeliculas:"listaPeliculas"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"my-0"],[1,"text-muted"]],template:function(t,e){1&t&&r.cc(0,e_,10,2,"div",0),2&t&&r.Xb("ngForOf",e.listaPeliculas)},directives:[N],styles:[""]}),t})(),r_=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-pais-profile"]],inputs:{pais:"pais"},decls:33,vars:9,consts:[[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],["alt","",3,"src"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"my-0"],[1,"list-group-item","d-flex","justify-content-between","bg-light"]],template:function(t,e){1&t&&(r.Nb(0,"h4",0),r.Nb(1,"span",1),r.dc(2),r.Mb(),r.Lb(3,"img",2),r.Mb(),r.Nb(4,"ul",3),r.Nb(5,"li",4),r.Nb(6,"div"),r.Nb(7,"h6",5),r.dc(8),r.Mb(),r.Nb(9,"small",1),r.dc(10),r.Mb(),r.Mb(),r.Nb(11,"span",1),r.dc(12),r.Mb(),r.Mb(),r.Nb(13,"li",4),r.Nb(14,"div"),r.Nb(15,"h6",5),r.dc(16,"Poblaci\xf3n"),r.Mb(),r.Nb(17,"small",1),r.dc(18),r.Mb(),r.Mb(),r.Mb(),r.Nb(19,"li",4),r.Nb(20,"div"),r.Nb(21,"h6",5),r.dc(22,"Moneda"),r.Mb(),r.Nb(23,"small",1),r.dc(24),r.Mb(),r.Mb(),r.Nb(25,"span",1),r.dc(26),r.Mb(),r.Mb(),r.Nb(27,"li",6),r.Nb(28,"div"),r.Nb(29,"h6",5),r.dc(30,"Capital"),r.Mb(),r.Nb(31,"small"),r.dc(32),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.ec(e.pais.name),r.Ab(1),r.Xb("src",e.pais.flag,r.ac),r.Ab(5),r.ec(e.pais.region),r.Ab(2),r.ec(e.pais.subregion),r.Ab(2),r.ec(e.pais.alpha3Code),r.Ab(6),r.ec(e.pais.population),r.Ab(6),r.ec(e.pais.currencies[0].name),r.Ab(2),r.ec(e.pais.currencies[0].symbol),r.Ab(6),r.ec(e.pais.capital))},styles:["img[_ngcontent-%COMP%]{width:8vh;height:8vh}"]}),t})();function i_(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"div",1),r.Nb(2,"h4",2),r.Nb(3,"span",3),r.dc(4),r.Mb(),r.Nb(5,"picture"),r.Lb(6,"img",4),r.Mb(),r.Mb(),r.Mb(),r.Nb(7,"ul",5),r.Nb(8,"li",6),r.Nb(9,"div"),r.Nb(10,"h6",7),r.dc(11,"Fecha Nacimiento"),r.Mb(),r.Mb(),r.Nb(12,"span",3),r.dc(13),r.Mb(),r.Mb(),r.Nb(14,"li",6),r.Nb(15,"div"),r.Nb(16,"h6",7),r.dc(17,"Sexo"),r.Mb(),r.Mb(),r.Nb(18,"span",3),r.dc(19),r.Mb(),r.Mb(),r.Nb(20,"li",6),r.Nb(21,"div"),r.Nb(22,"h6",7),r.dc(23,"Pais"),r.Mb(),r.Mb(),r.Nb(24,"span",3),r.dc(25),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=r.Wb();r.Ab(4),r.fc("",t.actor.nombre," ",t.actor.apellido,""),r.Ab(2),r.Xb("src",t.actor.foto,r.ac),r.Ab(7),r.ec(t.actor.fechaNacimiento),r.Ab(6),r.ec(t.actor.sexo),r.Ab(6),r.ec(t.actor.pais.name)}}let o_=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-tabla-actor"]],inputs:{actor:"actor"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"header"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],["alt","",1,"img-fluid","img-thumbnail",3,"src"],[1,"list-group","mb-3"],[1,"list-group-item","d-flex","justify-content-between","lh-condensed"],[1,"my-0"]],template:function(t,e){1&t&&r.cc(0,i_,26,6,"div",0),2&t&&r.Xb("ngIf",e.actor)},directives:[k],encapsulation:2}),t})();function s_(t,e){if(1&t&&r.Lb(0,"app-peliculas-list",10),2&t){const t=r.Wb();r.Xb("listaPeliculas",t.moviesSelectedActor)}}function a_(t,e){if(1&t&&r.Lb(0,"app-pais-profile",11),2&t){const t=r.Wb();r.Xb("pais",t.selectedActor.pais)}}function u_(t,e){if(1&t&&r.Lb(0,"app-tabla-actor",12),2&t){const t=r.Wb();r.Xb("actor",t.selectedActor)}}let c_=(()=>{class t{constructor(t,e,n){this.route=t,this._actorService=e,this._peliculaService=n,this.moviesSelectedActor=[],this.movies=[]}ngOnInit(){this._actorService.getAll().valueChanges().subscribe(t=>{this.listadoActores=t||[]})}nuevoActor(){this.route.navigate(["/altaActor"])}actorSeleccionado(t){this.moviesSelectedActor=[],this.movies=[],this.selectedActor=t,console.log("select",t),this._peliculaService.getAll().valueChanges().subscribe(t=>{this.movies=t||[],this.movies.forEach((t,e)=>{console.log("pelicula",t);let n=t.actores.find(t=>t.id==this.selectedActor.id);console.log("actor",n),null!=n&&this.moviesSelectedActor.push(t)})})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Si),r.Kb(Xb),r.Kb(Zb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-actor-pelicula"]],decls:17,vars:4,consts:[["role","main"],[1,"btn","btn-outline-dark",3,"click"],[1,"jumbotron"],[1,"container"],[3,"listadoActores","eventSelectedActor"],[1,"row"],[1,"col-md-4"],[3,"listaPeliculas",4,"ngIf"],[3,"pais",4,"ngIf"],[3,"actor",4,"ngIf"],[3,"listaPeliculas"],[3,"pais"],[3,"actor"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Lb(1,"br"),r.Nb(2,"button",1),r.Ub("click",function(){return e.nuevoActor()}),r.dc(3,"Nuevo Actor"),r.Mb(),r.Lb(4,"br"),r.Nb(5,"div",2),r.Nb(6,"div",3),r.Nb(7,"app-listado-actores",4),r.Ub("eventSelectedActor",function(t){return e.actorSeleccionado(t)}),r.Mb(),r.Mb(),r.Mb(),r.Nb(8,"div",3),r.Nb(9,"div",5),r.Nb(10,"div",6),r.cc(11,s_,1,1,"app-peliculas-list",7),r.Mb(),r.Nb(12,"div",6),r.cc(13,a_,1,1,"app-pais-profile",8),r.Mb(),r.Nb(14,"div",6),r.cc(15,u_,1,1,"app-tabla-actor",9),r.Mb(),r.Mb(),r.Lb(16,"hr"),r.Mb(),r.Mb()),2&t&&(r.Ab(7),r.Xb("listadoActores",e.listadoActores),r.Ab(4),r.Xb("ngIf",e.selectedActor),r.Ab(2),r.Xb("ngIf",e.selectedActor),r.Ab(2),r.Xb("ngIf",e.selectedActor))},directives:[t_,k,n_,r_,o_],styles:[""]}),t})();var l_=n("XoHu");function h_(t,e){return new yt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(ne.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class d_{}const f_=new r.r("NgValueAccessor"),p_={provide:f_,useExisting:Object(r.U)(()=>y_),multi:!0},g_=new r.r("CompositionEventMode");let y_=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(g_,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([p_])]}),t})();function m_(t){return null==t||0===t.length}function v_(t){return null!=t&&"number"==typeof t.length}const b_=new r.r("NgValidators"),__=new r.r("NgAsyncValidators"),w_=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class C_{static min(t){return function(t){return e=>{if(m_(e.value)||m_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(m_(e.value)||m_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return m_(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return m_(t.value)||w_.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>m_(e.value)||!v_(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>v_(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return O_;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(m_(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return x_(t)}static composeAsync(t){return j_(t)}}function O_(t){return null}function E_(t){return null!=t}function S_(t){const e=Object(r.rb)(t)?Object(ne.a)(t):t;return Object(r.qb)(e),e}function T_(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function I_(t,e){return e.map(e=>e(t))}function A_(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function x_(t){if(!t)return null;const e=t.filter(E_);return 0==e.length?null:function(t){return T_(I_(t,e))}}function N_(t){return null!=t?x_(A_(t)):null}function j_(t){if(!t)return null;const e=t.filter(E_);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(ae.a)(e))return h_(e,null);if(Object(l_.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return h_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return h_(t=1===t.length&&Object(ae.a)(t[0])?t[0]:t,null).pipe(Object(Ot.a)(t=>e(...t)))}return h_(t,null)}(I_(t,e).map(S_)).pipe(Object(Ot.a)(T_))}}function k_(t){return null!=t?j_(A_(t)):null}function R_(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function P_(t){return t._rawValidators}function D_(t){return t._rawAsyncValidators}let M_=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=N_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=k_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),L_=(()=>{class t extends M_{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return F_(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const F_=r.Pb(L_);class V_ extends M_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class U_{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let q_=(()=>{class t extends U_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(V_,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),H_=(()=>{class t extends U_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(L_,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function B_(t,e){G_(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Q_(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Q_(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function z_(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),K_(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function W_(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function G_(t,e,n){const r=P_(t);null!==e.validator?t.setValidators(R_(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=D_(t);if(null!==e.asyncValidator?t.setAsyncValidators(R_(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();W_(e._rawValidators,n),W_(e._rawAsyncValidators,n)}}function K_(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=P_(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=D_(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};W_(e._rawValidators,t),W_(e._rawAsyncValidators,t)}return r}function Q_(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function $_(t,e){G_(t,e,!1)}function Y_(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function X_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Z_="VALID",J_="INVALID",tw="PENDING",ew="DISABLED";function nw(t){return(sw(t)?t.validators:t)||null}function rw(t){return Array.isArray(t)?N_(t):t||null}function iw(t,e){return(sw(e)?e.asyncValidators:t)||null}function ow(t){return Array.isArray(t)?k_(t):t||null}function sw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class aw{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=rw(this._rawValidators),this._composedAsyncValidatorFn=ow(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Z_}get invalid(){return this.status===J_}get pending(){return this.status==tw}get disabled(){return this.status===ew}get enabled(){return this.status!==ew}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=rw(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ow(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=tw,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ew,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Z_,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Z_&&this.status!==tw||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ew:Z_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=tw,this._hasOwnPendingAsyncValidator=!0;const e=S_(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof cw?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof lw&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?ew:this.errors?J_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tw)?tw:this._anyControlsHaveStatus(J_)?J_:Z_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){sw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class uw extends aw{constructor(t=null,e,n){super(nw(e),iw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){X_(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){X_(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class cw extends aw{constructor(t,e,n){super(nw(e),iw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof uw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class lw extends aw{constructor(t,e,n){super(nw(e),iw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof uw?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const hw={provide:L_,useExisting:Object(r.U)(()=>fw)},dw=(()=>Promise.resolve(null))();let fw=(()=>{class t extends L_{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new cw({},N_(t),k_(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){dw.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),B_(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){dw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),X_(this._directives,t)})}addFormGroup(t){dw.then(()=>{const e=this._findContainer(t.path),n=new cw({});$_(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){dw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){dw.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Y_(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(b_,10),r.Kb(__,10))},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([hw]),r.xb]}),t})(),pw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const gw={provide:f_,useExisting:Object(r.U)(()=>yw),multi:!0};let yw=(()=>{class t extends d_{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.zb([gw]),r.xb]}),t})(),mw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();const vw=new r.r("NgModelWithFormControlWarning"),bw={provide:L_,useExisting:Object(r.U)(()=>_w)};let _w=(()=>{class t extends L_{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(K_(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return B_(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){z_(t.control||null,t,!1),X_(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Y_(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(z_(e||null,t),n instanceof uw&&(B_(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);$_(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return K_(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){G_(this.form,this,!1),this._oldForm&&K_(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(b_,10),r.Kb(__,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([bw]),r.xb,r.yb]}),t})();const ww={provide:V_,useExisting:Object(r.U)(()=>Cw)};let Cw=(()=>{class t extends V_{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===y_?n=t:Object.getPrototypeOf(t.constructor)===d_?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(L_,13),r.Kb(b_,10),r.Kb(__,10),r.Kb(f_,10),r.Kb(vw,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([ww]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})();const Ow={provide:f_,useExisting:Object(r.U)(()=>Sw),multi:!0};function Ew(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Sw=(()=>{class t extends d_{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=Ew(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Ow]),r.xb]}),t})(),Tw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Ew(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.E),r.Kb(Sw,9))},t.\u0275dir=r.Fb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Iw={provide:f_,useExisting:Object(r.U)(()=>xw),multi:!0};function Aw(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let xw=(()=>{class t extends d_{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Iw]),r.xb]}),t})(),Nw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Aw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Aw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.E),r.Kb(xw,9))},t.\u0275dir=r.Fb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),jw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[mw]]}),t})(),kw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[jw]}),t})(),Rw=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:vw,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[jw]}),t})(),Pw=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new cw(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new uw(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new lw(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof uw||t instanceof cw||t instanceof lw?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:function(){return new t},token:t,providedIn:Rw}),t})();class Dw{constructor(){this.id="",this.nombre="",this.apellido="",this.sexo="",this.fechaNacimiento="",this.pais={},this.foto=""}}let Mw=(()=>{class t{constructor(t){this.http=t}getAllPaises(){return this.http.get("https://restcountries.eu/rest/v2/all")}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ut))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Lw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.Nb(1,"h4",1),r.Nb(2,"span",2),r.dc(3),r.Mb(),r.Lb(4,"img",3),r.Mb(),r.Nb(5,"form",4),r.Nb(6,"div",5),r.Nb(7,"div",6),r.Nb(8,"button",7),r.Ub("click",function(){r.Zb(t);const n=e.$implicit;return r.Wb().setCountryActor(n)}),r.dc(9,"Seleccionar"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(3),r.ec(t.name),r.Ab(1),r.Xb("src",t.flag,r.ac)}}let Fw=(()=>{class t{constructor(t){this._paisService=t,this.eventSendCountry=new r.n,this.paises=[]}ngOnInit(){this.paises=this._paisService.getAllPaises().subscribe(t=>{this.paises=t,this.paises=this.paises.slice(1,6)})}setCountryActor(t){this.eventSendCountry.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Mw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-tabla-paises"]],outputs:{eventSendCountry:"eventSendCountry"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-muted"],["alt","",3,"src"],[1,"card","p-2"],[1,"d-block"],[1,"input-group-append"],["type","submit",1,"btn","btn-secondary","w-100",3,"click"]],template:function(t,e){1&t&&r.cc(0,Lw,10,2,"div",0),2&t&&r.Xb("ngForOf",e.paises)},directives:[N,pw,H_,fw],styles:["img[_ngcontent-%COMP%]{width:8vh;height:8vh}"]}),t})();function Vw(t,e){1&t&&(r.Nb(0,"small",28),r.dc(1,"El nombre es requerido"),r.Mb())}function Uw(t,e){1&t&&(r.Nb(0,"small",28),r.dc(1,"El apellido es requerido"),r.Mb())}function qw(t,e){1&t&&(r.Nb(0,"small",28),r.dc(1,"El pais es requerido"),r.Mb())}function Hw(t,e){1&t&&(r.Nb(0,"small",28),r.dc(1,"La fecha de Nacimiento es requerida"),r.Mb())}function Bw(t,e){1&t&&(r.Nb(0,"small",28),r.dc(1,"El sexo es requerido"),r.Mb())}function zw(t,e){1&t&&(r.Nb(0,"small",28),r.dc(1,"El ID es requerido"),r.Mb())}function Ww(t,e){1&t&&(r.Nb(0,"small",28),r.dc(1,"La foto es requerida"),r.Mb())}function Gw(t,e){1&t&&(r.Nb(0,"div",29),r.dc(1," Debe completar todos los campoos. "),r.Mb())}let Kw=(()=>{class t{constructor(t,e,n){this.fb=t,this.route=e,this._actorService=n,this.formValid=!0,this.actor=new Dw}ngOnInit(){this.fg=this.fb.group({id_actor:["",[C_.required]],nombre:["",[C_.required]],apellido:["",C_.required],fechaNacimiento:["",[C_.required]],sexo:["",C_.required],country:["",C_.required],photo:["",C_.required]}),this.fg.controls.sexo.patchValue("Femenino")}setCountry(t){this.actor.pais=t}save(){this._actorService.create(this.actor),this.route.navigate(["/buscarPelicula"])}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Pw),r.Kb(Si),r.Kb(Xb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-alta-actores"]],decls:56,vars:17,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"eventSendCountry"],[1,"col-md-8","order-md-1"],[1,"mb-3"],[1,"needs-validation",3,"formGroup","ngSubmit"],[1,"col-md-6","mb-3"],["for","firstName"],["type","text","id","firstName","placeholder","Ingrese un nombre","formControlName","nombre",1,"form-control",3,"ngModel","ngModelChange"],["class","invalid",4,"ngIf"],["for","lastName"],["type","text","id","lastName","placeholder","Ingrese el Apellido","formControlName","apellido",1,"form-control",3,"ngModel","ngModelChange"],["for","country"],["type","text","id","country","placeholder","Ingrese un pais","formControlName","country",1,"form-control",3,"ngModel","ngModelChange"],["for","birthday"],["type","date","id","birthday","formControlName","fechaNacimiento",1,"form-control",3,"ngModel","ngModelChange"],["id","country","formControlName","sexo",1,"custom-select","d-block","w-100",3,"ngModel","ngModelChange"],["value","Femenino"],["value","Masculino"],["for","id_actor"],["type","text","id","id_actor","placeholder","001","formControlName","id_actor",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","mb-3"],["for","photo"],["type","text","id","photo","formControlName","photo",1,"form-control",3,"ngModel","ngModelChange"],[1,"mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled"],["class","alert alert-warning","role","alert",4,"ngIf"],[1,"invalid"],["role","alert",1,"alert","alert-warning"]],template:function(t,e){if(1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"app-tabla-paises",3),r.Ub("eventSendCountry",function(t){return e.setCountry(t)}),r.Mb(),r.Mb(),r.Nb(4,"div",4),r.Nb(5,"h4",5),r.dc(6,"Alta Actor"),r.Mb(),r.Nb(7,"form",6),r.Ub("ngSubmit",function(){return e.save()}),r.Nb(8,"div",1),r.Nb(9,"div",7),r.Nb(10,"label",8),r.dc(11,"Nombre"),r.Mb(),r.Nb(12,"input",9),r.Ub("ngModelChange",function(t){return e.actor.nombre=t}),r.Mb(),r.cc(13,Vw,2,0,"small",10),r.Mb(),r.Nb(14,"div",7),r.Nb(15,"label",11),r.dc(16,"Apellido"),r.Mb(),r.Nb(17,"input",12),r.Ub("ngModelChange",function(t){return e.actor.apellido=t}),r.Mb(),r.cc(18,Uw,2,0,"small",10),r.Mb(),r.Mb(),r.Nb(19,"div",1),r.Nb(20,"div",7),r.Nb(21,"label",13),r.dc(22,"Pais"),r.Mb(),r.Nb(23,"input",14),r.Ub("ngModelChange",function(t){return e.actor.pais.name=t}),r.Mb(),r.cc(24,qw,2,0,"small",10),r.Mb(),r.Nb(25,"div",7),r.Nb(26,"label",15),r.dc(27,"Fecha de Nacimiento"),r.Mb(),r.Nb(28,"input",16),r.Ub("ngModelChange",function(t){return e.actor.fechaNacimiento=t}),r.Mb(),r.cc(29,Hw,2,0,"small",10),r.Mb(),r.Mb(),r.Nb(30,"div",1),r.Nb(31,"div",7),r.Nb(32,"label",13),r.dc(33,"Sexo"),r.Mb(),r.Nb(34,"select",17),r.Ub("ngModelChange",function(t){return e.actor.sexo=t}),r.Nb(35,"option",18),r.dc(36,"Femenino"),r.Mb(),r.Nb(37,"option",19),r.dc(38,"Masculino"),r.Mb(),r.Mb(),r.cc(39,Bw,2,0,"small",10),r.Mb(),r.Nb(40,"div",7),r.Nb(41,"label",20),r.dc(42,"ID"),r.Mb(),r.Nb(43,"input",21),r.Ub("ngModelChange",function(t){return e.actor.id=t}),r.Mb(),r.cc(44,zw,2,0,"small",10),r.Mb(),r.Mb(),r.Nb(45,"div",1),r.Nb(46,"div",22),r.Nb(47,"label",23),r.dc(48,"Url Foto"),r.Mb(),r.Nb(49,"input",24),r.Ub("ngModelChange",function(t){return e.actor.foto=t}),r.Mb(),r.cc(50,Ww,2,0,"small",10),r.Mb(),r.Mb(),r.Lb(51,"hr",25),r.Nb(52,"button",26),r.dc(53,"Guardar"),r.Mb(),r.Lb(54,"hr"),r.cc(55,Gw,2,0,"div",27),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){let t=null,n=null,i=null,o=null,s=null,a=null,u=null;r.Ab(7),r.Xb("formGroup",e.fg),r.Ab(5),r.Xb("ngModel",e.actor.nombre),r.Ab(1),r.Xb("ngIf",(null==(t=e.fg.get("nombre"))||null==t.errors?null:t.errors.required)&&(null==(t=e.fg.get("nombre"))?null:t.touched)),r.Ab(4),r.Xb("ngModel",e.actor.apellido),r.Ab(1),r.Xb("ngIf",(null==(n=e.fg.get("apellido"))||null==n.errors?null:n.errors.required)&&(null==(n=e.fg.get("apellido"))?null:n.touched)),r.Ab(5),r.Xb("ngModel",e.actor.pais.name),r.Ab(1),r.Xb("ngIf",(null==(i=e.fg.get("country"))||null==i.errors?null:i.errors.required)&&(null==(i=e.fg.get("country"))?null:i.touched)),r.Ab(4),r.Xb("ngModel",e.actor.fechaNacimiento),r.Ab(1),r.Xb("ngIf",(null==(o=e.fg.get("fechaNacimiento"))||null==o.errors?null:o.errors.required)&&(null==(o=e.fg.get("fechaNacimiento"))?null:o.touched)),r.Ab(5),r.Xb("ngModel",e.actor.sexo),r.Ab(5),r.Xb("ngIf",(null==(s=e.fg.get("sexo"))||null==s.errors?null:s.errors.required)&&(null==(s=e.fg.get("sexo"))?null:s.touched)),r.Ab(4),r.Xb("ngModel",e.actor.id),r.Ab(1),r.Xb("ngIf",(null==(a=e.fg.get("id_actor"))||null==a.errors?null:a.errors.required)&&(null==(a=e.fg.get("id_actor"))?null:a.touched)),r.Ab(5),r.Xb("ngModel",e.actor.foto),r.Ab(1),r.Xb("ngIf",(null==(u=e.fg.get("photo"))||null==u.errors?null:u.errors.required)&&(null==(u=e.fg.get("photo"))?null:u.touched)),r.Ab(2),r.Xb("disabled","INVALID"==e.fg.status),r.Ab(3),r.Xb("ngIf",!e.formValid)}},directives:[Fw,pw,H_,_w,y_,q_,Cw,k,Sw,Tw,Nw],styles:[".invalid[_ngcontent-%COMP%]{color:red}"]}),t})(),Qw=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-bienvenidos"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Nb(0,"p"),r.dc(1,"bienvenidos works!"),r.Mb())},styles:[""]}),t})();class $w{constructor(){this.id="",this.nombre="",this.tipo="",this.fechaDeEstreno="",this.cantidadDePublico=0,this.fotoPelicula="",this.actores=[]}}function Yw(t,e){if(1&t){const t=r.Ob();r.Nb(0,"tr"),r.Nb(1,"td"),r.Nb(2,"span"),r.dc(3),r.Mb(),r.Mb(),r.Nb(4,"td"),r.Nb(5,"button",1),r.Ub("click",function(){r.Zb(t);const n=e.$implicit;return r.Wb().cargarPeliculaSeleccionada(n)}),r.dc(6,"Seleccionar Pelicula"),r.Mb(),r.Mb(),r.Nb(7,"td"),r.Nb(8,"button",2),r.Ub("click",function(){r.Zb(t);const n=e.$implicit;return r.Wb().deleteMovie(n)}),r.dc(9,"Eliminar"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(3),r.ec(t.nombre)}}let Xw=(()=>{class t{constructor(){this.listadoDePeliculas=[],this.eventSendSelectedMovie=new r.n,this.eventDelMovie=new r.n}ngOnInit(){}cargarPeliculaSeleccionada(t){this.peliculaSeleccionada=t,this.eventSendSelectedMovie.emit(this.peliculaSeleccionada)}deleteMovie(t){this.eventDelMovie.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-pelicula-listado"]],inputs:{listadoDePeliculas:"listadoDePeliculas"},outputs:{eventSendSelectedMovie:"eventSendSelectedMovie",eventDelMovie:"eventDelMovie"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","m-1",3,"click"],[1,"btn","btn-outline-secondary","m-1",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"table"),r.Nb(1,"tbody"),r.cc(2,Yw,10,1,"tr",0),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.Xb("ngForOf",e.listadoDePeliculas))},directives:[N],styles:[""]}),t})();function Zw(t,e){if(1&t&&(r.Nb(0,"div",1),r.Nb(1,"div",2),r.Nb(2,"div",3),r.Nb(3,"h2"),r.dc(4,"Detalle Pelicula"),r.Mb(),r.Nb(5,"p"),r.dc(6),r.Mb(),r.Nb(7,"p"),r.dc(8),r.Mb(),r.Nb(9,"p"),r.dc(10),r.Mb(),r.Lb(11,"img",4),r.Mb(),r.Mb(),r.Mb()),2&t){const t=r.Wb();r.Ab(6),r.ec(t.peliculaParaMostrar.nombre),r.Ab(2),r.ec(t.peliculaParaMostrar.cantidadDePublico),r.Ab(2),r.ec(t.peliculaParaMostrar.tipo),r.Ab(1),r.Xb("src",t.peliculaParaMostrar.fotoPelicula,r.ac)}}let Jw=(()=>{class t{constructor(){this.peliculaParaMostrar=new $w}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-detalle-pelicula"]],inputs:{peliculaParaMostrar:"peliculaParaMostrar"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-md-4"],[3,"src","alt"]],template:function(t,e){1&t&&r.cc(0,Zw,12,4,"div",0),2&t&&r.Xb("ngIf",e.peliculaParaMostrar)},directives:[k],styles:["img[_ngcontent-%COMP%]{height:50vh;width:50vh}"]}),t})();function tC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.Nb(1,"button",2),r.Ub("click",function(){r.Zb(t);const e=r.Wb().$implicit;return r.Wb().viewDetails(e)}),r.dc(2,"Ver detalles \xbb"),r.Mb(),r.Mb()}}function eC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.Nb(1,"button",3),r.Ub("click",function(){r.Zb(t);const e=r.Wb().$implicit;return r.Wb().seleccionar(e)}),r.dc(2,"Seleccionar"),r.Mb(),r.Nb(3,"button",3),r.Ub("click",function(){r.Zb(t);const e=r.Wb().$implicit;return r.Wb().quitar(e)}),r.dc(4,"Quitar"),r.Mb(),r.Mb()}}function nC(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"h5"),r.dc(2),r.Mb(),r.cc(3,tC,3,0,"div",1),r.cc(4,eC,5,0,"div",1),r.Mb()),2&t){const t=e.$implicit,n=r.Wb();r.Ab(2),r.fc("",t.nombre," ",t.apellido,""),r.Ab(1),r.Xb("ngIf",n.details),r.Ab(1),r.Xb("ngIf",!n.details)}}let rC=(()=>{class t{constructor(t){this._actorService=t,this.eventActorDetail=new r.n,this.eventActorAdd=new r.n,this.eventActorDel=new r.n}ngOnInit(){}viewDetails(t){this.eventActorDetail.emit(t)}seleccionar(t){this.eventActorAdd.emit(t)}quitar(t){this.eventActorDel.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Xb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-actor-listado"]],inputs:{listaActores:"listaActores",details:"details"},outputs:{eventActorDetail:"eventActorDetail",eventActorAdd:"eventActorAdd",eventActorDel:"eventActorDel"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-secondary","m-1",3,"click"]],template:function(t,e){1&t&&r.cc(0,nC,5,4,"div",0),2&t&&r.Xb("ngForOf",e.listaActores)},directives:[N,k],styles:[""]}),t})();function iC(t,e){if(1&t&&r.Lb(0,"app-detalle-pelicula",10),2&t){const t=r.Wb();r.Xb("peliculaParaMostrar",t.peliculaSeleccionada)}}function oC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"app-actor-listado",11),r.Ub("eventActorDetail",function(e){return r.Zb(t),r.Wb().viewDetails(e)}),r.Mb()}if(2&t){const t=r.Wb();r.Xb("listaActores",t.peliculaSeleccionada.actores)("details",t.details)}}function sC(t,e){if(1&t&&r.Lb(0,"app-tabla-actor",12),2&t){const t=r.Wb();r.Xb("actor",t.actorSelected)}}function aC(t,e){1&t&&(r.Nb(0,"small",30),r.dc(1,"El ID es requerido"),r.Mb())}function uC(t,e){1&t&&(r.Nb(0,"small",30),r.dc(1,"El Titulo es requerido"),r.Mb())}function cC(t,e){1&t&&(r.Nb(0,"small",30),r.dc(1,"La fecha de estreno es requerida"),r.Mb())}function lC(t,e){1&t&&(r.Nb(0,"small",30),r.dc(1,"La foto es requerida"),r.Mb())}function hC(t,e){1&t&&(r.Nb(0,"small",30),r.dc(1,"El Publico es requerido"),r.Mb())}function dC(t,e){1&t&&(r.Nb(0,"small",30),r.dc(1,"La cantidad de Publico debes estar entre 0 y 3.000.000"),r.Mb())}function fC(t,e){1&t&&(r.Nb(0,"small",30),r.dc(1,"El Genero es requerido"),r.Mb())}function pC(t,e){if(1&t&&(r.Nb(0,"ul"),r.Nb(1,"li"),r.dc(2),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(2),r.fc("",t.nombre," ",t.apellido,"")}}function gC(t,e){if(1&t&&(r.Nb(0,"div",1),r.cc(1,pC,3,2,"ul",31),r.Mb()),2&t){const t=r.Wb();r.Ab(1),r.Xb("ngForOf",t.peliculaEdit.actores)}}const yC=[{path:"bienvenidos",component:Qw},{path:"buscarPelicula",component:(()=>{class t{constructor(t,e){this._peliculaService=t,this.route=e,this.listadoDePeliculas=[],this.bActorTable=!1,this.details=!0,this._peliculaService.getAll().valueChanges().subscribe(t=>{this.listadoDePeliculas=t||[]}),this.peliculaSeleccionada=new $w,this.bActorTable=!1}ngOnInit(){}nuevaPelicula(){this.route.navigate(["/peliculas/alta"])}selectedMovie(t){this.peliculaSeleccionada=t,this.actorSelected=void 0}deleteMovie(t){this._peliculaService.getById(t.id).snapshotChanges().pipe(Object(Ot.a)(t=>t.map(t=>(console.log("c",t),this._peliculaService.delete(t.payload.doc.id),Object.assign({id:t.payload.doc.id},t.payload.doc.data()))))).subscribe()}viewDetails(t){this.bActorTable=!0,this.actorSelected=t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Zb),r.Kb(Si))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-busqueda-pelicula"]],decls:18,vars:4,consts:[["role","main"],[1,"btn","btn-outline-dark",3,"click"],[1,"jumbotron"],[1,"container"],[3,"listadoDePeliculas","eventSendSelectedMovie","eventDelMovie"],[1,"row"],[1,"col-md-4"],[3,"peliculaParaMostrar",4,"ngIf"],[3,"listaActores","details","eventActorDetail",4,"ngIf"],[3,"actor",4,"ngIf"],[3,"peliculaParaMostrar"],[3,"listaActores","details","eventActorDetail"],[3,"actor"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Lb(1,"br"),r.Nb(2,"div"),r.Nb(3,"button",1),r.Ub("click",function(){return e.nuevaPelicula()}),r.dc(4,"Nueva Pelicula"),r.Mb(),r.Mb(),r.Lb(5,"br"),r.Nb(6,"div",2),r.Nb(7,"div",3),r.Nb(8,"app-pelicula-listado",4),r.Ub("eventSendSelectedMovie",function(t){return e.selectedMovie(t)})("eventDelMovie",function(t){return e.deleteMovie(t)}),r.Mb(),r.Mb(),r.Mb(),r.Nb(9,"div",3),r.Nb(10,"div",5),r.Nb(11,"div",6),r.cc(12,iC,1,1,"app-detalle-pelicula",7),r.Mb(),r.Nb(13,"div",6),r.cc(14,oC,1,2,"app-actor-listado",8),r.Mb(),r.Nb(15,"div",6),r.cc(16,sC,1,1,"app-tabla-actor",9),r.Mb(),r.Mb(),r.Lb(17,"hr"),r.Mb(),r.Mb()),2&t&&(r.Ab(8),r.Xb("listadoDePeliculas",e.listadoDePeliculas),r.Ab(4),r.Xb("ngIf",""!=e.peliculaSeleccionada.id),r.Ab(2),r.Xb("ngIf",""!=e.peliculaSeleccionada.id),r.Ab(2),r.Xb("ngIf",e.actorSelected))},directives:[Xw,k,Jw,rC,o_],styles:[""]}),t})()},{path:"altaActor",component:Kw},{path:"peliculas/alta",component:(()=>{class t{constructor(t,e,n,i){this.fb=t,this._peliculaService=e,this.route=n,this._actorService=i,this.details=!1,this.eventSaveMovie=new r.n,this.peliculaEdit=new $w,this._actorService.getAll().valueChanges().subscribe(t=>{this.listaActores=t||[]})}ngOnInit(){this.formGroup=this.fb.group({id:["",[C_.required]],title:["",C_.required],fechaDeEstreno:["",[C_.required]],photo:["",C_.required],people:["",[C_.required,C_.min(0),C_.max(3e6)]],gender:["",C_.required]}),console.log(this.formGroup)}save(){this._peliculaService.create(this.peliculaEdit),this.route.navigate(["/buscarPelicula"])}deleteActor(t){let e=this.peliculaEdit.actores.findIndex(e=>e.id==t.id);this.peliculaEdit.actores.splice(e,1)}addActor(t){this.peliculaEdit.actores.push(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Pw),r.Kb(Zb),r.Kb(Si),r.Kb(Xb))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-pelicula-alta"]],outputs:{eventSaveMovie:"eventSaveMovie"},decls:55,vars:18,consts:[[1,"container"],[1,"row"],[1,"col-md-4","order-md-2","mb-4"],[3,"listaActores","details","eventActorAdd","eventActorDel"],[1,"col-md-8","order-md-1"],[1,"mb-3"],[1,"needs-validation",3,"formGroup"],[1,"col-md-6","mb-3"],["for","id"],["type","text","name","id","id","id","placeholder","001","formControlName","id",1,"form-control",3,"ngModel","ngModelChange"],["class","invalid",4,"ngIf"],["for","title"],["type","text","name","title","id","title","placeholder","The movie","formControlName","title",1,"form-control",3,"ngModel","ngModelChange"],["for","premiere"],["type","text","name","premiere","id","premiere","placeholder","01-01-1900","formControlName","fechaDeEstreno",1,"form-control",3,"ngModel","ngModelChange"],["for","urlAddress"],["type","text","id","urlAddress","name","urlAddress","placeholder","http://the-movie.jpg","formControlName","photo",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-5","mb-3"],["for","people"],["type","number","id","people","name","people","placeholder","","formControlName","people",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-4","mb-3"],["for","gender"],["id","gender","name","gender","formControlName","gender",1,"custom-select","d-block","w-100",3,"ngModel","ngModelChange"],["value",""],["value","terror"],["value","amor"],["value","comedia"],["value","otros"],["class","row",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-lg","btn-block",3,"disabled","click"],[1,"invalid"],[4,"ngFor","ngForOf"]],template:function(t,e){if(1&t&&(r.Lb(0,"br"),r.Nb(1,"div",0),r.Nb(2,"div",1),r.Nb(3,"div",2),r.Nb(4,"app-actor-listado",3),r.Ub("eventActorAdd",function(t){return e.addActor(t)})("eventActorDel",function(t){return e.deleteActor(t)}),r.Mb(),r.Mb(),r.Nb(5,"div",4),r.Nb(6,"h4",5),r.dc(7,"Alta de Pelicula"),r.Mb(),r.Nb(8,"form",6),r.Nb(9,"div",1),r.Nb(10,"div",7),r.Nb(11,"label",8),r.dc(12,"ID"),r.Mb(),r.Nb(13,"input",9),r.Ub("ngModelChange",function(t){return e.peliculaEdit.id=t}),r.Mb(),r.cc(14,aC,2,0,"small",10),r.Mb(),r.Nb(15,"div",7),r.Nb(16,"label",11),r.dc(17,"Titulo"),r.Mb(),r.Nb(18,"input",12),r.Ub("ngModelChange",function(t){return e.peliculaEdit.nombre=t}),r.Mb(),r.cc(19,uC,2,0,"small",10),r.Mb(),r.Mb(),r.Nb(20,"div",5),r.Nb(21,"label",13),r.dc(22,"Fecha de Estreno"),r.Mb(),r.Nb(23,"input",14),r.Ub("ngModelChange",function(t){return e.peliculaEdit.fechaDeEstreno=t}),r.Mb(),r.cc(24,cC,2,0,"small",10),r.Mb(),r.Nb(25,"div",5),r.Nb(26,"label",15),r.dc(27,"Url Photo Address"),r.Mb(),r.Nb(28,"input",16),r.Ub("ngModelChange",function(t){return e.peliculaEdit.fotoPelicula=t}),r.Mb(),r.cc(29,lC,2,0,"small",10),r.Mb(),r.Nb(30,"div",1),r.Nb(31,"div",17),r.Nb(32,"label",18),r.dc(33,"Cantidad de Publico"),r.Mb(),r.Nb(34,"input",19),r.Ub("ngModelChange",function(t){return e.peliculaEdit.cantidadDePublico=t}),r.Mb(),r.cc(35,hC,2,0,"small",10),r.cc(36,dC,2,0,"small",10),r.Mb(),r.Nb(37,"div",20),r.Nb(38,"label",21),r.dc(39,"Tipo"),r.Mb(),r.Nb(40,"select",22),r.Ub("ngModelChange",function(t){return e.peliculaEdit.tipo=t}),r.Nb(41,"option",23),r.dc(42,"Seleccionar..."),r.Mb(),r.Nb(43,"option",24),r.dc(44,"Terror"),r.Mb(),r.Nb(45,"option",25),r.dc(46,"Amor"),r.Mb(),r.Nb(47,"option",26),r.dc(48,"Comedia"),r.Mb(),r.Nb(49,"option",27),r.dc(50,"Otros"),r.Mb(),r.Mb(),r.cc(51,fC,2,0,"small",10),r.Mb(),r.Mb(),r.cc(52,gC,2,1,"div",28),r.Nb(53,"button",29),r.Ub("click",function(){return e.save()}),r.dc(54,"Guardar"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){let t=null,n=null,i=null,o=null,s=null,a=null,u=null;r.Ab(4),r.Xb("listaActores",e.listaActores)("details",e.details),r.Ab(4),r.Xb("formGroup",e.formGroup),r.Ab(5),r.Xb("ngModel",e.peliculaEdit.id),r.Ab(1),r.Xb("ngIf",(null==(t=e.formGroup.get("id"))||null==t.errors?null:t.errors.required)&&(null==(t=e.formGroup.get("id"))?null:t.touched)),r.Ab(4),r.Xb("ngModel",e.peliculaEdit.nombre),r.Ab(1),r.Xb("ngIf",(null==(n=e.formGroup.get("title"))||null==n.errors?null:n.errors.required)&&(null==(n=e.formGroup.get("title"))?null:n.touched)),r.Ab(4),r.Xb("ngModel",e.peliculaEdit.fechaDeEstreno),r.Ab(1),r.Xb("ngIf",(null==(i=e.formGroup.get("fechaDeEstreno"))||null==i.errors?null:i.errors.required)&&(null==(i=e.formGroup.get("fechaDeEstreno"))?null:i.touched)),r.Ab(4),r.Xb("ngModel",e.peliculaEdit.fotoPelicula),r.Ab(1),r.Xb("ngIf",(null==(o=e.formGroup.get("photo"))||null==o.errors?null:o.errors.required)&&(null==(o=e.formGroup.get("photo"))?null:o.touched)),r.Ab(5),r.Xb("ngModel",e.peliculaEdit.cantidadDePublico),r.Ab(1),r.Xb("ngIf",(null==(s=e.formGroup.get("people"))||null==s.errors?null:s.errors.required)&&(null==(s=e.formGroup.get("people"))?null:s.touched)),r.Ab(1),r.Xb("ngIf",(null==(a=e.formGroup.get("people"))||null==a.errors?null:a.errors.min)||(null==(a=e.formGroup.get("people"))||null==a.errors?null:a.errors.max)),r.Ab(4),r.Xb("ngModel",e.peliculaEdit.tipo),r.Ab(11),r.Xb("ngIf",(null==(u=e.formGroup.get("gender"))||null==u.errors?null:u.errors.required)&&(null==(u=e.formGroup.get("gender"))?null:u.touched)),r.Ab(1),r.Xb("ngIf",e.peliculaEdit.actores),r.Ab(1),r.Xb("disabled","INVALID"==e.formGroup.status)}},directives:[rC,pw,H_,_w,y_,q_,Cw,k,yw,Sw,Tw,Nw,N],encapsulation:2}),t})()},{path:"actor/actorPelicula",component:c_},{path:"",component:Qw},{path:"**",pathMatch:"full",redirectTo:"bienvenidos"}];let mC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[Ui.forRoot(yC)],Ui]}),t})();var vC=n("w1tV");class bC{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new _C(t,this.observables,this.project))}}class _C extends ue{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(he(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class wC{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new CC(t,this.predicate))}}class CC extends bt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function OC(t){return null==t}function EC(t){return"function"==typeof t.set}function SC(t,e){return EC(e)?e:t.ref(e)}function TC(t,e){if("string"==typeof t)return e.stringCase();if(EC(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function IC(t,e,n="on",r=$i.a){return new yt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Ot.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(vC.a)())}function AC(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function xC(t,e){const{payload:n,prevKey:r,key:i}=e,o=AC(t,i),s=function(t,e){if(OC(e))return 0;{const n=AC(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function NC(t){return(OC(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function jC(t,e,n){return function(t,e,n){return IC(t,"value","once",n).pipe(Oe(r=>{const i=[Object(gt.a)(r)];return e.forEach(e=>i.push(IC(t,e,"on",n))),Object(wb.a)(...i).pipe(je(xC,[]))}),Ji())}(t,e=NC(e),n)}function kC(t,e,n){const r=(e=NC(e)).map(e=>IC(t,e,"on",n));return Object(wb.a)(...r)}function RC(t,e){return function(n,r){return TC(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function PC(t,e){return function(){return IC(t,"value","on",e)}}n("6Uf2");const DC=new r.r("angularfire2.realtimeDatabaseURL"),MC=new r.r("angularfire2.database.use-emulator");let LC=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ro.d(i),this.keepUnstableUntilFirst=Object(ro.h)(this.schedulers);const a=o,u=Object(ro.g)(t,i,e);!io.a.auth&&s&&Object(ro.j)(),this.database=Object(ro.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>SC(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:RC(r,"update"),set:RC(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?TC(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>jC(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>kC(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return IC(t,"value","on",e).pipe(Object(Ot.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new bC(t,n))}}(e),Object(Ot.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new wC(r))),Object(Ot.a)(t=>t.actions));var r}(t,kC(t,e).pipe(je((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>jC(t,r,n).pipe(Object(Ot.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>SC(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>PC(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>PC(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Ot.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ro.c),r.Rb(ro.b,8),r.Rb(DC,8),r.Rb(r.C),r.Rb(r.A),r.Rb(MC,8),r.Rb(xb,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(ro.c),Object(r.Rb)(ro.b,8),Object(r.Rb)(DC,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(MC,8),Object(r.Rb)(xb,8))},token:t,providedIn:"any"}),t})(),FC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[LC]}),t})(),VC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-navbar"]],decls:16,vars:3,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"nav",0),r.Nb(1,"a",1),r.dc(2,"Peliculas"),r.Mb(),r.Nb(3,"button",2),r.Lb(4,"span",3),r.Mb(),r.Nb(5,"div",4),r.Nb(6,"ul",5),r.Nb(7,"li",6),r.Nb(8,"a",7),r.dc(9,"Bienvenidos"),r.Mb(),r.Mb(),r.Nb(10,"li",6),r.Nb(11,"a",7),r.dc(12,"Buscar Pelicula"),r.Mb(),r.Mb(),r.Nb(13,"li",6),r.Nb(14,"a",7),r.dc(15,"Buscar Actor"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(8),r.Xb("routerLink","/bienvenidos"),r.Ab(3),r.Xb("routerLink","/buscarPelicula"),r.Ab(3),r.Xb("routerLink","/actor/actorPelicula"))},directives:[Ii,xi],styles:[""]}),t})(),UC=(()=>{class t{constructor(){this.title="peliculas"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:4,vars:0,template:function(t,e){1&t&&(r.Lb(0,"app-navbar"),r.Lb(1,"br"),r.Lb(2,"br"),r.Lb(3,"router-outlet"))},directives:[VC,Ni],styles:[".invalid[_ngcontent-%COMP%]{color:red}"]}),t})();const qC={apiKey:"AIzaSyB8Yhtui-xQZBvyBMEsTYbumtWhe84dVqg",authDomain:"peliculas-108050.firebaseapp.com",projectId:"peliculas-108050",storageBucket:"peliculas-108050.appspot.com",messagingSenderId:"842507107057",appId:"1:842507107057:web:0afa3b9360606714cac750"};let HC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[UC]}),t.\u0275inj=r.Hb({providers:[],imports:[[pt,mC,kw,ro.a.initializeApp(qC),FC,Rw,ee]]}),t})();Object(r.T)(),dt().bootstrapModule(HC).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);